/*! Wardrobe v0.0.2 */
(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Sifter=e()})(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=i(((t||"")+"").toLowerCase()),!t||!t.length)return[];var e,n,o,a,l=[],u=t.split(/ +/);for(e=0,n=u.length;n>e;e++){if(o=r(u[e]),this.settings.diacritics)for(a in s)s.hasOwnProperty(a)&&(o=o.replace(RegExp(a,"g"),s[a]));l.push({string:u[e],regex:RegExp(o,"i")})}return l},t.prototype.iterator=function(t,e){var n;n=o(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},n.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var n,i,r,o;n=this,t=n.prepareSearch(t,e),r=t.tokens,i=t.options.fields,o=r.length;var s=function(t,e){var n,i;return t?(t=(t||"")+"",i=t.search(e.regex),-1===i?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)):0},a=function(){var t=i.length;return t?1===t?function(t,e){return s(e[i[0]],t)}:function(e,n){for(var r=0,o=0;t>r;r++)o+=s(n[i[r]],e);return o/t}:function(){return 0}}();return o?1===o?function(t){return a(r[0],t)}:function(t){for(var e=0,n=0;o>e;e++)n+=a(r[e],t);return n/o}:function(){return 0}},t.prototype.prepareSearch=function(t,e){return"object"==typeof t?t:{options:n({},e),query:((t||"")+"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,n){var i,r,s,a=this;return r=this.prepareSearch(t,n),n=r.options,t=r.query,o(n.fields)||(n.fields=[n.fields]),s=n.score||a.getScoreFunction(r),t.length?(a.iterator(a.items,function(t,e){i=s(t),i>0&&r.items.push({score:i,id:e})}),r.items.sort(function(t,e){return e.score-t.score})):(a.iterator(a.items,function(t,e){r.items.push({score:1,id:e})}),n.sort&&r.items.sort(function(){var t=n.sort,i="desc"===n.direction?-1:1;return function(n,r){return e(a.items[n.id][t],a.items[r.id][t])*i}}())),r.total=r.items.length,"number"==typeof n.limit&&(r.items=r.items.slice(0,n.limit)),r};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:e>t?-1:0:(t=((t||"")+"").toLowerCase(),e=((e||"")+"").toLowerCase(),t>e?1:e>t?-1:0)},n=function(t){var e,n,i,r;for(e=1,n=arguments.length;n>e;e++)if(r=arguments[e])for(i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);return t},i=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},r=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||$&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s={a:"[aÀÁÂÃÄÅàáâãäå]",c:"[cÇç]",e:"[eÈÉÊËèéêë]",i:"[iÌÍÎÏìíîï]",n:"[nÑñ]",o:"[oÒÓÔÕÕÖØòóôõöø]",s:"[sŠš]",u:"[uÙÚÛÜùúûü]",y:"[yŸÿý]",z:"[zŽž]"};return t}),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.MicroPlugin=e()}(this,function(){var t={};t.mixin=function(t){t.plugins={},t.prototype.initializePlugins=function(t){var n,i,r,o=this,s=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},e.isArray(t))for(n=0,i=t.length;i>n;n++)"string"==typeof t[n]?s.push(t[n]):(o.plugins.settings[t[n].name]=t[n].options,s.push(t[n].name));else if(t)for(r in t)t.hasOwnProperty(r)&&(o.plugins.settings[r]=t[r],s.push(r));for(;s.length;)o.require(s.shift())},t.prototype.loadPlugin=function(e){var n=this,i=n.plugins,r=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=r.fn.apply(n,[n.plugins.settings[e]||{}]),i.names.push(e)},t.prototype.require=function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]},t.define=function(e,n){t.plugins[e]={name:e,fn:n}}};var e={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}};return t}),function(t,e){"function"==typeof define&&define.amd?define(["jquery","sifter","microplugin"],e):t.Selectize=e(t.jQuery,t.Sifter,t.MicroPlugin)}(this,function(t,e,n){"use strict";var i=function(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?RegExp(e,"i"):e,i=function(t){var e=0;if(3===t.nodeType){var r=t.data.search(n);if(r>=0&&t.data.length>0){var o=t.data.match(n),s=document.createElement("span");s.className="highlight";var a=t.splitText(r);a.splitText(o[0].length);var l=a.cloneNode(!0);s.appendChild(l),a.parentNode.replaceChild(s,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var u=0;t.childNodes.length>u;++u)u+=i(t.childNodes[u]);return e};return t.each(function(){i(this)})}},r=function(){};r.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},off:function(t,e){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[t]:(this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1),void 0)},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;this._events[t].length>e;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(t){for(var e=["on","off","trigger"],n=0;e.length>n;n++)t.prototype[e[n]]=r.prototype[e[n]]};var o=/Mac/.test(navigator.userAgent),s=65,a=13,l=27,u=37,c=38,h=39,d=40,f=8,p=46,g=16,m=o?91:17,v=o?18:17,y=9,b=1,w=2,x=function(t){return t!==void 0},C=function(t){return t===void 0||null===t?"":"boolean"==typeof t?t?"1":"0":t+""},_=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},k={};k.before=function(t,e,n){var i=t[e];t[e]=function(){return n.apply(t,arguments),i.apply(t,arguments)}},k.after=function(t,e,n){var i=t[e];t[e]=function(){var e=i.apply(t,arguments);return n.apply(t,arguments),e}};var S=function(e,n){if(!t.isArray(n))return n;var i,r,o={};for(i=0,r=n.length;r>i;i++)n[i].hasOwnProperty(e)&&(o[n[i][e]]=n[i]);return o},T=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},M=function(t,e){var n;return function(){var i=this,r=arguments;window.clearTimeout(n),n=window.setTimeout(function(){t.apply(i,r)},e)}},L=function(t,e,n){var i,r=t.trigger,o={};t.trigger=function(){var n=arguments[0];return-1===e.indexOf(n)?r.apply(t,arguments):(o[n]=arguments,void 0)},n.apply(t,[]),t.trigger=r;for(i in o)o.hasOwnProperty(i)&&r.apply(t,o[i])},E=function(t,e,n,i){t.on(e,n,function(e){for(var n=e.target;n&&n.parentNode!==t[0];)n=n.parentNode;return e.currentTarget=n,i.apply(this,[e])})},O=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},A=function(t,e,n){var i,r,o={};if(n)for(i=0,r=n.length;r>i;i++)o[n[i]]=t.css(n[i]);else o=t.css();e.css(o)},D=function(e,n){var i=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"nowrap"}).text(e).appendTo("body");A(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=i.width();return i.remove(),r},F=function(t){var e=function(e){var n,i,r,o,s,a,l,u;e=e||window.event||{},e.metaKey||e.altKey||t.data("grow")!==!1&&(n=t.val(),e.type&&"keydown"===e.type.toLowerCase()&&(i=e.keyCode,r=i>=97&&122>=i||i>=65&&90>=i||i>=48&&57>=i||32===i,i===p||i===f?(u=O(t[0]),u.length?n=n.substring(0,u.start)+n.substring(u.start+u.length):i===f&&u.start?n=n.substring(0,u.start-1)+n.substring(u.start+1):i===p&&u.start!==void 0&&(n=n.substring(0,u.start)+n.substring(u.start+1))):r&&(a=e.shiftKey,l=String.fromCharCode(e.keyCode),l=a?l.toUpperCase():l.toLowerCase(),n+=l)),o=t.attr("placeholder")||"",!n.length&&o.length&&(n=o),s=D(n,t)+4,s!==t.width()&&(t.width(s),t.triggerHandler("resize")))};t.on("keydown keyup update blur",e),e()},I=function(n,i){var r=this;n[0].selectize=r,t.extend(r,{settings:i,$input:n,tagType:"select"===n[0].tagName.toLowerCase()?b:w,eventNS:".selectize"+ ++I.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isLocked:!1,isFocused:!1,isInputFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:M(r.onSearchChange,i.loadThrottle)}),r.sifter=new e(this.options,{diacritics:i.diacritics}),t.extend(r.options,S(i.valueField,i.options)),delete r.settings.options,t.extend(r.optgroups,S(i.optgroupValueField,i.optgroups)),delete r.settings.optgroups,r.settings.mode=r.settings.mode||(1===r.settings.maxItems?"single":"multi"),"boolean"!=typeof r.settings.hideSelected&&(r.settings.hideSelected="multi"===r.settings.mode),r.initializePlugins(r.settings.plugins),r.setupCallbacks(),r.setupTemplates(),r.setup()};return r.mixin(I),n.mixin(I),t.extend(I.prototype,{setup:function(){var e,n,i,r,s,a,l,u,c,h,d=this,f=d.settings,p=d.eventNS,y=t(window),w=t(document);l=d.settings.mode,u=d.$input.attr("tabindex")||"",c=d.$input.attr("class")||"",e=t("<div>").addClass(f.wrapperClass).addClass(c).addClass(l),n=t("<div>").addClass(f.inputClass).addClass("items").appendTo(e),i=t('<input type="text">').appendTo(n).attr("tabindex",u),a=t(f.dropdownParent||e),r=t("<div>").addClass(f.dropdownClass).addClass(c).addClass(l).hide().appendTo(a),s=t("<div>").addClass(f.dropdownContentClass).appendTo(r),e.css({width:d.$input[0].style.width}),d.plugins.names.length&&(h="plugin-"+d.plugins.names.join(" plugin-"),e.addClass(h),r.addClass(h)),(null===f.maxItems||f.maxItems>1)&&d.tagType===b&&d.$input.attr("multiple","multiple"),d.settings.placeholder&&i.attr("placeholder",f.placeholder),d.$wrapper=e,d.$control=n,d.$control_input=i,d.$dropdown=r,d.$dropdown_content=s,n.on("mousedown",function(t){t.isDefaultPrevented()||window.setTimeout(function(){d.focus(!0)},0)}),n.on("click",function(){d.isInputFocused||d.focus(!0)}),r.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),r.on("mousedown","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),E(n,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),F(i),i.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.onFocus.apply(d,arguments)}}),w.on("keydown"+p,function(t){d.isCmdDown=t[o?"metaKey":"ctrlKey"],d.isCtrlDown=t[o?"altKey":"ctrlKey"],d.isShiftDown=t.shiftKey}),w.on("keyup"+p,function(t){t.keyCode===v&&(d.isCtrlDown=!1),t.keyCode===g&&(d.isShiftDown=!1),t.keyCode===m&&(d.isCmdDown=!1)}),w.on("mousedown"+p,function(t){if(d.isFocused){if(t.target===d.$dropdown[0]||t.target.parentNode===d.$dropdown[0]){var e=d.ignoreFocus;return d.ignoreFocus=!0,window.setTimeout(function(){d.ignoreFocus=e,d.focus(!1)},0),void 0}d.$control.has(t.target).length||t.target===d.$control[0]||d.blur()}}),y.on(["scroll"+p,"resize"+p].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),y.on("mousemove"+p,function(){d.ignoreHover=!1}),d.$input.attr("tabindex",-1).hide().after(d.$wrapper),t.isArray(f.items)&&(d.setValue(f.items),delete f.items),d.updateOriginalInput(),d.refreshItems(),d.refreshClasses(),d.updatePlaceholder(),d.isSetup=!0,d.$input.is(":disabled")&&d.disable(),d.on("change",this.onChange),d.trigger("initialize"),f.preload&&d.onSearchChange("")},setupTemplates:function(){var e=this,n=e.settings.labelField,i=e.settings.optgroupLabelField,r={optgroup:function(t){return'<div class="optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[i])+"</div>"},option:function(t,e){return'<div class="option">'+e(t[n])+"</div>"},item:function(t,e){return'<div class="item">'+e(t[n])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};e.settings.render=t.extend({},r,e.settings.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(t in n)n.hasOwnProperty(t)&&(e=this.settings[n[t]],e&&this.on(t,e))},onChange:function(){this.$input.trigger("change")},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(e){e.target===this.$control_input[0];var n=this;if(n.isLocked)return e.keyCode!==y&&e.preventDefault(),void 0;switch(e.keyCode){case s:if(n.isCmdDown)return n.selectAll(),void 0;break;case l:return n.blur(),void 0;case d:if(!n.isOpen&&n.hasOptions)n.open();else if(n.$activeOption){n.ignoreHover=!0;var i=n.getAdjacentOption(n.$activeOption,1);i.length&&n.setActiveOption(i,!0,!0)}return e.preventDefault(),void 0;case c:if(n.$activeOption){n.ignoreHover=!0;var r=n.getAdjacentOption(n.$activeOption,-1);r.length&&n.setActiveOption(r,!0,!0)}return e.preventDefault(),void 0;case a:return n.$activeOption&&n.onOptionSelect({currentTarget:n.$activeOption}),e.preventDefault(),void 0;case u:return n.advanceSelection(-1,e),void 0;case h:return n.advanceSelection(1,e),void 0;case y:return n.settings.create&&t.trim(n.$control_input.val()).length&&(n.createItem(),e.preventDefault()),void 0;case f:case p:return n.deleteSelection(e),void 0}return n.isFull()||n.isInputHidden?(e.preventDefault(),void 0):void 0},onKeyUp:function(t){var e=this;if(e.isLocked)return t&&t.preventDefault();var n=e.$control_input.val()||"";e.lastValue!==n&&(e.lastValue=n,e.onSearchChange(n),e.refreshOptions(),e.trigger("type",n))},onSearchChange:function(t){var e=this,n=e.settings.load;n&&(e.loadedSearches.hasOwnProperty(t)||(e.loadedSearches[t]=!0,e.load(function(i){n.apply(e,[t,i])})))},onFocus:function(t){var e=this;return e.isInputFocused=!0,e.isFocused=!0,e.isDisabled?(e.blur(),t.preventDefault(),!1):(e.ignoreFocus||("focus"===e.settings.preload&&e.onSearchChange(""),e.showInput(),e.setActiveItem(null),e.refreshOptions(!!e.settings.openOnFocus),e.refreshClasses()),void 0)},onBlur:function(){var t=this;t.isInputFocused=!1,t.ignoreFocus||(t.close(),t.setTextboxValue(""),t.setActiveItem(null),t.setActiveOption(null),t.setCaret(t.items.length),t.isFocused=!1,t.refreshClasses())},onOptionHover:function(t){this.ignoreHover||this.setActiveOption(t.currentTarget,!1)},onOptionSelect:function(e){var n,i,r=this;e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),r.focus(!1),i=t(e.currentTarget),i.hasClass("create")?r.createItem():(n=i.attr("data-value"),n&&(r.setTextboxValue(""),r.addItem(n),!r.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&r.setActiveOption(r.getOption(n))))},onItemSelect:function(t){var e=this;"multi"===e.settings.mode&&(t.preventDefault(),e.setActiveItem(t.currentTarget,t),e.focus(!1),e.hideInput())},load:function(t){var e=this,n=e.$wrapper.addClass("loading");e.loading++,t.apply(e,[function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(!1),e.isInputFocused&&e.open()),e.loading||n.removeClass("loading"),e.trigger("load",t)}])},setTextboxValue:function(t){this.$control_input.val(t).triggerHandler("update"),this.lastValue=t},getValue:function(){return this.tagType===b&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e){L(this,["change"],function(){this.clear();for(var n=t.isArray(e)?e:[e],i=0,r=n.length;r>i;i++)this.addItem(n[i])})},setActiveItem:function(e,n){var i,r,o,s,a,l,u,c,h=this;if(e=t(e),!e.length)return t(h.$activeItems).removeClass("active"),h.$activeItems=[],h.isFocused=h.isInputFocused,void 0;if(i=n&&n.type.toLowerCase(),"mousedown"===i&&h.isShiftDown&&h.$activeItems.length){for(c=h.$control.children(".active:last"),s=Array.prototype.indexOf.apply(h.$control[0].childNodes,[c[0]]),a=Array.prototype.indexOf.apply(h.$control[0].childNodes,[e[0]]),s>a&&(u=s,s=a,a=u),r=s;a>=r;r++)l=h.$control[0].childNodes[r],-1===h.$activeItems.indexOf(l)&&(t(l).addClass("active"),h.$activeItems.push(l));n.preventDefault()}else"mousedown"===i&&h.isCtrlDown||"keydown"===i&&this.isShiftDown?e.hasClass("active")?(o=h.$activeItems.indexOf(e[0]),h.$activeItems.splice(o,1),e.removeClass("active")):h.$activeItems.push(e.addClass("active")[0]):(t(h.$activeItems).removeClass("active"),h.$activeItems=[e.addClass("active")[0]]);h.isFocused=!!h.$activeItems.length||h.isInputFocused},setActiveOption:function(e,n,i){var r,o,s,a,l,u=this;u.$activeOption&&u.$activeOption.removeClass("active"),u.$activeOption=null,e=t(e),e.length&&(u.$activeOption=e.addClass("active"),(n||!x(n))&&(r=u.$dropdown_content.height(),o=u.$activeOption.outerHeight(!0),n=u.$dropdown_content.scrollTop()||0,s=u.$activeOption.offset().top-u.$dropdown_content.offset().top+n,a=s,l=s-r+o,s+o>r-n?u.$dropdown_content.stop().animate({scrollTop:l},i?u.settings.scrollDuration:0):n>s&&u.$dropdown_content.stop().animate({scrollTop:a},i?u.settings.scrollDuration:0)))},selectAll:function(){this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.isFocused=!0,this.$activeItems.length&&this.hideInput()},hideInput:function(){var t=this;t.close(),t.setTextboxValue(""),t.$control_input.css({opacity:0,position:"absolute",left:-1e4}),t.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(t){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),e.isInputFocused=!0,window.setTimeout(function(){e.ignoreFocus=!1,t&&e.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,n=e.searchField;return{fields:t.isArray(n)?n:[n],sort:e.sortField,direction:e.sortDirection}},search:function(e){var n,i,r,o=this,s=o.settings,a=this.getSearchOptions();if(s.score&&(r=o.settings.score.apply(this,[e]),"function"!=typeof r))throw Error('Selectize "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,i=o.sifter.search(e,t.extend(a,{score:r})),o.currentResults=i):i=t.extend(!0,{},o.currentResults),s.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==o.items.indexOf(C(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(e){e===void 0&&(e=!0);var n,r,o,s,a,l,u,c,h,d,f,p=this,g=p.$control_input.val(),m=p.search(g),v=p.$dropdown_content;if(r=m.items.length,"number"==typeof p.settings.maxOptions&&(r=Math.min(r,p.settings.maxOptions)),o={},p.settings.optgroupOrder)for(s=p.settings.optgroupOrder,n=0;s.length>n;n++)o[s[n]]=[];else s=[];for(n=0;r>n;n++)a=p.options[m.items[n].id],l=a[p.settings.optgroupField]||"",p.optgroups.hasOwnProperty(l)||(l=""),o.hasOwnProperty(l)||(o[l]=[],s.push(l)),o[l].push(p.render("option",a));for(u=[],n=0,r=s.length;r>n;n++)l=s[n],p.optgroups.hasOwnProperty(l)&&o[l].length?(c=p.render("optgroup_header",p.optgroups[l])||"",c+=o[l].join(""),u.push(p.render("optgroup",t.extend({},p.optgroups[l],{html:c})))):u.push(o[l].join(""));if(v.html(u.join("")),p.settings.highlight&&m.query.length&&m.tokens.length)for(n=0,r=m.tokens.length;r>n;n++)i(v,m.tokens[n].regex);if(!p.settings.hideSelected)for(n=0,r=p.items.length;r>n;n++)p.getOption(p.items[n]).addClass("selected");h=p.settings.create&&m.query.length,h&&(v.prepend(p.render("option_create",{input:g})),f=t(v[0].childNodes[0])),p.hasOptions=m.items.length>0||h,p.hasOptions?(d=m.items.length>0?f?p.getAdjacentOption(f,1):v.find("[data-selectable]").first():f,p.setActiveOption(d),e&&!p.isOpen&&p.open()):(p.setActiveOption(null),e&&p.isOpen&&p.close())},addOption:function(e){var n,i,r,o=this;if(t.isArray(e))for(n=0,i=e.length;i>n;n++)o.addOption(e[n]);else r=C(e[o.settings.valueField]),r&&!o.options.hasOwnProperty(r)&&(o.userOptions[r]=!0,o.options[r]=e,o.lastQuery=null,o.trigger("option_add",r,e))},addOptionGroup:function(t,e){this.optgroups[t]=e,this.trigger("optgroup_add",t,e)},updateOption:function(e,n){var i,r,o,s,a,l,u=this;if(e=C(e),o=C(n[u.settings.valueField]),u.options.hasOwnProperty(e)){if(!o)throw Error("Value must be set in option data");o!==e&&(delete u.options[e],s=u.items.indexOf(e),-1!==s&&u.items.splice(s,1,o)),u.options[o]=n,a=u.renderCache.item,l=u.renderCache.option,x(a)&&(delete a[e],delete a[o]),x(l)&&(delete l[e],delete l[o]),-1!==u.items.indexOf(o)&&(i=u.getItem(e),r=t(u.render("item",n)),i.hasClass("active")&&r.addClass("active"),i.replaceWith(r)),u.isOpen&&u.refreshOptions(!1)}},removeOption:function(t){var e=this;t=C(t),delete e.userOptions[t],delete e.options[t],e.lastQuery=null,e.trigger("option_remove",t),e.removeItem(t)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.options=t.sifter.items={},t.lastQuery=null,t.trigger("option_clear"),t.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,n){var i=this.$dropdown.find("[data-selectable]"),r=i.index(e)+n;return r>=0&&i.length>r?i.eq(r):t()},getElementWithValue:function(e,n){if(e=C(e))for(var i=0,r=n.length;r>i;i++)if(n[i].getAttribute("data-value")===e)return t(n[i]);return t()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItem:function(e){L(this,["change"],function(){var n,i,r,o,s=this,a=s.settings.mode;e=C(e),"single"===a&&s.clear(),"multi"===a&&s.isFull()||-1===s.items.indexOf(e)&&s.options.hasOwnProperty(e)&&(n=t(s.render("item",s.options[e])),s.items.splice(s.caretPos,0,e),s.insertAtCaret(n),s.refreshClasses(),s.isSetup&&(r=s.$dropdown_content.find("[data-selectable]"),i=s.getOption(e),o=s.getAdjacentOption(i,1).attr("data-value"),s.refreshOptions(s.isFocused&&"single"!==a),o&&s.setActiveOption(s.getOption(o)),!r.length||null!==s.settings.maxItems&&s.items.length>=s.settings.maxItems?s.close():s.positionDropdown(),s.isFocused&&window.setTimeout(function(){"single"===a?(s.blur(),s.focus(!1),s.hideInput()):s.focus(!1)},0),s.updatePlaceholder(),s.trigger("item_add",e,n),s.updateOriginalInput()))})},removeItem:function(t){var e,n,i,r=this;e="object"==typeof t?t:r.getItem(t),t=C(e.attr("data-value")),n=r.items.indexOf(t),-1!==n&&(e.remove(),e.hasClass("active")&&(i=r.$activeItems.indexOf(e[0]),r.$activeItems.splice(i,1)),r.items.splice(n,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(t)&&r.removeOption(t),r.caretPos>n&&r.setCaret(r.caretPos-1),r.refreshClasses(),r.updatePlaceholder(),r.updateOriginalInput(),r.positionDropdown(),r.trigger("item_remove",t))},createItem:function(){var e=this,n=t.trim(e.$control_input.val()||""),i=e.caretPos;if(n.length){e.lock();var r="function"==typeof e.settings.create?this.settings.create:function(t){var n={};return n[e.settings.labelField]=t,n[e.settings.valueField]=t,n},o=T(function(t){if(e.unlock(),e.focus(!1),t&&"object"==typeof t){var n=C(t[e.settings.valueField]);n&&(e.setTextboxValue(""),e.addOption(t),e.setCaret(i),e.addItem(n),e.refreshOptions("single"!==e.settings.mode),e.focus(!1))}}),s=r.apply(this,[n,o]);s!==void 0&&o(s)}},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var t=0;this.items.length>t;t++)this.addItem(this.items);this.refreshClasses(),this.updateOriginalInput()},refreshClasses:function(){var e=this,n=e.isFull(),i=e.isLocked;this.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!t.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),this.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var t,e,n,i=this;if("select"===i.$input[0].tagName.toLowerCase()){for(n=[],t=0,e=i.items.length;e>t;t++)n.push('<option value="'+_(i.items[t])+'" selected="selected"></option>');n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),i.$input.html(n.join(""))}else i.$input.val(i.getValue());i.isSetup&&i.trigger("change",i.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update")}},open:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.focus(!0),t.isOpen=!0,t.refreshClasses(),t.$dropdown.css({visibility:"hidden",display:"block"}),t.positionDropdown(),t.$dropdown.css({visibility:"visible"}),t.trigger("dropdown_open",this.$dropdown))},close:function(){var t=this;t.isOpen&&(t.$dropdown.hide(),t.setActiveOption(null),t.isOpen=!1,t.refreshClasses(),t.trigger("dropdown_close",t.$dropdown))},positionDropdown:function(){var t=this.$control,e="body"===this.settings.dropdownParent?t.offset():t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},clear:function(){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.setCaret(0),t.updatePlaceholder(),t.updateOriginalInput(),t.refreshClasses(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(e):t(this.$control[0].childNodes[n]).before(e),this.setCaret(n+1)},deleteSelection:function(e){var n,i,r,o,s,a,l,u,c,h=this;if(r=e&&e.keyCode===f?-1:1,o=O(h.$control_input[0]),h.$activeOption&&!h.settings.hideSelected&&(l=h.getAdjacentOption(h.$activeOption,-1).attr("data-value")),s=[],h.$activeItems.length){for(c=h.$control.children(".active:"+(r>0?"last":"first")),a=h.$control.children(":not(input)").index(c),r>0&&a++,n=0,i=h.$activeItems.length;i>n;n++)s.push(t(h.$activeItems[n]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(h.isFocused||"single"===h.settings.mode)&&h.items.length&&(0>r&&0===o.start&&0===o.length?s.push(h.items[h.caretPos-1]):r>0&&o.start===h.$control_input.val().length&&s.push(h.items[h.caretPos]));if(!s.length||"function"==typeof h.settings.onDelete&&h.settings.onDelete.apply(h,[s])===!1)return!1;for(a!==void 0&&h.setCaret(a);s.length;)h.removeItem(s.pop());return h.showInput(),h.refreshOptions(!0),l&&(u=h.getOption(l),u.length&&h.setActiveOption(u)),!0},advanceSelection:function(t,e){var n,i,r,o,s,a,l=this;0!==t&&(n=t>0?"last":"first",i=O(l.$control_input[0]),l.isInputFocused&&!l.isInputHidden?(o=l.$control_input.val().length,s=0>t?0===i.start&&0===i.length:i.start===o,s&&!o&&l.advanceCaret(t,e)):(a=l.$control.children(".active:"+n),a.length&&(r=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(t>0?r+1:r),l.showInput())))},advanceCaret:function(t,e){if(0!==t){var n=this,i=t>0?"next":"prev";if(n.isShiftDown){var r=n.$control_input[i]();r.length&&(n.hideInput(),n.setActiveItem(r),e&&e.preventDefault())}else n.setCaret(n.caretPos+t)}},setCaret:function(e){var n=this;e="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,e));var i,r,o,s;for(o=n.$control.children(":not(input)"),i=0,r=o.length;r>i;i++)s=t(o[i]).detach(),e>i?n.$control_input.before(s):n.$control.append(s);n.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshClasses()},unlock:function(){this.isLocked=!1,this.refreshClasses()},disable:function(){var t=this;t.$input.prop("disabled",!0),t.isDisabled=!0,t.lock()},enable:function(){var t=this;t.$input.prop("disabled",!1),t.isDisabled=!1,t.unlock()},destroy:function(){var e=this,n=e.eventNS;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.show(),t(window).off(n),t(document).off(n),t(document.body).off(n),delete e.$input[0].selectize},render:function(t,e){var n,i,r="",o=!1,s=this,a=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===t||"item"===t)&&(n=C(e[s.settings.valueField]),o=!!n),o&&(x(s.renderCache[t])||(s.renderCache[t]={}),s.renderCache[t].hasOwnProperty(n))?s.renderCache[t][n]:(r=s.settings.render[t].apply(this,[e,_]),("option"===t||"option_create"===t)&&(r=r.replace(a,"<$1 data-selectable")),"optgroup"===t&&(i=e[s.settings.optgroupValueField]||"",r=r.replace(a,'<$1 data-group="'+_(i)+'"')),("option"===t||"item"===t)&&(r=r.replace(a,'<$1 data-value="'+_(n||"")+'"')),o&&(s.renderCache[t][n]=r),r)}}),I.count=0,I.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,preload:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",sortField:"$order",sortDirection:"asc",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,searchField:["text"],mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,render:{}},t.fn.selectize=function(e){e=e||{};var n=t.fn.selectize.defaults,i=e.dataAttr||n.dataAttr,r=function(i,r){var o,s,a,l=t.trim(i.val()||"");if(l.length){for(a=l.split(e.delimiter||n.delimiter),o=0,s=a.length;s>o;o++)r.options[a[o]]={text:a[o],value:a[o]};r.items=a}},o=function(e,n){var r,o,s,a,l=0;n.maxItems=e.attr("multiple")?null:1;var u=function(t){var e=i&&t.attr(i);return"string"==typeof e&&e.length?JSON.parse(e):null},c=function(e,i){var r,o;e=t(e),r=e.attr("value")||"",r.length&&(o=u(e)||{text:e.text(),value:r,optgroup:i},o.$order=++l,n.options[r]=o,e.is(":selected")&&n.items.push(r))},h=function(e){var i,r,o=t("option",e);e=t(e);var s=e.attr("label");for(s&&s.length&&(n.optgroups[s]=u(e)||{label:s}),i=0,r=o.length;r>i;i++)c(o[i],s)};for(a=e.children(),r=0,o=a.length;o>r;r++)s=a[r].tagName.toLowerCase(),"optgroup"===s?h(a[r]):"option"===s&&c(a[r])};return this.each(function(){var i,s=t(this),a=s[0].tagName.toLowerCase(),l={placeholder:s.children('option[value=""]').text()||s.attr("placeholder"),options:{},optgroups:{},items:[]};"select"===a?o(s,l):r(s,l),i=new I(s,t.extend(!0,{},n,l,e)),s.data("selectize",i),s.addClass("selectized")})},t.fn.selectize.defaults=I.defaults,I.define("drag_drop",function(){if(!t.fn.sortable)throw Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var e=this;this.setup=function(){var n=e.setup;return function(){n.apply(this,arguments);var i=this.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,start:function(t,e){e.placeholder.css("width",e.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var n=this.$activeItems?this.$activeItems.slice():null,r=[];i.children("[data-value]").each(function(){r.push(t(this).attr("data-value"))}),e.setValue(r),e.setActiveItem(n)}})}}()}}),I.define("dropdown_header",function(e){var n=this;e=t.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(t){return'<div class="'+t.headerClass+'">'+'<div class="'+t.titleRowClass+'">'+'<span class="'+t.labelClass+'">'+t.title+"</span>"+'<a href="javascript:void(0)" class="'+t.closeClass+'">&times;</a>'+"</div>"+"</div>"
}},e),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=t(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)}}()}),I.define("optgroup_columns",function(e){var n=this;e=t.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,n){var i=e.closest("[data-group]").find("[data-selectable]"),r=i.index(e)+n;return r>=0&&i.length>r?i.eq(r):t()},this.onKeyDown=function(){var t=n.onKeyDown;return function(e){var i,r,o,s;return!this.isOpen||e.keyCode!==u&&e.keyCode!==h?t.apply(this,arguments):(n.ignoreHover=!0,s=this.$activeOption.closest("[data-group]"),i=s.find("[data-selectable]").index(this.$activeOption),s=e.keyCode===u?s.prev("[data-group]"):s.next("[data-group]"),o=s.find("[data-selectable]"),r=o.eq(Math.min(o.length-1,i)),r.length&&this.setActiveOption(r),void 0)}}();var i=function(){var i,r,o,s,a,l,u;if(u=t("[data-group]",n.$dropdown_content),r=u.length,r&&n.$dropdown_content.width()){if(e.equalizeHeight){for(o=0,i=0;r>i;i++)o=Math.max(o,u.eq(i).height());u.css({height:o})}e.equalizeWidth&&(l=n.$dropdown_content.innerWidth(),s=Math.round(l/r),u.css({width:s}),r>1&&(a=l-s*(r-1),u.eq(r-1).css({width:a})))}};(e.equalizeHeight||e.equalizeWidth)&&(k.after(this,"positionDropdown",i),k.after(this,"refreshOptions",i))}),I.define("remove_button",function(e){if("single"!==this.settings.mode){e=t.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var n=this,i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+_(e.title)+'">'+e.label+"</a>",r=function(t,e){var n=t.search(/(<\/[^>]+>\s*)$/);return t.substring(0,n)+e+t.substring(n)};this.setup=function(){var o=n.setup;return function(){if(e.append){var s=n.settings.render.item;n.settings.render.item=function(){return r(s.apply(this,arguments),i)}}o.apply(this,arguments),this.$control.on("click","."+e.className,function(e){e.preventDefault();var i=t(e.target).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)})}}()}}),I.define("restore_on_backspace",function(t){var e=this;t.text=t.text||function(t){return t[this.settings.labelField]},this.onKeyDown=function(){var n=e.onKeyDown;return function(e){var i,r;return e.keyCode===f&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,i>=0&&this.items.length>i)?(r=this.options[this.items[i]],this.deleteSelection(e)&&(this.setTextboxValue(t.text.apply(this,[r])),this.refreshOptions(!0)),e.preventDefault(),void 0):n.apply(this,arguments)}}()}),I}),function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=y.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=v[t[g]];return e||(e={},m++,t[g]=m,v[m]=e),e}function o(t,n,i){if(n||(n=e),c)return n.createElement(t);i||(i=r(n));var o;return o=i.cache[t]?i.cache[t].cloneNode():p.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!o.canHaveChildren||f.test(t)||o.tagUrn?o:i.frag.appendChild(o)}function s(t,n){if(t||(t=e),c)return t.createDocumentFragment();n=n||r(t);for(var o=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)o.createElement(a[s]);return o}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return y.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-:]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(y,e.frag)}function l(t){t||(t=e);var i=r(t);return!y.shivCSS||u||i.hasCSS||(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||a(t,i),t}var u,c,h="3.7.1",d=t.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};(function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t,c=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return t.cloneNode===void 0||t.createDocumentFragment===void 0||t.createElement===void 0}()}catch(n){u=!0,c=!0}})();var y={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:h,shivCSS:d.shivCSS!==!1,supportsUnknownElements:c,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:s};t.html5=y,l(e)}(this,document),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,d=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,C=o.bind,_=function(t){return t instanceof _?t:this instanceof _?(this._wrapped=t,void 0):new _(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):t._=_,_.VERSION="1.6.0";var k=_.each=_.forEach=function(t,e,i){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s=_.keys(t),r=0,o=s.length;o>r;r++)if(e.call(i,t[s[r]],s[r],t)===n)return;return t};_.map=_.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(k(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var S="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=_.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(k(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(S);return n},_.reduceRight=_.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=_.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=_.keys(t);o=s.length}if(k(t,function(a,l,u){l=s?s[--o]:--o,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(S);return n},_.find=_.detect=function(t,e,n){var i;return T(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},_.filter=_.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(k(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},_.reject=function(t,e,n){return _.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},_.every=_.all=function(t,e,i){e||(e=_.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(k(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var T=_.some=_.any=function(t,e,i){e||(e=_.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(k(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};_.contains=_.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},_.invoke=function(t,e){var n=a.call(arguments,2),i=_.isFunction(e);return _.map(t,function(t){return(i?e:t[e]).apply(t,n)})},_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matches(e))},_.findWhere=function(t,e){return _.find(t,_.matches(e))},_.max=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return k(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;a>r&&(i=t,r=a)}),i},_.min=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);var i=1/0,r=1/0;return k(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;r>a&&(i=t,r=a)}),i},_.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=_.random(n++),i[n-1]=i[e],i[e]=t}),i},_.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=_.values(t)),t[_.random(t.length-1)]):_.shuffle(t).slice(0,Math.max(0,e))};var M=function(t){return null==t?_.identity:_.isFunction(t)?t:_.property(t)};_.sortBy=function(t,e,n){return e=M(e),_.pluck(_.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var L=function(t){return function(e,n,i){var r={};return n=M(n),k(e,function(o,s){var a=n.call(i,o,s,e);t(r,a,o)}),r}};_.groupBy=L(function(t,e,n){_.has(t,e)?t[e].push(n):t[e]=[n]}),_.indexBy=L(function(t,e,n){t[e]=n}),_.countBy=L(function(t,e){_.has(t,e)?t[e]++:t[e]=1}),_.sortedIndex=function(t,e,n,i){n=M(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;r>n.call(i,t[a])?o=a+1:s=a}return o},_.toArray=function(t){return t?_.isArray(t)?a.call(t):t.length===+t.length?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},_.first=_.head=_.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},_.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},_.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},_.rest=_.tail=_.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var E=function(t,e,n){return e&&_.every(t,_.isArray)?l.apply(n,t):(k(t,function(t){_.isArray(t)||_.isArguments(t)?e?s.apply(n,t):E(t,e,n):n.push(t)}),n)};_.flatten=function(t,e){return E(t,e,[])},_.without=function(t){return _.difference(t,a.call(arguments,1))},_.partition=function(t,e){var n=[],i=[];return k(t,function(t){(e(t)?n:i).push(t)}),[n,i]},_.uniq=_.unique=function(t,e,n,i){_.isFunction(e)&&(i=n,n=e,e=!1);var r=n?_.map(t,n,i):t,o=[],s=[];return k(r,function(n,i){(e?i&&s[s.length-1]===n:_.contains(s,n))||(s.push(n),o.push(t[i]))}),o},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(t){var e=a.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.contains(e,t)})})},_.difference=function(t){var e=l.apply(i,a.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){for(var t=_.max(_.pluck(arguments,"length").concat(0)),e=Array(t),n=0;t>n;n++)e[n]=_.pluck(arguments,""+n);return e},_.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},_.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},_.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=Array(i);i>r;)o[r++]=t,t+=n;return o};var O=function(){};_.bind=function(t,e){var n,i;if(C&&t.bind===C)return C.apply(t,a.call(arguments,1));if(!_.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));O.prototype=t.prototype;var r=new O;O.prototype=null;var o=t.apply(r,n.concat(a.call(arguments)));return Object(o)===o?o:r}},_.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;o>r;r++)i[r]===_&&(i[r]=arguments[n++]);for(;arguments.length>n;)i.push(arguments[n++]);return t.apply(this,i)}},_.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return k(e,function(e){t[e]=_.bind(t[e],t)}),t},_.memoize=function(t,e){var n={};return e||(e=_.identity),function(){var i=e.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},_.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(a.call(arguments,1)))},_.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:_.now(),s=null,o=t.apply(i,r),i=r=null};return function(){var u=_.now();a||n.leading!==!1||(a=u);var c=e-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=t.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(l,c)),o}},_.debounce=function(t,e,n){var i,r,o,s,a,l=function(){var u=_.now()-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=_.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(o,r),o=r=null),a}},_.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},_.wrap=function(t,e){return _.partial(e,t)},_.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},_.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},_.keys=function(t){if(!_.isObject(t))return[];if(x)return x(t);var e=[];for(var n in t)_.has(t,n)&&e.push(n);return e},_.values=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},_.pairs=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},_.invert=function(t){for(var e={},n=_.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},_.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},_.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var r in t)_.contains(n,r)||(e[r]=t[r]);return e},_.defaults=function(t){return k(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==r){if(l=t.length,c=l==e.length)for(;l--&&(c=A(t[l],e[l],n,i)););}else{for(var h in t)if(_.has(t,h)&&(l++,!(c=_.has(e,h)&&A(t[h],e[h],n,i))))break;if(c){for(h in e)if(_.has(e,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};_.isEqual=function(t,e){return A(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=w||function(t){return"[object Array]"==u.call(t)},_.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return!(!t||!_.has(t,"callee"))}),_.isFunction=function(t){return"function"==typeof t},_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!=+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return c.call(t,e)},_.noConflict=function(){return t._=e,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.property=function(t){return function(e){return e[t]}},_.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},_.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=_.invert(D.escape);var F={escape:RegExp("["+_.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+_.keys(D.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(t){_[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return D[t][e]})}}),_.result=function(t,e){if(null==t)return void 0;var n=t[e];return _.isFunction(n)?n.call(t):n},_.mixin=function(t){k(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),H.call(this,n.apply(_,t))}})};var I=0;_.uniqueId=function(t){var e=++I+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(t,e,n){var i;n=_.defaults({},n,_.templateSettings);var r=RegExp([(n.escape||$).source,(n.interpolate||$).source,(n.evaluate||$).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(N,function(t){return"\\"+z[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,_);var l=function(t){return i.call(this,t,_)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},_.chain=function(t){return _(t).chain()};var H=function(t){return this._chain?_(t).chain():t};_.mixin(_),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],H.call(this,n)}}),k(["concat","join","slice"],function(t){var e=i[t];_.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,Backbone,e,n){var i=t.Backbone,r=[];r.push;var o=r.slice;r.splice,Backbone.VERSION="1.1.2",Backbone.$=n,Backbone.noConflict=function(){return t.Backbone=i,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var s=Backbone.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,n,i){if(!l(this,"once",t,[n,i])||!n)return this;var r=this,o=e.once(function(){r.off(t,o),n.apply(this,arguments)});return o._callback=n,this.on(t,o,i)},off:function(t,n,i){var r,o,s,a,u,c,h,d;if(!this._events||!l(this,"off",t,[n,i]))return this;if(!t&&!n&&!i)return this._events=void 0,this;for(a=t?[t]:e.keys(this._events),u=0,c=a.length;c>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=r=[],n||i)for(h=0,d=s.length;d>h;h++)o=s[h],(n&&n!==o.callback&&n!==o.callback._callback||i&&i!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&u(n,e),i&&u(i,arguments),this},stopListening:function(t,n,i){var r=this._listeningTo;if(!r)return this;var o=!n&&!i;i||"object"!=typeof n||(i=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(n,i,this),(o||e.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,l=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(a.test(n)){for(var o=n.split(a),s=0,l=o.length;l>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},u=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;r>++i;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;r>++i;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;r>++i;)(n=t[i]).callback.apply(n.ctx,e);return}},c={listenTo:"on",listenToOnce:"once"};e.each(c,function(t,n){s[n]=function(n,i,r){var o=this._listeningTo||(this._listeningTo={}),s=n._listenId||(n._listenId=e.uniqueId("l"));return o[s]=n,r||"object"!=typeof i||(r=this),n[t](i,r,this),this}}),s.bind=s.on,s.unbind=s.off,e.extend(Backbone,s);var h=Backbone.Model=function(t,n){var i=t||{};n||(n={}),this.cid=e.uniqueId("c"),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(i=this.parse(i,n)||{}),i=e.defaults({},i,e.result(this,"defaults")),this.set(i,n),this.changed={},this.initialize.apply(this,arguments)};e.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return e.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,n,i){var r,o,s,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(o=t,i=n):(o={})[t]=n,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=e.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)n=o[r],e.isEqual(h[r],n)||a.push(r),e.isEqual(c[r],n)?delete this.changed[r]:this.changed[r]=n,s?delete h[r]:h[r]=n;if(!l){a.length&&(this._pending=i);for(var d=0,f=a.length;f>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(t){var n={};for(var i in this.attributes)n[i]=void 0;return this.set(n,e.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):e.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?e.clone(this.changed):!1;var n,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in t)e.isEqual(r[o],n=t[o])||((i||(i={}))[o]=n);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,i=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(i&&i(n,e,t),n.trigger("sync",n,e,t),void 0):!1},z(this,t),this.sync("read",this,t)},save:function(t,n,i){var r,o,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,i=n):(r={})[t]=n,i=e.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=e.extend({},a,r)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(t){l.attributes=a;var n=l.parse(t,i);return i.wait&&(n=e.extend(r||{},n)),e.isObject(n)&&!l.set(n,i)?!1:(u&&u(l,t,i),l.trigger("sync",l,t,i),void 0)},z(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=r),s=this.sync(o,this,i),r&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?e.clone(t):{};var n=this,i=t.success,r=function(){n.trigger("destroy",n,n.collection,t)};if(t.success=function(e){(t.wait||n.isNew())&&r(),i&&i(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew())return t.success(),!1;z(this,t);var o=this.sync("delete",this,t);return t.wait||r(),o},url:function(){var t=e.result(this,"urlRoot")||e.result(this.collection,"url")||$();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e.extend(t||{},{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e.extend({},this.attributes,t);var i=this.validationError=this.validate(t,n)||null;return i?(this.trigger("invalid",this,i,e.extend(n,{validationError:i})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];e.each(d,function(t){h.prototype[t]=function(){var n=o.call(arguments);return n.unshift(this.attributes),e[t].apply(e,n)}});var f=Backbone.Collection=function(t,n){n||(n={}),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,e.extend({silent:!0},n))},p={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};e.extend(f.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,n){return this.set(t,e.extend({merge:!1},n,g))},remove:function(t,n){var i=!e.isArray(t);t=i?[t]:e.clone(t),n||(n={});var r,o,s,a;for(r=0,o=t.length;o>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,n.silent||(n.index=s,a.trigger("remove",a,this,n)),this._removeReference(a,n));return i?t[0]:t},set:function(t,n){n=e.defaults({},n,p),n.parse&&(t=this.parse(t,n));var i=!e.isArray(t);t=i?t?[t]:[]:e.clone(t);var r,o,s,a,l,u,c,d=n.at,f=this.model,g=this.comparator&&null==d&&n.sort!==!1,m=e.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=n.add,x=n.merge,C=n.remove,_=!g&&w&&C?[]:!1;for(r=0,o=t.length;o>r;r++){if(l=t[r]||{},s=l instanceof h?a=l:l[f.prototype.idAttribute||"id"],u=this.get(s))C&&(b[u.cid]=!0),x&&(l=l===a?a.attributes:l,n.parse&&(l=u.parse(l,n)),u.set(l,n),g&&!c&&u.hasChanged(m)&&(c=!0)),t[r]=u;else if(w){if(a=t[r]=this._prepareModel(l,n),!a)continue;v.push(a),this._addReference(a,n)}a=u||a,!_||!a.isNew()&&b[a.id]||_.push(a),b[a.id]=!0}if(C){for(r=0,o=this.length;o>r;++r)b[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,n)}if(v.length||_&&_.length)if(g&&(c=!0),this.length+=v.length,null!=d)for(r=0,o=v.length;o>r;r++)this.models.splice(d+r,0,v[r]);else{_&&(this.models.length=0);var k=_||v;for(r=0,o=k.length;o>r;r++)this.models.push(k[r])}if(c&&this.sort({silent:!0}),!n.silent){for(r=0,o=v.length;o>r;r++)(a=v[r]).trigger("add",a,this,n);(c||_&&_.length)&&this.trigger("sort",this,n)}return i?t[0]:t},reset:function(t,n){n||(n={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],n);return n.previousModels=this.models,this._reset(),t=this.add(t,e.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),t},push:function(t,n){return this.add(t,e.extend({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,n){return this.add(t,e.extend({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,n){return e.isEmpty(t)?n?void 0:[]:this[n?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return e.invoke(this.models,"get",t)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=t.success,i=this;return t.success=function(e){var r=t.reset?"reset":"set";i[r](e,t),n&&n(i,e,t),i.trigger("sync",i,e,t)},z(this,t),this.sync("read",this,t)},create:function(t,n){if(n=n?e.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var i=this,r=n.success;return n.success=function(t,e){n.wait&&i.add(t,n),r&&r(t,e,n)},t.save(null,n),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,n){if(t instanceof h)return t;n=n?e.clone(n):{},n.collection=this;var i=new this.model(t,n);return i.validationError?(this.trigger("invalid",this,i.validationError,n),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];e.each(m,function(t){f.prototype[t]=function(){var n=o.call(arguments);return n.unshift(this.models),e[t].apply(e,n)}});var v=["groupBy","countBy","sortBy","indexBy"];e.each(v,function(t){f.prototype[t]=function(n,i){var r=e.isFunction(n)?n:function(t){return t.get(n)};return e[t](this.models,r,i)}});var y=Backbone.View=function(t){this.cid=e.uniqueId("view"),t||(t={}),e.extend(this,e.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];e.extend(y.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof Backbone.$?t:Backbone.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=e.result(this,"events")))return this;this.undelegateEvents();for(var n in t){var i=t[n];if(e.isFunction(i)||(i=this[t[n]]),i){var r=n.match(b),o=r[1],s=r[2];i=e.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)
}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var t=e.extend({},e.result(this,"attributes"));this.id&&(t.id=e.result(this,"id")),this.className&&(t["class"]=e.result(this,"className"));var n=Backbone.$("<"+e.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),Backbone.sync=function(t,n,i){var r=C[t];e.defaults(i||(i={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=e.result(n,"url")||$()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=Backbone.ajax(e.extend(o,i));return n.trigger("request",n,a,i),a};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var _=Backbone.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,T=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(_.prototype,s,{initialize:function(){},route:function(t,n,i){e.isRegExp(t)||(t=this._routeToRegExp(t)),e.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return Backbone.history.route(t,function(e){var o=r._extractParameters(t,e);r.execute(i,o),r.trigger.apply(r,["route:"+n].concat(o)),r.trigger("route",n,o),Backbone.history.trigger("route",r,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return Backbone.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var t,n=e.keys(this.routes);null!=(t=n.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(k,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,n){var i=t.exec(n).slice(1);return e.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var L=Backbone.History=function(){this.handlers=[],e.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,A=/msie [\w.]+/,D=/\/$/,F=/#.*$/;L.started=!1,e.extend(L.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(E,"")},start:function(t){if(L.started)throw Error("Backbone.history has already been started");L.started=!0,this.options=e.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=A.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(O,"/"),r&&this._wantsHashChange){var o=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),e.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(F,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),Backbone.history=new L;var I=function(t,n){var i,r=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},e.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i};h.extend=f.extend=_.extend=y.extend=L.extend=I;var $=function(){throw Error('A "url" property or function must be specified')},z=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return Backbone}),Backbone.ChildViewContainer=function(Backbone,t){var e=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(e.prototype,{add:function(t,e){var n=t.cid;return this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(t){return this._views[t]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(t,e){return t===n?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(n){e.prototype[n]=function(){var e=t.values(this._views),i=[e].concat(t.toArray(arguments));return t[n].apply(t,i)}}),e}(Backbone,_),Backbone.Wreqr=function(Backbone,t,e){"use strict";var n={};return n.Handlers=function(Backbone,t){var e=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return e.extend=Backbone.Model.extend,t.extend(e.prototype,Backbone.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(t,e,n){var i={callback:e,context:n};this._wreqrHandlers[t]=i,this.trigger("handler:add",t,e,n)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),e}(Backbone,e),n.CommandStorage=function(){var t=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(t.prototype,Backbone.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var n=this.getCommands(t);n.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),t}(),n.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,n)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,n,i){var r=this.storage.getCommands(t);e.each(r.instances,function(t){n.apply(i,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var n,i=t.storageType||this.storageType;n=e.isFunction(i)?new i:i,this.storage=n}})}(n),n.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.hasHandler(t)?this.getHandler(t).apply(this,e):void 0}})}(n),n.EventAggregator=function(Backbone,t){var e=function(){};return e.extend=Backbone.Model.extend,t.extend(e.prototype,Backbone.Events),e}(Backbone,e),n.Channel=function(){var t=function(t){this.vent=new Backbone.Wreqr.EventAggregator,this.reqres=new Backbone.Wreqr.RequestResponse,this.commands=new Backbone.Wreqr.Commands,this.channelName=t};return e.extend(t.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,n,i){if(n){i=i||this;var r="vent"===t?"on":"setHandler";e.each(n,function(n,o){this[t][r](o,e.bind(n,i))},this)}}}),t}(n),n.radio=function(t){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(n.prototype,{channel:function(t){if(!t)throw Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var n=this._channels[e];return n||(n=new t.Channel(e),this._channels[e]=n),n},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(i[t],function(e){this[t][e]=r(this,t,e)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(t,e,n){return function(i){var r=t._getChannel(i)[e],o=Array.prototype.slice.call(arguments,1);r[n].apply(r,o)}};return new n}(n),n}(Backbone,Backbone.Marionette,_);var Marionette=function(t,Backbone,e){"use strict";function n(t,e){var n=Error(t);throw n.name=e||"Error",n}var i={};Backbone.Marionette=i,i.$=Backbone.$;var r=Array.prototype.slice;return i.extend=Backbone.Model.extend,i.getOption=function(t,e){if(t&&e){var n;return n=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},i.normalizeMethods=function(t){var n,i={};return e.each(t,function(t,r){n=t,e.isFunction(n)||(n=this[n]),n&&(i[r]=n)},this),i},i.normalizeUIKeys=function(t,n){return void 0!==t?(e.each(e.keys(t),function(e){var i=/@ui.[a-zA-Z_$0-9]*/g;e.match(i)&&(t[e.replace(i,function(t){return n[t.slice(4)]})]=t[e],delete t[e])}),t):void 0},i.actAsCollection=function(t,n){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];e.each(i,function(i){t[i]=function(){var t=e.values(e.result(this,n)),r=[t].concat(e.toArray(arguments));return e[i].apply(e,r)}})},i.triggerMethod=function(){function t(t,e,n){return n.toUpperCase()}var n=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(n,t),o=this[r];return e.isFunction(this.trigger)&&this.trigger.apply(this,arguments),e.isFunction(o)?o.apply(this,e.tail(arguments)):void 0};return i}(),i.MonitorDOMRefresh=function(t){function n(t){t._isShown=!0,r(t)}function i(t){t._isRendered=!0,r(t)}function r(t){t._isShown&&t._isRendered&&o(t)&&e.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function o(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){n(t)}),t.listenTo(t,"render",function(){i(t)})}}(document.documentElement),function(t){function i(t,i,r,o){var s=o.split(/\s+/);e.each(s,function(e){var o=t[e];o||n("Method '"+e+"' was configured as an event handler, but does not exist."),t.listenTo(i,r,o)})}function r(t,e,n,i){t.listenTo(e,n,i)}function o(t,n,i,r){var o=r.split(/\s+/);e.each(o,function(e){var r=t[e];t.stopListening(n,i,r)})}function s(t,e,n,i){t.stopListening(e,n,i)}function a(t,n,i,r,o){n&&i&&(e.isFunction(i)&&(i=i.call(t)),e.each(i,function(i,s){e.isFunction(i)?r(t,n,s,i):o(t,n,s,i)}))}t.bindEntityEvents=function(t,e,n){a(t,e,n,r,i)},t.unbindEntityEvents=function(t,e,n){a(t,e,n,s,o)}}(i),i.Callbacks=function(){this._deferred=i.$.Deferred(),this._callbacks=[]},e.extend(i.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(n,i){e&&(n=e),t.call(n,i)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=i.$.Deferred(),this._callbacks=[],e.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),i.Controller=function(t){this.triggerMethod=i.triggerMethod,this.options=t||{},e.isFunction(this.initialize)&&this.initialize(this.options)},i.Controller.extend=i.extend,e.extend(i.Controller.prototype,Backbone.Events,{close:function(){this.stopListening();var t=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(t)),this.off()}}),i.Region=function(t){if(this.options=t||{},this.el=i.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var e=Array.prototype.slice.apply(arguments);this.initialize.apply(this,e)}},e.extend(i.Region,{buildRegion:function(t,i){var r=e.isString(t),o=e.isString(t.selector),s=e.isUndefined(t.regionType),a=e.isFunction(t);a||r||o||n("Region must be specified as a Region type, a selector string or an object with selector property");var l,u;r&&(l=t),t.selector&&(l=t.selector,delete t.selector),a&&(u=t),!a&&s&&(u=i),t.regionType&&(u=t.regionType,delete t.regionType),(r||a)&&(t={}),t.el=l;var c=new u(t);return t.parentEl&&(c.getEl=function(n){var i=t.parentEl;return e.isFunction(i)&&(i=i()),i.find(n)}),c}}),e.extend(i.Region.prototype,Backbone.Events,{show:function(t,n){this.ensureEl();var r=n||{},o=t.isClosed||e.isUndefined(t.$el),s=t!==this.currentView,a=!!r.preventClose,l=!a&&s;l&&this.close(),t.render(),i.triggerMethod.call(this,"before:show",t),i.triggerMethod.call(t,"before:show"),(s||o)&&this.open(t),this.currentView=t,i.triggerMethod.call(this,"show",t),i.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return i.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),i.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),i.Region.extend=i.extend,i.RegionManager=function(t){var n=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,n){var i={};return e.each(t,function(t,r){e.isString(t)&&(t={selector:t}),t.selector&&(t=e.defaults({},t,n));var o=this.addRegion(r,t);i[r]=o},this),i},addRegion:function(n,i){var r,o=e.isObject(i),s=e.isString(i),a=!!i.selector;return r=s||o&&a?t.Region.buildRegion(i,t.Region):e.isFunction(i)?t.Region.buildRegion(i,t.Region):i,this._store(n,r),this.triggerMethod("region:add",n,r),r},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){e.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){e.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions(),t.Controller.prototype.close.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),e.stopListening(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=e.size(this._regions)}});return t.actAsCollection(n.prototype,"_regions"),n}(i),i.TemplateCache=function(t){this.templateId=t},e.extend(i.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new i.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=r.call(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),e.extend(i.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=i.$(t).html();return e&&0!==e.length||n("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return e.template(t)}}),i.Renderer={render:function(t,e){t||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var r;return r="function"==typeof t?t:i.TemplateCache.get(t),r(e)}},i.View=Backbone.View.extend({constructor:function(t){e.bindAll(this,"render"),this.options=e.extend({},e.result(this,"options"),e.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(e.result(this,"events")),e.isObject(this.behaviors)&&new i.Behaviors(this),Backbone.View.prototype.constructor.apply(this,arguments),i.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:i.triggerMethod,normalizeMethods:i.normalizeMethods,getTemplate:function(){return i.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var n=i.getOption(this,"templateHelpers");return e.isFunction(n)&&(n=n.call(this)),e.extend(t,n)},normalizeUIKeys:function(t){var n=e.result(this,"ui");return i.normalizeUIKeys(t,n)},configureTriggers:function(){if(this.triggers){var t={},n=this.normalizeUIKeys(e.result(this,"triggers"));return e.each(n,function(n,i){var r=e.isObject(n),o=r?n.event:n;t[i]=function(t){if(t){var e=t.preventDefault,i=t.stopPropagation,s=r?n.preventDefault:e,a=r?n.stopPropagation:i;s&&e&&e.apply(t),a&&i&&i.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),i.bindEntityEvents(this,this.model,i.getOption(this,"modelEvents")),i.bindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,e.isFunction(t)&&(t=t.call(this));var n={},i=e.result(this,"behaviorEvents")||{},r=this.configureTriggers();e.extend(n,i,t,r),Backbone.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,t),i.unbindEntityEvents(this,this.model,i.getOption(this,"modelEvents")),i.unbindEntityEvents(this,this.collection,i.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=Array.prototype.slice.call(arguments),e=this.triggerMethod.apply(this,["before:close"].concat(t));e!==!1&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(t)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=e.result(this,"_uiBindings");this.ui={},e.each(e.keys(t),function(e){var n=t[e];this.ui[e]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(e.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),i.ItemView=i.View.extend({constructor:function(){i.View.prototype.constructor.apply(this,arguments)},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),n=i.Renderer.render(e,t);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),i.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),i.CollectionView=i.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),i.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(e.each(this._bufferedChildren,function(t){i.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),n=this.collection.indexOf(t);this.addItemView(t,e,n)},onShowCalled:function(){this.children.each(function(t){i.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,n){t=this.getItemView(e),this.addItemView(e,t,n)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var e=new Backbone.Model;this.addItemView(e,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return i.getOption(this,"emptyView")},getItemView:function(){var t=i.getOption(this,"itemView");return t||n("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,n,r){var o=i.getOption(this,"itemViewOptions");e.isFunction(o)&&(o=o.call(this,t,r));var s=this.buildItemView(t,n,o);return this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,r),this._isShown&&!this.isBuffering&&i.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s),s},addChildViewEventForwarding:function(t){var n=i.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var o=r.call(arguments),s=o[0],a=this.normalizeMethods(this.getItemEvents());o[0]=n+":"+s,o.splice(1,0,t),a!==void 0&&e.isFunction(a[s])&&a[s].apply(this,o),i.triggerMethod.apply(this,o)},this)},getItemEvents:function(){return e.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,n,i){var r=e.extend({model:t},i);return new n(r)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(t.close?t.close():t.remove&&t.remove(),this.stopListening(t),this.children.remove(t)),this.triggerMethod("item:removed",t)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new Backbone.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),i.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),i.CompositeView=i.CollectionView.extend({constructor:function(){i.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(){var t=i.getOption(this,"itemView")||this.constructor;return t||n("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),i.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return i.Renderer.render(e,t)},appendBuffer:function(t,e){var n=this.getItemViewContainer(t);n.append(e)},appendHtml:function(t,e){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var n=this.getItemViewContainer(t);n.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var r,o=i.getOption(t,"itemViewContainer");if(o){var s=e.isFunction(o)?o.call(t):o;r="@"===s.charAt(0)&&t.ui?t.ui[s.substr(4)]:t.$(s),0>=r.length&&n("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else r=t.$el;return t.$itemViewContainer=r,r},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),i.Layout=i.ItemView.extend({regionType:i.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),i.ItemView.prototype.constructor.call(this,t)},render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),i.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),i.ItemView.prototype.close.apply(this,arguments))},addRegion:function(t,e){var n={};return n[t]=e,this._buildRegions(n)[t]},addRegions:function(t){return this.regions=e.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},_buildRegions:function(t){var e=this,n={regionType:i.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,n)},_initializeRegions:function(t){var n;this._initRegionManager(),n=e.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(n)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new i.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),i.Behavior=function(t,Backbone){function e(e,n){this.view=n,this.defaults=t.result(this,"defaults")||{},this.options=t.extend({},this.defaults,e),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return t.extend(e.prototype,Backbone.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:i.triggerMethod}),e.extend=i.extend,e}(e,Backbone),i.Behaviors=function(t,e){function n(t){this.behaviors=n.parseBehaviors(t,e.result(t,"behaviors")),n.wrap(t,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","onShow","onClose","behaviorEvents","triggerMethod","setElement","close"])}var i={setElement:function(t,n){t.apply(this,e.tail(arguments,2)),e.each(n,function(t){t.$el=this.$el},this)},close:function(t,n){var i=e.tail(arguments,2);t.apply(this,i),e.invoke(n,"close",i)},onShow:function(n,i){var r=e.tail(arguments,2);e.each(i,function(e){t.triggerMethod.apply(e,["show"].concat(r))}),e.isFunction(n)&&n.apply(this,r)},onClose:function(n,i){var r=e.tail(arguments,2);e.each(i,function(e){t.triggerMethod.apply(e,["close"].concat(r))}),e.isFunction(n)&&n.apply(this,r)},bindUIElements:function(t,n){t.apply(this),e.invoke(n,t)},unbindUIElements:function(t,n){t.apply(this),e.invoke(n,t)},triggerMethod:function(t,n){var i=e.tail(arguments,2);t.apply(this,i),e.each(n,function(e){t.apply(e,i)})},delegateEvents:function(n,i){var r=e.tail(arguments,2);n.apply(this,r),e.each(i,function(e){t.bindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.bindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},undelegateEvents:function(n,i){var r=e.tail(arguments,2);n.apply(this,r),e.each(i,function(e){t.unbindEntityEvents(e,this.model,t.getOption(e,"modelEvents")),t.unbindEntityEvents(e,this.collection,t.getOption(e,"collectionEvents"))},this)},behaviorEvents:function(n,i){var r={},o=e.result(this,"ui");return e.each(i,function(n,i){var s={},a=e.result(n,"events")||{},l=e.result(n,"ui"),u=e.extend({},o,l);a=t.normalizeUIKeys(a,u),e.each(e.keys(a),function(t){var r=Array(i+2).join(" "),o=t+r,l=e.isFunction(a[t])?a[t]:n[a[t]];
s[o]=e.bind(l,n)}),r=e.extend(r,s)}),r}};return e.extend(n,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(t,i){return t.behaviorClass?t.behaviorClass:e.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(t,i){return e.map(i,function(e,i){var r=n.getBehaviorClass(e,i);return new r(e,t)})},wrap:function(t,n,r){e.each(r,function(r){t[r]=e.partial(i[r],t[r],n)})}}),n}(i,e),i.AppRouter=Backbone.Router.extend({constructor:function(t){Backbone.Router.prototype.constructor.apply(this,arguments),this.options=t||{};var e=i.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,e),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var n=this._getController();this._addAppRoute(n,t,e)},_processOnRoute:function(t,n){var i=e.invert(this.appRoutes)[t];e.isFunction(this.onRoute)&&this.onRoute(t,i,n)},processAppRoutes:function(t,n){if(n){var i=e.keys(n).reverse();e.each(i,function(e){this._addAppRoute(t,e,n[e])},this)}},_getController:function(){return i.getOption(this,"controller")},_addAppRoute:function(t,i,r){var o=t[r];o||n("Method '"+r+"' was not found on the controller"),this.route(i,r,e.bind(o,t))}}),i.Application=function(t){this._initRegionManager(),this._initCallbacks=new i.Callbacks,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.submodules={},e.extend(this,t),this.triggerMethod=i.triggerMethod},e.extend(i.Application.prototype,Backbone.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var n=i.Module.getClass(e),o=r.call(arguments);return o.unshift(this),n.create.apply(n,o)},_initRegionManager:function(){this._regionManager=new i.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),i.Application.extend=i.extend,i.Module=function(t,n,r){this.moduleName=t,this.options=e.extend({},this.options,r),this.initialize=r.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=n,this.startWithParent=!0,this.triggerMethod=i.triggerMethod,e.isFunction(this.initialize)&&this.initialize(this.options,t,n)},i.Module.extend=i.extend,e.extend(i.Module.prototype,Backbone.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(e.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,i.triggerMethod.call(this,"before:stop"),e.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),i.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var r=e.flatten([this,this.app,Backbone,i,i.$,e,n]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new i.Callbacks,this._finalizerCallbacks=new i.Callbacks}}),e.extend(i.Module,{create:function(t,n,i){var o=t,s=r.call(arguments);s.splice(0,3),n=n.split(".");var a=n.length,l=[];return l[a-1]=i,e.each(n,function(e,n){var r=o;o=this._getModule(r,e,t,i),this._addModuleDefinition(r,o,l[n],s)},this),o},_getModule:function(t,n,i,r){var o=e.extend({},r),s=this.getClass(r),a=t[n];return a||(a=new s(n,i,o),t[n]=a,t.submodules[n]=a),a},getClass:function(t){var e=i.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,n,i){var r=this._getDefine(n),o=this._getStartWithParent(n,e);r&&e.addDefinition(r,i),this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,n){var r;return e.isFunction(t)&&t.prototype instanceof i.Module?(r=n.constructor.prototype.startWithParent,e.isUndefined(r)?!0:r):e.isObject(t)?(r=t.startWithParent,e.isUndefined(r)?!0:r):!0},_getDefine:function(t){return!e.isFunction(t)||t.prototype instanceof i.Module?e.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,n){e.startWithParent=e.startWithParent&&n,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),i}(this,Backbone,_);if(function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){function n(){le.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var i=!0;return l(function(){return i&&(n(),i=!1),e.apply(this,arguments)},e)}function i(t,e){return function(n){return h(t.call(this,n),e)}}function r(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function o(){}function s(t){k(t),l(this,t)}function a(t){var e=v(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._bubble()}function l(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function u(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&Ce.hasOwnProperty(e)&&(n[e]=t[e]);return n}function c(t){return 0>t?Math.ceil(t):Math.floor(t)}function h(t,e,n){for(var i=""+Math.abs(t),r=t>=0;e>i.length;)i="0"+i;return(r?n?"+":"":"-")+i}function d(t,e,n,i){var r=e._milliseconds,o=e._days,s=e._months;i=null==i?!0:i,r&&t._d.setTime(+t._d+r*n),o&&ie(t,"Date",ne(t,"Date")+o*n),s&&ee(t,ne(t,"Month")+s*n),i&&le.updateOffset(t,o||s)}function f(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function g(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&b(t[i])!==b(e[i]))&&s++;return s+o}function m(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Xe[t]||Je[e]||e}return t}function v(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=m(n),e&&(i[e]=t[n]));return i}function y(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}le[e]=function(r,o){var s,a,l=le.fn._lang[e],u=[];if("number"==typeof r&&(o=r,r=t),a=function(t){var e=le().utc().set(i,t);return l.call(le.fn._lang,e,r||"")},null!=o)return a(o);for(s=0;n>s;s++)u.push(a(s));return u}}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function w(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function x(t,e,n){return J(le([t,11,31+e-n]),e,n).week}function C(t){return _(t)?366:365}function _(t){return 0===t%4&&0!==t%100||0===t%400}function k(t){var e;t._a&&-2===t._pf.overflow&&(e=0>t._a[ge]||t._a[ge]>11?ge:1>t._a[me]||t._a[me]>w(t._a[pe],t._a[ge])?me:0>t._a[ve]||t._a[ve]>23?ve:0>t._a[ye]||t._a[ye]>59?ye:0>t._a[be]||t._a[be]>59?be:0>t._a[we]||t._a[we]>999?we:-1,t._pf._overflowDayOfYear&&(pe>e||e>me)&&(e=me),t._pf.overflow=e)}function S(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&0>t._pf.overflow&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function T(t){return t?t.toLowerCase().replace("_","-"):t}function M(t,e){return e._isUTC?le(t).zone(e._offset||0):le(t).local()}function L(t,e){return e.abbr=t,xe[t]||(xe[t]=new o),xe[t].set(e),xe[t]}function E(t){delete xe[t]}function O(t){var e,n,i,r,o=0,s=function(t){if(!xe[t]&&_e)try{require("./lang/"+t)}catch(e){}return xe[t]};if(!t)return le.fn._lang;if(!f(t)){if(n=s(t))return n;t=[t]}for(;t.length>o;){for(r=T(t[o]).split("-"),e=r.length,i=T(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=s(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&g(r,i,!0)>=e-1)break;e--}o++}return le.fn._lang}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function D(t){var e,n,i=t.match(Me);for(e=0,n=i.length;n>e;e++)i[e]=nn[i[e]]?nn[i[e]]:A(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}function F(t,e){return t.isValid()?(e=I(e,t.lang()),Ze[e]||(Ze[e]=D(e)),Ze[e](t)):t.lang().invalidDate()}function I(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Le.lastIndex=0;i>=0&&Le.test(t);)t=t.replace(Le,n),Le.lastIndex=0,i-=1;return t}function $(t,e){var n,i=e._strict;switch(t){case"Q":return je;case"DDDD":return Pe;case"YYYY":case"GGGG":case"gggg":return i?Re:Ae;case"Y":case"G":case"g":return Be;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?qe:De;case"S":if(i)return je;case"SS":if(i)return We;case"SSS":if(i)return Pe;case"DDD":return Oe;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ie;case"a":case"A":return O(e._l)._meridiemParse;case"X":return Ne;case"Z":case"ZZ":return $e;case"T":return ze;case"SSSS":return Fe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?We:Ee;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ee;case"Do":return He;default:return n=RegExp(q(R(t.replace("\\","")),"i"))}}function z(t){t=t||"";var e=t.match($e)||[],n=e[e.length-1]||[],i=(n+"").match(Qe)||["-",0,0],r=+(60*i[1])+b(i[2]);return"+"===i[0]?-r:r}function N(t,e,n){var i,r=n._a;switch(t){case"Q":null!=e&&(r[ge]=3*(b(e)-1));break;case"M":case"MM":null!=e&&(r[ge]=b(e)-1);break;case"MMM":case"MMMM":i=O(n._l).monthsParse(e),null!=i?r[ge]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[me]=b(e));break;case"Do":null!=e&&(r[me]=b(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=b(e));break;case"YY":r[pe]=le.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[pe]=b(e);break;case"a":case"A":n._isPm=O(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[ve]=b(e);break;case"m":case"mm":r[ye]=b(e);break;case"s":case"ss":r[be]=b(e);break;case"S":case"SS":case"SSS":case"SSSS":r[we]=b(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=z(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function H(t){var e,n,i,r,o,s,a,l,u,c,h=[];if(!t._d){for(i=W(t),t._w&&null==t._a[me]&&null==t._a[ge]&&(o=function(e){var n=parseInt(e,10);return e?3>e.length?n>68?1900+n:2e3+n:n:null==t._a[pe]?le().weekYear():t._a[pe]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=Z(o(s.GG),s.W||1,s.E,4,1):(l=O(t._l),u=null!=s.d?Q(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,c=parseInt(s.w,10)||1,null!=s.d&&l._week.dow>u&&c++,a=Z(o(s.gg),c,u,l._week.doy,l._week.dow)),t._a[pe]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(r=null==t._a[pe]?i[pe]:t._a[pe],t._dayOfYear>C(r)&&(t._pf._overflowDayOfYear=!0),n=G(r,0,t._dayOfYear),t._a[ge]=n.getUTCMonth(),t._a[me]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=h[e]=i[e];for(;7>e;e++)t._a[e]=h[e]=null==t._a[e]?2===e?1:0:t._a[e];h[ve]+=b((t._tzm||0)/60),h[ye]+=b((t._tzm||0)%60),t._d=(t._useUTC?G:V).apply(null,h)}}function j(t){var e;t._d||(e=v(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],H(t))}function W(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function P(t){t._a=[],t._pf.empty=!0;var e,n,i,r,o,s=O(t._l),a=""+t._i,l=a.length,u=0;for(i=I(t._f,s).match(Me)||[],e=0;i.length>e;e++)r=i[e],n=(a.match($(r,t))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),u+=n.length),nn[r]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(r),N(r,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=l-u,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&12>t._a[ve]&&(t._a[ve]+=12),t._isPm===!1&&12===t._a[ve]&&(t._a[ve]=0),H(t),k(t)}function R(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(n){var i,r,o,s,a;if(0===n._f.length)return n._pf.invalidFormat=!0,n._d=new Date(0/0),t;for(s=0;n._f.length>s;s++)a=0,i=l({},n),i._pf=e(),i._f=n._f[s],P(i),S(i)&&(a+=i._pf.charsLeftOver,a+=10*i._pf.unusedTokens.length,i._pf.score=a,(null==o||o>a)&&(o=a,r=i));l(n,r||i)}function Y(t){var e,n,i=t._i,r=Ye.exec(i);if(r){for(t._pf.iso=!0,e=0,n=Ve.length;n>e;e++)if(Ve[e][1].exec(i)){t._f=Ve[e][0]+(r[6]||" ");break}for(e=0,n=Ge.length;n>e;e++)if(Ge[e][1].exec(i)){t._f+=Ge[e][0];break}i.match($e)&&(t._f+="Z"),P(t)}else le.createFromInputFallback(t)}function U(e){var n=e._i,i=ke.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?Y(e):f(n)?(e._a=n.slice(0),H(e)):p(n)?e._d=new Date(+n):"object"==typeof n?j(e):"number"==typeof n?e._d=new Date(n):le.createFromInputFallback(e)}function V(t,e,n,i,r,o,s){var a=new Date(t,e,n,i,r,o,s);return 1970>t&&a.setFullYear(t),a}function G(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function Q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function K(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function X(t,e,n){var i=fe(Math.abs(t)/1e3),r=fe(i/60),o=fe(r/60),s=fe(o/24),a=fe(s/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",fe(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=n,K.apply({},l)}function J(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=le(t).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(t,e,n,i,r){var o,s,a=G(t,0,1).getUTCDay();return n=null!=n?n:r,o=r-a+(a>i?7:0)-(r>a?7:0),s=7*(e-1)+(n-r)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:C(t-1)+s}}function te(e){var n=e._i,i=e._f;return null===n||i===t&&""===n?le.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=O().preparse(n)),le.isMoment(n)?(e=u(n),e._d=new Date(+n._d)):i?f(i)?B(e):P(e):U(e),new s(e))}function ee(t,e){var n;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),w(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function ne(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ie(t,e,n){return"Month"===e?ee(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function re(t,e){return function(n){return null!=n?(ie(this,t,n),le.updateOffset(this,e),this):ne(this,t)}}function oe(t){le.duration.fn[t]=function(){return this._data[t]}}function se(t,e){le.duration.fn["as"+t]=function(){return+this/e}}function ae(t){"undefined"==typeof ender&&(ue=de.moment,de.moment=t?n("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",le):le)}for(var le,ue,ce,he="2.6.0",de="undefined"!=typeof global?global:this,fe=Math.round,pe=0,ge=1,me=2,ve=3,ye=4,be=5,we=6,xe={},Ce={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},_e="undefined"!=typeof module&&module.exports,ke=/^\/?Date\((\-?\d+)/i,Se=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Te=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Me=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Le=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ee=/\d\d?/,Oe=/\d{1,3}/,Ae=/\d{1,4}/,De=/[+\-]?\d{1,6}/,Fe=/\d+/,Ie=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$e=/Z|[\+\-]\d\d:?\d\d/gi,ze=/T/i,Ne=/[\+\-]?\d+(\.\d{1,3})?/,He=/\d{1,2}/,je=/\d/,We=/\d\d/,Pe=/\d{3}/,Re=/\d{4}/,qe=/[+-]?\d{6}/,Be=/[+-]?\d+/,Ye=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ue="YYYY-MM-DDTHH:mm:ssZ",Ve=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ge=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qe=/([\+\-]|\d\d)/gi,Ke=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Xe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Je={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ze={},tn="DDD w W M D d".split(" "),en="M D H h m s w W".split(" "),nn={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},YYYYY:function(){return h(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+h(Math.abs(t),6)},gg:function(){return h(this.weekYear()%100,2)},gggg:function(){return h(this.weekYear(),4)},ggggg:function(){return h(this.weekYear(),5)},GG:function(){return h(this.isoWeekYear()%100,2)},GGGG:function(){return h(this.isoWeekYear(),4)},GGGGG:function(){return h(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return b(this.milliseconds()/100)},SS:function(){return h(b(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},SSSS:function(){return h(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+h(b(t/60),2)+":"+h(b(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+h(b(t/60),2)+h(b(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},rn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];tn.length;)ce=tn.pop(),nn[ce+"o"]=r(nn[ce],ce);for(;en.length;)ce=en.pop(),nn[ce+ce]=i(nn[ce],2);for(nn.DDDD=i(nn.DDD,3),l(o.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=le.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=le([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return J(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),le=function(n,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._i=n,s._f=i,s._l=r,s._strict=o,s._isUTC=!1,s._pf=e(),te(s)},le.suppressDeprecationWarnings=!1,le.createFromInputFallback=n("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),le.utc=function(n,i,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=n,s._f=i,s._strict=o,s._pf=e(),te(s).utc()},le.unix=function(t){return le(1e3*t)},le.duration=function(t,e){var n,i,r,o=t,s=null;return le.isDuration(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(s=Se.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:b(s[me])*n,h:b(s[ve])*n,m:b(s[ye])*n,s:b(s[be])*n,ms:b(s[we])*n}):(s=Te.exec(t))&&(n="-"===s[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},o={y:r(s[2]),M:r(s[3]),d:r(s[4]),h:r(s[5]),m:r(s[6]),s:r(s[7]),w:r(s[8])}),i=new a(o),le.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},le.version=he,le.defaultFormat=Ue,le.momentProperties=Ce,le.updateOffset=function(){},le.lang=function(t,e){var n;return t?(e?L(T(t),e):null===e?(E(t),t="en"):xe[t]||O(t),n=le.duration.fn._lang=le.fn._lang=O(t),n._abbr):le.fn._lang._abbr},le.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),O(t)},le.isMoment=function(t){return t instanceof s||null!=t&&t.hasOwnProperty("_isAMomentObject")},le.isDuration=function(t){return t instanceof a},ce=rn.length-1;ce>=0;--ce)y(rn[ce]);le.normalizeUnits=function(t){return m(t)},le.invalid=function(t){var e=le.utc(0/0);return null!=t?l(e._pf,t):e._pf.userInvalidated=!0,e},le.parseZone=function(){return le.apply(null,arguments).parseZone()},le.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)},l(le.fn=s.prototype,{clone:function(){return le(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=le(this).utc();return t.year()>0&&9999>=t.year()?F(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return S(this)},isDSTShifted:function(){return this._a?this.isValid()&&g(this._a,(this._isUTC?le.utc(this._a):le(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=F(this,t||le.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,n,-1),this},diff:function(t,e,n){var i,r,o=M(t,this),s=6e4*(this.zone()-o.zone());return e=m(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-le(this).startOf("month")-(o-le(o).startOf("month")))/i,r-=6e4*(this.zone()-le(this).startOf("month").zone()-(o.zone()-le(o).startOf("month").zone()))/i,"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?r:c(r)},from:function(t,e){return le.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(le(),t)},calendar:function(){var t=M(le(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return _(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Q(t,this.lang()),this.add({d:t-e})):e},month:re("Month",!0),startOf:function(t){switch(t=m(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=m(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(e,n){return n=n!==t?n:"millisecond",+this.clone().startOf(n)>+le(e).startOf(n)},isBefore:function(e,n){return n=n!==t?n:"millisecond",+this.clone().startOf(n)<+le(e).startOf(n)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+M(t,this).startOf(e)},min:function(t){return t=le.apply(null,arguments),this>t?this:t},max:function(t){return t=le.apply(null,arguments),t>this?this:t},zone:function(t,e){var n=this._offset||0;return null==t?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof t&&(t=z(t)),16>Math.abs(t)&&(t=60*t),this._offset=t,this._isUTC=!0,n!==t&&(!e||this._changeInProgress?d(this,le.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?le(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(t){var e=fe((le(this).startOf("day")-le(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=J(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=J(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return x(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return x(this.year(),t.dow,t.doy)},get:function(t){return t=m(t),this[t]()},set:function(t,e){return t=m(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=O(e),this)}}),le.fn.millisecond=le.fn.milliseconds=re("Milliseconds",!1),le.fn.second=le.fn.seconds=re("Seconds",!1),le.fn.minute=le.fn.minutes=re("Minutes",!1),le.fn.hour=le.fn.hours=re("Hours",!0),le.fn.date=re("Date",!0),le.fn.dates=n("dates accessor is deprecated. Use date instead.",re("Date",!0)),le.fn.year=re("FullYear",!0),le.fn.years=n("years accessor is deprecated. Use year instead.",re("FullYear",!0)),le.fn.days=le.fn.day,le.fn.months=le.fn.month,le.fn.weeks=le.fn.week,le.fn.isoWeeks=le.fn.isoWeek,le.fn.quarters=le.fn.quarter,le.fn.toJSON=le.fn.toISOString,l(le.duration.fn=a.prototype,{_bubble:function(){var t,e,n,i,r=this._milliseconds,o=this._days,s=this._months,a=this._data;a.milliseconds=r%1e3,t=c(r/1e3),a.seconds=t%60,e=c(t/60),a.minutes=e%60,n=c(e/60),a.hours=n%24,o+=c(n/24),a.days=o%30,s+=c(o/30),a.months=s%12,i=c(s/12),a.years=i},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*b(this._months/12)},humanize:function(t){var e=+this,n=X(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=le.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=le.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=m(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=m(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:le.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(0>this.asSeconds()?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"
}});for(ce in Ke)Ke.hasOwnProperty(ce)&&(se(ce,Ke[ce]),oe(ce.toLowerCase()));se("Weeks",6048e5),le.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},le.lang("en",{ordinal:function(t){var e=t%10,n=1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),_e?module.exports=le:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(de.moment=ue),le}),ae(!0)):ae()}.call(this),function(t){function e(t){this.init(t)}function n(t,e){e=e||t.getCursor("start");var n=t.getTokenAt(e);if(!n.type)return{};for(var i,r,o=n.type.split(" "),s={},a=0;o.length>a;a++)i=o[a],"strong"===i?s.bold=!0:"variable-2"===i?(r=t.getLine(e.line),/^\s*\d+\.\s/.test(r)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===i?s.quote=!0:"em"===i&&(s.italic=!0);return s}function i(t){return t=u?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")}function r(t){return t=t.replace("-"," "),t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function o(t){var e=document,n=e.fullScreen||e.mozFullScreen||e.webkitFullScreen,i=function(){t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)},r=function(){e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()};n?r&&r():i()}var s=function(){"use strict";function t(n,i){if(!(this instanceof t))return new t(n,i);this.options=i=i||{};for(var r in Ur)!i.hasOwnProperty(r)&&Ur.hasOwnProperty(r)&&(i[r]=Ur[r]);d(i);var o="string"==typeof i.value?0:i.value.first,s=this.display=e(n,o);s.wrapper.CodeMirror=this,u(this),i.autofocus&&!Lr&&ue(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Wi},a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=i.value;"string"==typeof l&&(l=new ro(i.value,i.mode)),ee(this,li)(this,l),gr&&setTimeout(Qi(le,this,!0),20),he(this);var c;try{c=document.activeElement==s.input}catch(h){}c||i.autofocus&&!Lr?setTimeout(Qi(Me,this),20):Le(this),ee(this,function(){for(var t in Yr)Yr.propertyIsEnumerable(t)&&Yr[t](this,i[t],Vr);for(var e=0;Xr.length>e;++e)Xr[e](this)})()}function e(t,e){var n={},i=n.input=Ji("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");yr?i.style.width="1000px":i.setAttribute("wrap","off"),Mr&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),n.inputDiv=Ji("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Ji("div",[Ji("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Ji("div",[Ji("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Ji("div",null,"CodeMirror-scrollbar-filler"),n.lineDiv=Ji("div"),n.selectionDiv=Ji("div",null,null,"position: relative; z-index: 1"),n.cursor=Ji("div"," ","CodeMirror-cursor"),n.otherCursor=Ji("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=Ji("div",null,"CodeMirror-measure"),n.lineSpace=Ji("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=Ji("div",[Ji("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ji("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Ji("div",null,null,"position: absolute; height: "+uo+"px; width: 1px;"),n.gutters=Ji("div",null,"CodeMirror-gutters"),n.lineGutter=null;var r=Ji("div",[n.sizer,n.heightForcer,n.gutters],null,"position: relative; min-height: 100%");return n.scroller=Ji("div",[r],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ji("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.scroller],"CodeMirror"),mr&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),Mr&&(i.style.width="0px"),yr||(n.scroller.draggable=!0),_r?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):mr&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Wi,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}function n(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,A(e,100),e.state.modeGen++,e.curOp&&re(e)}function i(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),h(t)),o(t),re(t),q(t),setTimeout(function(){f(t.display,t.doc.height)},100)}function r(t){var e=X(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/J(t.display)-3);return function(r){return Nn(t.doc,r)?0:n?(Math.ceil(r.text.length/i)||1)*e:e}}function o(t){var e=t.doc,n=r(t);e.iter(function(t){var e=n(t);e!=t.height&&di(t,e)})}function s(t){var e=Zr[t.options.keyMap].style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),q(t)}function l(t){u(t),re(t)}function u(t){var e=t.display.gutters,n=t.options.gutters;Zi(e);for(var i=0;n.length>i;++i){var r=n[i],o=e.appendChild(Ji("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none"}function c(t,e){if(0==e.height)return 0;for(var n,i=e.text.length,r=e;n=In(r);){var o=n.find();r=ui(t,o.from.line),i+=o.from.ch-o.to.ch}for(r=e;n=$n(r);){var o=n.find();i-=r.text.length-o.from.ch,r=ui(t,o.to.line),i+=r.text.length-o.to.ch}return i}function h(t){var e=t.display,n=t.doc;e.maxLine=ui(n,n.first),e.maxLineLength=c(n,e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var i=c(n,t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)})}function d(t){for(var e=!1,n=0;t.gutters.length>n;++n)"CodeMirror-linenumbers"==t.gutters[n]&&(t.lineNumbers?e=!0:t.gutters.splice(n--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function f(t,e){var n=e+z(t);t.sizer.style.minHeight=t.heightForcer.style.top=n+"px";var i=Math.max(n,t.scroller.scrollHeight),r=t.scroller.scrollWidth>t.scroller.clientWidth,o=i>t.scroller.clientHeight;o?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=r?ir(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=i-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="",r?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=o?ir(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="",r&&o?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=ir(t.measure)+"px"):t.scrollbarFiller.style.display="",kr&&0===ir(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Sr?"18px":"12px")}function p(t,e,n){var i=t.scroller.scrollTop,r=t.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-$(t));var o=Math.ceil(i+r);return{from:pi(e,i),to:pi(e,o)}}function g(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=y(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,r=n+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,a=o.alignable;a.length>s;++s)a[s].style.left=r;t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function m(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=v(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(Ji("div",[Ji("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function v(t,e){return t.lineNumberFormatter(e+t.firstLineNumber)+""}function y(t){return nr(t.scroller).left-nr(t.sizer).left}function b(t,e,n){for(var i,r=t.display.showingFrom,o=t.display.showingTo,s=p(t.display,t.doc,n);w(t,e,s)&&(i=!0,Ni(t,"update",t),(t.display.showingFrom!=r||t.display.showingTo!=o)&&Ni(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo),M(t),f(t.display,t.doc.height),n&&(n=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof n?n:n.top)),s=p(t.display,t.doc,n),!(s.from>=t.display.showingFrom&&s.to<=t.display.showingTo));)e=[];return i}function w(t,e,n){var i=t.display,r=t.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=r.first,i.viewOffset=0,void 0;if(!(0==e.length&&n.from>i.showingFrom&&n.to<i.showingTo)){m(t)&&(e=[{from:r.first,to:r.first+r.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=t.options.fixedGutter?o:"0";var s=1/0;if(t.options.lineNumbers)for(var a=0;e.length>a;++a)if(e[a].diff){s=e[a].from;break}var l=r.first+r.size,u=Math.max(n.from-t.options.viewportMargin,r.first),c=Math.min(l,n.to+t.options.viewportMargin);if(u>i.showingFrom&&20>u-i.showingFrom&&(u=Math.max(r.first,i.showingFrom)),i.showingTo>c&&20>i.showingTo-c&&(c=Math.min(l,i.showingTo)),Hr)for(u=fi(zn(r,ui(r,u)));l>c&&Nn(r,ui(r,c));)++c;var h=[{from:Math.max(i.showingFrom,r.first),to:Math.min(i.showingTo,l)}];if(h=h[0].from>=h[0].to?[]:C(h,e),Hr)for(var a=0;h.length>a;++a)for(var d,f=h[a];d=$n(ui(r,f.to-1));){var p=d.find().from.line;if(!(p>f.from)){h.splice(a--,1);break}f.to=p}for(var g=0,a=0;h.length>a;++a){var f=h[a];u>f.from&&(f.from=u),f.to>c&&(f.to=c),f.from>=f.to?h.splice(a--,1):g+=f.to-f.from}if(g==c-u&&u==i.showingFrom&&c==i.showingTo)return x(t),void 0;h.sort(function(t,e){return t.from-e.from});try{var v=document.activeElement}catch(y){}.7*(c-u)>g&&(i.lineDiv.style.display="none"),k(t,u,c,h,s),i.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();var b=u!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;b&&(i.lastSizeC=i.wrapper.clientHeight),i.showingFrom=u,i.showingTo=c,A(t,100);for(var w,_=i.lineDiv.offsetTop,S=i.lineDiv.firstChild;S;S=S.nextSibling)if(S.lineObj){if(mr){var T=S.offsetTop+S.offsetHeight;w=T-_,_=T}else{var M=nr(S);w=M.bottom-M.top}var L=S.lineObj.height-w;if(2>w&&(w=X(i)),L>.001||-.001>L){di(S.lineObj,w);var E=S.lineObj.widgets;if(E)for(var a=0;E.length>a;++a)E[a].height=E[a].node.offsetHeight}}return x(t),!0}}function x(t){var e=t.display.viewOffset=gi(t,ui(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function C(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var r=e[n],o=[],s=r.diff||0,a=0,l=t.length;l>a;++a){var u=t[a];r.to<=u.from&&r.diff?o.push({from:u.from+s,to:u.to+s}):r.to<=u.from||r.from>=u.to?o.push(u):(r.from>u.from&&o.push({from:u.from,to:r.from}),r.to<u.to&&o.push({from:r.to+s,to:u.to+s}))}t=o}return t}function _(t){for(var e=t.display,n={},i={},r=e.gutters.firstChild,o=0;r;r=r.nextSibling,++o)n[t.options.gutters[o]]=r.offsetLeft,i[t.options.gutters[o]]=r.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function k(t,e,n,i,r){function o(e){var n=e.nextSibling;return yr&&Er&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),n}var s=_(t),a=t.display,l=t.options.lineNumbers;i.length||yr&&t.display.currentWheelTarget||Zi(a.lineDiv);var u=a.lineDiv,c=u.firstChild,h=i.shift(),d=e;for(t.doc.iter(e,n,function(e){if(h&&h.to==d&&(h=i.shift()),Nn(t.doc,e)){if(0!=e.height&&di(e,0),e.widgets&&c.previousSibling)for(var n=0;e.widgets.length>n;++n)if(e.widgets[n].showIfHidden){var a=c.previousSibling;if(/pre/i.test(a.nodeName)){var f=Ji("div",null,null,"position: relative");a.parentNode.replaceChild(f,a),f.appendChild(a),a=f}var p=a.appendChild(Ji("div",[e.widgets[n].node],"CodeMirror-linewidget"));T(e.widgets[n],p,a,s)}}else if(h&&d>=h.from&&h.to>d){for(;c.lineObj!=e;)c=o(c);l&&d>=r&&c.lineNumber&&er(c.lineNumber,v(t.options,d)),c=c.nextSibling}else{if(e.widgets)for(var g,m=0,y=c;y&&20>m;++m,y=y.nextSibling)if(y.lineObj==e&&/div/i.test(y.nodeName)){g=y;break}var b=S(t,e,d,s,g);if(b!=g)u.insertBefore(b,c);else{for(;c!=g;)c=o(c);c=c.nextSibling}b.lineObj=e}++d});c;)c=o(c)}function S(t,e,n,i,r){var o,s=Jn(t,e),a=e.gutterMarkers,l=t.display;if(!(t.options.lineNumbers||a||e.bgClass||e.wrapClass||e.widgets))return s;if(r){r.alignable=null;for(var u,c=!0,h=0,d=r.firstChild;d;d=u)if(u=d.nextSibling,/\bCodeMirror-linewidget\b/.test(d.className)){for(var f=0,p=!0;e.widgets.length>f;++f){var g=e.widgets[f],m=!1;if(g.above||(m=p,p=!1),g.node==d.firstChild){T(g,d,r,i),++h,m&&r.insertBefore(s,d);break}}if(f==e.widgets.length){c=!1;break}}else r.removeChild(d);c&&h==e.widgets.length&&(o=r,r.className=e.wrapClass||"")}if(o||(o=Ji("div",null,e.wrapClass,"position: relative"),o.appendChild(s)),e.bgClass&&o.insertBefore(Ji("div",null,e.bgClass+" CodeMirror-linebackground"),o.firstChild),t.options.lineNumbers||a){var y=o.insertBefore(Ji("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(y),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(o.lineNumber=y.appendChild(Ji("div",v(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var b=0;t.options.gutters.length>b;++b){var w=t.options.gutters[b],x=a.hasOwnProperty(w)&&a[w];x&&y.appendChild(Ji("div",[x],"CodeMirror-gutter-elt","left: "+i.gutterLeft[w]+"px; width: "+i.gutterWidth[w]+"px"))}}if(mr&&(o.style.zIndex=2),e.widgets&&o!=r)for(var f=0,C=e.widgets;C.length>f;++f){var g=C[f],_=Ji("div",[g.node],"CodeMirror-linewidget");T(g,_,o,i),g.above?o.insertBefore(_,t.options.lineNumbers&&0!=e.height?y:s):o.appendChild(_),Ni(g,"redraw")}return o}function T(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function M(t){var e=t.display,n=Re(t.doc.sel.from,t.doc.sel.to);if(n||t.options.showCursorWhenSelecting?L(t):e.cursor.style.display=e.otherCursor.style.display="none",n?e.selectionDiv.style.display="none":E(t),t.options.moveInputWithCursor){var i=V(t,t.doc.sel.head,"div"),r=nr(e.wrapper),o=nr(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+o.top-r.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+o.left-r.left))+"px"}}function L(t){var e=t.display,n=V(t,t.doc.sel.head,"div");e.cursor.style.left=n.left+"px",e.cursor.style.top=n.top+"px",e.cursor.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",e.cursor.style.display="",n.other?(e.otherCursor.style.display="",e.otherCursor.style.left=n.other.left+"px",e.otherCursor.style.top=n.other.top+"px",e.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):e.otherCursor.style.display="none"}function E(t){function e(t,e,n,i){0>e&&(e=0),s.appendChild(Ji("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?a-t:n)+"px; height: "+(i-e)+"px"))}function n(n,i,o,s){function u(e){return U(t,Pe(n,e),"div",c)}var c=ui(r,n),h=c.text.length,d=s?1/0:-1/0;return or(mi(c),i||0,null==o?h:o,function(t,n,r){var c,f,p,g=u(t);if(t==n)c=g,f=p=g.left;else{if(c=u(n-1),"rtl"==r){var m=g;g=c,c=m}f=g.left,p=c.right}c.top-g.top>3&&(e(f,g.top,null,g.bottom),f=l,g.bottom<c.top&&e(f,g.bottom,null,c.top)),null==o&&n==h&&(p=a),null==i&&0==t&&(f=l),d=s?Math.min(c.top,d):Math.max(c.bottom,d),l+1>f&&(f=l),e(f,c.top,p-f,c.bottom)}),d}var i=t.display,r=t.doc,o=t.doc.sel,s=document.createDocumentFragment(),a=i.lineSpace.offsetWidth,l=N(t.display);if(o.from.line==o.to.line)n(o.from.line,o.from.ch,o.to.ch);else{for(var u,c,h=ui(r,o.from.line),d=h,f=[o.from.line,o.from.ch];u=$n(d);){var p=u.find();if(f.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){f.push(o.to.ch),c=!0;break}d=ui(r,p.to.line)}if(c)for(var g=0;f.length>g;g+=3)n(f[g],f[g+1],f[g+2]);else{var m,v,y=ui(r,o.to.line);m=o.from.ch?n(o.from.line,o.from.ch,null,!1):gi(t,h)-i.viewOffset,v=o.to.ch?n(o.to.line,In(y)?null:0,o.to.ch,!0):gi(t,y)-i.viewOffset,v>m&&e(l,m,null,v)}}tr(i.selectionDiv,s),i.selectionDiv.style.display=""}function O(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate)}}function A(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,Qi(D,t))}function D(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var n,i=+new Date+t.options.workTime,r=pn(e.mode,I(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),function(s){if(e.frontier>=t.display.showingFrom){var a=s.styles;s.styles=Gn(t,s,r);for(var l=!a||a.length!=s.styles.length,u=0;!l&&a.length>u;++u)l=a[u]!=s.styles[u];l&&(n&&n.end==e.frontier?n.end++:o.push(n={start:e.frontier,end:e.frontier+1})),s.stateAfter=pn(e.mode,r)}else Kn(t,s,r),s.stateAfter=0==e.frontier%5?pn(e.mode,r):null;return++e.frontier,+new Date>i?(A(t,t.options.workDelay),!0):void 0}),o.length&&ee(t,function(){for(var t=0;o.length>t;++t)re(this,o[t].start,o[t].end)})()}}function F(t,e){for(var n,i,r=t.doc,o=e,s=e-100;o>s;--o){if(r.first>=o)return r.first;var a=ui(r,o-1);if(a.stateAfter)return o;var l=Pi(a.text,null,t.options.tabSize);(null==i||n>l)&&(i=o-1,n=l)}return i}function I(t,e){var n=t.doc,i=t.display;if(!n.mode.startState)return!0;var r=F(t,e),o=r>n.first&&ui(n,r-1).stateAfter;return o=o?pn(n.mode,o):gn(n.mode),n.iter(r,e,function(s){Kn(t,s,o);var a=r==e-1||0==r%5||r>=i.showingFrom&&i.showingTo>r;s.stateAfter=a?pn(n.mode,o):null,++r}),o}function $(t){return t.lineSpace.offsetTop}function z(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function N(t){var e=tr(t.measure,Ji("pre",null,null,"text-align: left")).appendChild(Ji("span","x"));return e.offsetLeft}function H(t,e,n,i){var r=-1;i=i||W(t,e);for(var o=n;;o+=r){var s=i[o];if(s)break;0>r&&0==o&&(r=1)}return{left:n>o?s.right:s.left,right:o>n?s.left:s.right,top:s.top,bottom:s.bottom}}function j(t,e){for(var n=t.display.measureLineCache,i=0;n.length>i;++i){var r=n[i];if(r.text==e.text&&r.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==r.width&&r.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return r.measure}}function W(t,e){var n=j(t,e);if(!n){n=P(t,e);var i=t.display.measureLineCache,r={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:n,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass};16==i.length?i[++t.display.measureLineCachePos%16]=r:i.push(r)}return n}function P(t,e){var n=t.display,i=Gi(e.text.length),r=Jn(t,e,i);if(gr&&!mr&&!t.options.lineWrapping&&r.childNodes.length>100){for(var o=document.createDocumentFragment(),s=10,a=r.childNodes.length,l=0,u=Math.ceil(a/s);u>l;++l){for(var c=Ji("div",null,null,"display: inline-block"),h=0;s>h&&a;++h)c.appendChild(r.firstChild),--a;o.appendChild(c)}r.appendChild(o)}tr(n.measure,r);var d=nr(n.lineDiv),f=[],p=Gi(e.text.length),g=r.offsetHeight;vr&&n.measure.first!=r&&tr(n.measure,r);for(var m,l=0;i.length>l;++l)if(m=i[l]){for(var v=nr(m),y=Math.max(0,v.top-d.top),b=Math.min(v.bottom-d.top,g),h=0;f.length>h;h+=2){var w=f[h],x=f[h+1];if(!(w>b||y>x)&&(y>=w&&x>=b||w>=y&&b>=x||Math.min(b,x)-Math.max(y,w)>=b-y>>1)){f[h]=Math.min(y,w),f[h+1]=Math.max(b,x);break}}h==f.length&&f.push(y,b);var C=v.right;m.measureRight&&(C=nr(m.measureRight).left),p[l]={left:v.left-d.left,right:C-d.left,top:h}}for(var m,l=0;p.length>l;++l)if(m=p[l]){var _=m.top;m.top=f[_],m.bottom=f[_+1]}return p}function R(t,e){var n=!1;if(e.markedSpans)for(var i=0;e.markedSpans>i;++i){var r=e.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=e.text.length||(n=!0)}var o=!n&&j(t,e);if(o)return H(t,e,e.text.length,o).right;var s=Jn(t,e),a=s.appendChild(rr(t.display.measure));return tr(t.display.measure,s),nr(a).right-nr(t.display.lineDiv).left}function q(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function B(t,e,n,i){if(e.widgets)for(var r=0;e.widgets.length>r;++r)if(e.widgets[r].above){var o=Rn(e.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=gi(t,e);if("local"!=i&&(s-=t.display.viewOffset),"page"==i){var a=nr(t.display.lineSpace);s+=a.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var l=a.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function Y(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;"page"==n&&(i-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,r-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var o=nr(t.display.lineSpace);if(i-=o.left,r-=o.top,"local"==n||!n){var s=nr(t.display.wrapper);i+=s.left,r+=s.top}return{left:i,top:r}}function U(t,e,n,i){return i||(i=ui(t.doc,e.line)),B(t,i,H(t,i,e.ch),n)}function V(t,e,n,i,r){function o(e,o){var s=H(t,i,e,r);return o?s.left=s.right:s.right=s.left,B(t,i,s,n)}i=i||ui(t.doc,e.line),r||(r=W(t,i));var s=mi(i),a=e.ch;if(!s)return o(a);for(var l,u,c=s[0].level,h=0;s.length>h;++h){var d,f,p=s[h],g=p.level%2;if(a>p.from&&p.to>a)return o(a,g);var m=g?p.to:p.from,v=g?p.from:p.to;if(m==a)f=h&&p.level<(d=s[h-1]).level?o(d.level%2?d.from:d.to-1,!0):o(g&&p.from!=p.to?a-1:a),g==c?l=f:u=f;else if(v==a){var d=s.length-1>h&&s[h+1];if(!g&&d&&d.from==d.to)continue;f=d&&p.level<d.level?o(d.level%2?d.to-1:d.from):o(g?a:a-1,!0),g==c?l=f:u=f}}return c&&!a&&(u=o(s[0].to-1)),l?(u&&(l.other=u),l):u}function G(t,e,n){var i=new Pe(t,e);return n&&(i.outside=!0),i}function Q(t,e,n){var i=t.doc;if(n+=t.display.viewOffset,0>n)return G(i.first,0,!0);var r=pi(i,n),o=i.first+i.size-1;if(r>o)return G(i.first+i.size-1,ui(i,o).text.length,!0);for(0>e&&(e=0);;){var s=ui(i,r),a=K(t,s,r,e,n),l=$n(s),u=l&&l.find();if(!(l&&a.ch>=u.from.ch))return a;r=u.to.line}}function K(t,e,n,i,r){function o(i){var r=V(t,Pe(n,i),"line",e,u);return a=!0,s>r.bottom?r.left-l:r.top>s?r.left+l:(a=!1,r.left)}var s=r-gi(t,e),a=!1,l=2*t.display.wrapper.clientWidth,u=W(t,e),c=mi(e),h=e.text.length,d=lr(e),f=ur(e),p=o(d),g=a,m=o(f),v=a;if(i>m)return G(n,f,v);for(;;){if(c?f==d||f==dr(e,d,1):1>=f-d){for(var y=m-i>i-p,b=y?d:f;po.test(e.text.charAt(b));)++b;var w=G(n,b,y?g:v);return w.after=y,w}var x=Math.ceil(h/2),C=d+x;if(c){C=d;for(var _=0;x>_;++_)C=dr(e,C,1)}var k=o(C);k>i?(f=C,m=k,(v=a)&&(m+=1e3),h=x):(d=C,p=k,g=a,h-=x)}}function X(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Dr){Dr=Ji("pre");for(var e=0;49>e;++e)Dr.appendChild(document.createTextNode("x")),Dr.appendChild(Ji("br"));Dr.appendChild(document.createTextNode("x"))}tr(t.measure,Dr);var n=Dr.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),Zi(t.measure),n||1}function J(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Ji("span","x"),n=Ji("pre",[e]);tr(t.measure,n);var i=e.offsetWidth;return i>2&&(t.cachedCharWidth=i),i||10}function Z(t){t.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++jr},lo++||(ao=[])}function te(t){var e=t.curOp,n=t.doc,i=t.display;if(t.curOp=null,e.updateMaxLine&&h(t),i.maxLineChanged&&!t.options.lineWrapping&&i.maxLine){var r=R(t,i.maxLine);i.sizer.style.minWidth=Math.max(0,r+3+uo)+"px",i.maxLineChanged=!1;var o=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);n.scrollLeft>o&&!e.updateScrollPos&&be(t,Math.min(i.scroller.scrollLeft,o),!0)}var s,a;if(e.updateScrollPos)s=e.updateScrollPos;else if(e.selectionChanged&&i.scroller.clientHeight){var l=V(t,n.sel.head);s=rn(t,l.left,l.top,l.left,l.bottom)}(e.changes.length||s&&null!=s.scrollTop)&&(a=b(t,e.changes,s&&s.scrollTop),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!a&&e.selectionChanged&&M(t),e.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=n.scrollTop=s.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=n.scrollLeft=s.scrollLeft,g(t),e.scrollToPos&&en(t,Ue(t.doc,e.scrollToPos),e.scrollToPosMargin)):s&&tn(t),e.selectionChanged&&O(t),t.state.focused&&e.updateInput&&le(t,e.userSelChange);var u=e.maybeHiddenMarkers,c=e.maybeUnhiddenMarkers;if(u)for(var d=0;u.length>d;++d)u[d].lines.length||zi(u[d],"hide");if(c)for(var d=0;c.length>d;++d)c[d].lines.length&&zi(c[d],"unhide");var f;if(--lo||(f=ao,ao=null),e.textChanged&&zi(t,"change",t,e.textChanged),e.cursorActivity&&zi(t,"cursorActivity",t),f)for(var d=0;f.length>d;++d)f[d]()}function ee(t,e){return function(){var n=t||this,i=!n.curOp;i&&Z(n);try{var r=e.apply(n,arguments)}finally{i&&te(n)}return r}}function ne(t){return function(){var e,n=this.cm&&!this.cm.curOp;n&&Z(this.cm);try{e=t.apply(this,arguments)}finally{n&&te(this.cm)}return e}}function ie(t,e){var n,i=!t.curOp;i&&Z(t);try{n=e()}finally{i&&te(t)}return n}function re(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:n,diff:i})}function oe(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){ae(t),t.state.focused&&oe(t)})}function se(t){function e(){var i=ae(t);i||n?(t.display.pollingFast=!1,oe(t)):(n=!0,t.display.poll.set(60,e))}var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function ae(t){var e=t.display.input,n=t.display.prevInput,i=t.doc,r=i.sel;if(!t.state.focused||wo(e)||ce(t))return!1;var o=e.value;if(o==n&&Re(r.from,r.to))return!1;if(gr&&!vr&&t.display.inputHasSelection===o)return le(t,!0),!1;var s=!t.curOp;s&&Z(t),r.shift=!1;for(var a=0,l=Math.min(n.length,o.length);l>a&&n.charCodeAt(a)==o.charCodeAt(a);)++a;var u=r.from,c=r.to;n.length>a?u=Pe(u.line,u.ch-(n.length-a)):t.state.overwrite&&Re(u,c)&&!t.state.pasteIncoming&&(c=Pe(c.line,Math.min(ui(i,c.line).text.length,c.ch+(o.length-a))));var h=t.curOp.updateInput;return Ie(t.doc,{from:u,to:c,text:bo(o.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"},"end"),t.curOp.updateInput=h,o.length>1e3||o.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=o,s&&te(t),t.state.pasteIncoming=!1,!0}function le(t,e){var n,i,r=t.doc;if(Re(r.sel.from,r.sel.to))e&&(t.display.prevInput=t.display.input.value="",gr&&!vr&&(t.display.inputHasSelection=null));else{t.display.prevInput="",n=xo&&(r.sel.to.line-r.sel.from.line>100||(i=t.getSelection()).length>1e3);var o=n?"-":i||t.getSelection();t.display.input.value=o,t.state.focused&&Bi(t.display.input),gr&&!vr&&(t.display.inputHasSelection=o)}t.display.inaccurateSelection=n}function ue(t){"nocursor"==t.options.readOnly||Lr&&document.activeElement==t.display.input||t.display.input.focus()}function ce(t){return t.options.readOnly||t.doc.cantEdit}function he(t){function e(){t.state.focused&&setTimeout(Qi(ue,t),0)}function n(){s.cachedCharWidth=s.cachedTextHeight=null,q(t),ie(t,Qi(re,t))}function i(){for(var t=s.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(i,5e3):$i(window,"resize",n)}function r(e){t.options.onDragEvent&&t.options.onDragEvent(t,Li(e))||Ai(e)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=t.getSelection(),Bi(s.input))}var s=t.display;Ii(s.scroller,"mousedown",ee(t,pe)),gr?Ii(s.scroller,"dblclick",ee(t,function(e){var n=fe(t,e);if(n&&!me(t,e)&&!de(t.display,e)){Ei(e);var i=hn(ui(t.doc,n.line).text,n);Qe(t.doc,i.from,i.to)}})):Ii(s.scroller,"dblclick",Ei),Ii(s.lineSpace,"selectstart",function(t){de(s,t)||Ei(t)}),zr||Ii(s.scroller,"contextmenu",function(e){Ee(t,e)}),Ii(s.scroller,"scroll",function(){s.scroller.clientHeight&&(ye(t,s.scroller.scrollTop),be(t,s.scroller.scrollLeft,!0),zi(t,"scroll",t))}),Ii(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&ye(t,s.scrollbarV.scrollTop)}),Ii(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&be(t,s.scrollbarH.scrollLeft)}),Ii(s.scroller,"mousewheel",function(e){we(t,e)}),Ii(s.scroller,"DOMMouseScroll",function(e){we(t,e)}),Ii(s.scrollbarH,"mousedown",e),Ii(s.scrollbarV,"mousedown",e),Ii(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),Ii(window,"resize",n),setTimeout(i,5e3),Ii(s.input,"keyup",ee(t,function(e){t.options.onKeyEvent&&t.options.onKeyEvent(t,Li(e))||16==e.keyCode&&(t.doc.sel.shift=!1)})),Ii(s.input,"input",Qi(se,t)),Ii(s.input,"keydown",ee(t,Se)),Ii(s.input,"keypress",ee(t,Te)),Ii(s.input,"focus",Qi(Me,t)),Ii(s.input,"blur",Qi(Le,t)),t.options.dragDrop&&(Ii(s.scroller,"dragstart",function(e){ve(t,e)}),Ii(s.scroller,"dragenter",r),Ii(s.scroller,"dragover",r),Ii(s.scroller,"drop",ee(t,ge))),Ii(s.scroller,"paste",function(e){de(s,e)||(ue(t),se(t))}),Ii(s.input,"paste",function(){t.state.pasteIncoming=!0,se(t)}),Ii(s.input,"cut",o),Ii(s.input,"copy",o),_r&&Ii(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),ue(t)})}function de(t,e){for(var n=Di(e);n!=t.wrapper;n=n.parentNode){if(!n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==t.sizer&&n!=t.mover)return!0}}function fe(t,e,n){var i=t.display;if(!n){var r=Di(e);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller)return null}var o,s,a=nr(i.lineSpace);try{o=e.clientX,s=e.clientY}catch(e){return null}return Q(t,o-a.left,s-a.top)}function pe(t){function e(t){if(!Re(v,t)){if(v=t,"single"==c)return Qe(r.doc,Ue(s,l),t),void 0;if(g=Ue(s,g),m=Ue(s,m),"double"==c){var e=hn(ui(s,t.line).text,t);qe(t,g)?Qe(r.doc,e.from,m):Qe(r.doc,g,e.to)}else"triple"==c&&(qe(t,g)?Qe(r.doc,m,Ue(s,Pe(t.line,0))):Qe(r.doc,g,Ue(s,Pe(t.line+1,0))))}}function n(t){var i=++b,a=fe(r,t,!0);if(a)if(Re(a,d)){var l=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;l&&setTimeout(ee(r,function(){b==i&&(o.scroller.scrollTop+=l,n(t))}),50)}else{r.state.focused||Me(r),d=a,e(a);var u=p(o,s);(a.line>=u.to||a.line<u.from)&&setTimeout(ee(r,function(){b==i&&n(t)}),150)}}function i(t){b=1/0;var n=fe(r,t);n&&e(n),Ei(t),ue(r),$i(document,"mousemove",w),$i(document,"mouseup",x)}var r=this,o=r.display,s=r.doc,a=s.sel;if(a.shift=t.shiftKey,de(o,t))return yr||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!me(r,t)){var l=fe(r,t);switch(Fi(t)){case 3:return zr&&Ee.call(r,r,t),void 0;case 2:return l&&Qe(r.doc,l),setTimeout(Qi(ue,r),20),Ei(t),void 0}if(!l)return Di(t)==o.scroller&&Ei(t),void 0;r.state.focused||Me(r);var u=+new Date,c="single";if(Ir&&Ir.time>u-400&&Re(Ir.pos,l))c="triple",Ei(t),setTimeout(Qi(ue,r),20),dn(r,l.line);else if(Fr&&Fr.time>u-400&&Re(Fr.pos,l)){c="double",Ir={time:u,pos:l},Ei(t);var h=hn(ui(s,l.line).text,l);
Qe(r.doc,h.from,h.to)}else Fr={time:u,pos:l};var d=l;if(r.options.dragDrop&&go&&!ce(r)&&!Re(a.from,a.to)&&!qe(l,a.from)&&!qe(a.to,l)&&"single"==c){var f=ee(r,function(e){yr&&(o.scroller.draggable=!1),r.state.draggingText=!1,$i(document,"mouseup",f),$i(o.scroller,"drop",f),10>Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)&&(Ei(e),Qe(r.doc,l),ue(r))});return yr&&(o.scroller.draggable=!0),r.state.draggingText=f,o.scroller.dragDrop&&o.scroller.dragDrop(),Ii(document,"mouseup",f),Ii(o.scroller,"drop",f),void 0}Ei(t),"single"==c&&Qe(r.doc,Ue(s,l));var g=a.from,m=a.to,v=l,y=nr(o.wrapper),b=0,w=ee(r,function(t){gr||Fi(t)?n(t):i(t)}),x=ee(r,i);Ii(document,"mousemove",w),Ii(document,"mouseup",x)}}function ge(t){var e=this;if(!(de(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Li(t)))){Ei(t);var n=fe(e,t,!0),i=t.dataTransfer.files;if(n&&!ce(e))if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(t,i){var a=new FileReader;a.onload=function(){o[i]=a.result,++s==r&&(n=Ue(e.doc,n),Ie(e.doc,{from:n,to:n,text:bo(o.join("\n")),origin:"paste"},"around"))},a.readAsText(t)},l=0;r>l;++l)a(i[l],l);else{if(e.state.draggingText&&!qe(n,e.doc.sel.from)&&!qe(e.doc.sel.to,n))return e.state.draggingText(t),setTimeout(Qi(ue,e),20),void 0;try{var o=t.dataTransfer.getData("Text");if(o){var u=e.doc.sel.from,c=e.doc.sel.to;Xe(e.doc,n,n),e.state.draggingText&&We(e.doc,"",u,c,"paste"),e.replaceSelection(o,null,"paste"),ue(e),Me(e)}}catch(t){}}}}function me(t,e){var n=t.display;try{var i=e.clientX,r=e.clientY}catch(e){return!1}if(i>=Math.floor(nr(n.gutters).right))return!1;if(Ei(e),!ji(t,"gutterClick"))return!0;var o=nr(n.lineDiv);if(r>o.bottom)return!0;r-=o.top-n.viewOffset;for(var s=0;t.options.gutters.length>s;++s){var a=n.gutters.childNodes[s];if(a&&nr(a).right>=i){var l=pi(t.doc,r),u=t.options.gutters[s];Ni(t,"gutterClick",t,l,u,e);break}}return!0}function ve(t,e){if(gr&&!t.state.draggingText)return Ai(e),void 0;if(!de(t.display,e)){var n=t.getSelection();if(e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage){var i=Ji("img",null,null,"position: fixed; left: 0; top: 0;");xr&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),Cr&&(t.display.dragImg?i=t.display.dragImg:(t.display.dragImg=i,i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t.display.wrapper.appendChild(i))),e.dataTransfer.setDragImage(i,0,0),xr&&i.parentNode.removeChild(i)}}}function ye(t,e){2>Math.abs(t.doc.scrollTop-e)||(t.doc.scrollTop=e,pr||b(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),pr&&b(t,[]))}function be(t,e,n){(n?e==t.doc.scrollLeft:2>Math.abs(t.doc.scrollLeft-e))||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,g(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function we(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var r=t.display,o=r.scroller;if(n&&o.scrollWidth>o.clientWidth||i&&o.scrollHeight>o.clientHeight){if(i&&Er&&yr)for(var s=e.target;s!=o;s=s.parentNode)if(s.lineObj){t.display.currentWheelTarget=s;break}if(n&&!pr&&!xr&&null!=Pr)return i&&ye(t,Math.max(0,Math.min(o.scrollTop+i*Pr,o.scrollHeight-o.clientHeight))),be(t,Math.max(0,Math.min(o.scrollLeft+n*Pr,o.scrollWidth-o.clientWidth))),Ei(e),r.wheelStartX=null,void 0;if(i&&null!=Pr){var a=i*Pr,l=t.doc.scrollTop,u=l+r.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):u=Math.min(t.doc.height,u+a+50),b(t,[],{top:l,bottom:u})}20>Wr&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Pr=(Pr*Wr+n)/(Wr+1),++Wr)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function xe(t,e,n){if("string"==typeof e&&(e=Jr[e],!e))return!1;t.display.pollingFast&&ae(t)&&(t.display.pollingFast=!1);var i=t.doc,r=i.sel.shift,o=!1;try{ce(t)&&(t.state.suppressEdits=!0),n&&(i.sel.shift=!1),o=e(t)!=co}finally{i.sel.shift=r,t.state.suppressEdits=!1}return o}function Ce(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function _e(t,e){var n=mn(t.options.keyMap),i=n.auto;clearTimeout(Rr),i&&!yn(e)&&(Rr=setTimeout(function(){mn(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i)},50));var r=bn(e,!0),o=!1;if(!r)return!1;var s=Ce(t);return o=e.shiftKey?vn("Shift-"+r,s,function(e){return xe(t,e,!0)})||vn(r,s,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)?xe(t,e):void 0}):vn(r,s,function(e){return xe(t,e)}),"stop"==o&&(o=!1),o&&(Ei(e),O(t),vr&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),o}function ke(t,e,n){var i=vn("'"+n+"'",Ce(t),function(e){return xe(t,e,!0)});return i&&(Ei(e),O(t)),i}function Se(t){var e=this;if(e.state.focused||Me(e),gr&&27==t.keyCode&&(t.returnValue=!1),!e.options.onKeyEvent||!e.options.onKeyEvent(e,Li(t))){var n=t.keyCode;e.doc.sel.shift=16==n||t.shiftKey;var i=_e(e,t);xr&&(Br=i?n:null,!i&&88==n&&!xo&&(Er?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function Te(t){var e=this;if(!e.options.onKeyEvent||!e.options.onKeyEvent(e,Li(t))){var n=t.keyCode,i=t.charCode;if(xr&&n==Br)return Br=null,Ei(t),void 0;if(!(xr&&(!t.which||10>t.which)||_r)||!_e(e,t)){var r=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ce(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(ee(e,function(){an(e,e.doc.sel.to.line,"smart")}),75),ke(e,t,r)||(gr&&!vr&&(e.display.inputHasSelection=null),se(e))}}}function Me(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(zi(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),le(t,!0)),oe(t),O(t))}function Le(t){t.state.focused&&(zi(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function Ee(t,e){function n(){if(i.inputDiv.style.position="relative",i.input.style.cssText=a,vr&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=s),oe(t),null!=i.input.selectionStart&&(!gr||vr)){clearTimeout(qr);var e=i.input.value=" "+(Re(r.from,r.to)?"":i.input.value),n=0;i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=e.length;var o=function(){" "==i.prevInput&&0==i.input.selectionStart?ee(t,Jr.selectAll)(t):10>n++?qr=setTimeout(o,500):le(t)};qr=setTimeout(o,200)}}var i=t.display,r=t.doc.sel;if(!de(i,e)){var o=fe(t,e),s=i.scroller.scrollTop;if(o&&!xr){(Re(r.from,r.to)||qe(o,r.from)||!qe(o,r.to))&&ee(t,Xe)(t.doc,o,o);var a=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ue(t),le(t,!0),Re(r.from,r.to)&&(i.input.value=i.prevInput=" "),zr){Ai(e);var l=function(){$i(window,"mouseup",l),setTimeout(n,20)};Ii(window,"mouseup",l)}else setTimeout(n,50)}}}function Oe(t){return t.text?Pe(t.from.line+t.text.length-1,qi(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ae(t,e,n){if(!qe(e.from,n))return Ue(t,n);var i=e.text.length-1-(e.to.line-e.from.line);if(n.line>e.to.line+i){var r=n.line-i,o=t.first+t.size-1;return r>o?Pe(o,ui(t,o).text.length):Ve(n,ui(t,r).text.length)}if(n.line==e.to.line+i)return Ve(n,qi(e.text).length+(1==e.text.length?e.from.ch:0)+ui(t,e.to.line).text.length-e.to.ch);var s=n.line-e.from.line;return Ve(n,e.text[s].length+(s?0:e.from.ch))}function De(t,e,n){if(n&&"object"==typeof n)return{anchor:Ae(t,e,n.anchor),head:Ae(t,e,n.head)};if("start"==n)return{anchor:e.from,head:e.from};var i=Oe(e);if("around"==n)return{anchor:e.from,head:i};if("end"==n)return{anchor:i,head:i};var r=function(t){if(qe(t,e.from))return t;if(!qe(e.to,t))return i;var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=i.ch-e.to.ch),Pe(n,r)};return{anchor:r(t.sel.anchor),head:r(t.sel.head)}}function Fe(t,e){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,update:function(e,n,i,r){e&&(this.from=Ue(t,e)),n&&(this.to=Ue(t,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)},cancel:function(){this.canceled=!0}};return zi(t,"beforeChange",t,n),t.cm&&zi(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ie(t,e,n,i){if(t.cm){if(!t.cm.curOp)return ee(t.cm,Ie)(t,e,n,i);if(t.cm.state.suppressEdits)return}if(!(ji(t,"beforeChange")||t.cm&&ji(t.cm,"beforeChange"))||(e=Fe(t,e))){var r=Nr&&!i&&Dn(t,e.from,e.to);if(r){for(var o=r.length-1;o>=1;--o)$e(t,{from:r[o].from,to:r[o].to,text:[""]});r.length&&$e(t,{from:r[0].from,to:r[0].to,text:e.text},n)}else $e(t,e,n)}}function $e(t,e,n){var i=De(t,e,n);wi(t,e,i,t.cm?t.cm.curOp.id:0/0),He(t,e,i,On(t,e));var r=[];ai(t,function(t,n){n||-1!=Yi(r,t.history)||(Ti(t.history,e),r.push(t.history)),He(t,e,null,On(t,e))})}function ze(t,e){if(!t.cm||!t.cm.state.suppressEdits){var n=t.history,i=("undo"==e?n.done:n.undone).pop();if(i){n.dirtyCounter+="undo"==e?-1:1;var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore};("undo"==e?n.undone:n.done).push(r);for(var o=i.changes.length-1;o>=0;--o){var s=i.changes[o];s.origin=e,r.changes.push(bi(t,s));var a=o?De(t,s,null):{anchor:i.anchorBefore,head:i.headBefore};He(t,s,a,An(t,s));var l=[];ai(t,function(t,e){e||-1!=Yi(l,t.history)||(Ti(t.history,s),l.push(t.history)),He(t,s,null,An(t,s))})}}}}function Ne(t,e){function n(t){return Pe(t.line+e,t.ch)}t.first+=e,t.cm&&re(t.cm,t.first,t.first,e),t.sel.head=n(t.sel.head),t.sel.anchor=n(t.sel.anchor),t.sel.from=n(t.sel.from),t.sel.to=n(t.sel.to)}function He(t,e,n,i){if(t.cm&&!t.cm.curOp)return ee(t.cm,He)(t,e,n,i);if(e.to.line<t.first)return Ne(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Ne(t,r),e={from:Pe(t.first,0),to:Pe(e.to.line+r,e.to.ch),text:[qi(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:Pe(o,ui(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ci(t,e.from,e.to),n||(n=De(t,e,null)),t.cm?je(t.cm,e,i,n):ri(t,e,i,n)}}function je(t,e,n,i){var o=t.doc,s=t.display,a=e.from,l=e.to,u=!1,h=a.line;t.options.lineWrapping||(h=fi(zn(o,ui(o,a.line))),o.iter(h,l.line+1,function(t){return t==s.maxLine?(u=!0,!0):void 0})),qe(o.sel.head,e.from)||qe(e.to,o.sel.head)||(t.curOp.cursorActivity=!0),ri(o,e,n,i,r(t)),t.options.lineWrapping||(o.iter(h,a.line+e.text.length,function(t){var e=c(o,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,u=!1)}),u&&(t.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,a.line),A(t,400);var d=e.text.length-(l.line-a.line)-1;if(re(t,a.line,l.line+1,d),ji(t,"change")){var f={from:a,to:l,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var p=t.curOp.textChanged;p.next;p=p.next);p.next=f}else t.curOp.textChanged=f}}function We(t,e,n,i,r){if(i||(i=n),qe(i,n)){var o=i;i=n,n=o}"string"==typeof e&&(e=bo(e)),Ie(t,{from:n,to:i,text:e,origin:r},null)}function Pe(t,e){return this instanceof Pe?(this.line=t,this.ch=e,void 0):new Pe(t,e)}function Re(t,e){return t.line==e.line&&t.ch==e.ch}function qe(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Be(t){return Pe(t.line,t.ch)}function Ye(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Ue(t,e){if(e.line<t.first)return Pe(t.first,0);var n=t.first+t.size-1;return e.line>n?Pe(n,ui(t,n).text.length):Ve(e,ui(t,e.line).text.length)}function Ve(t,e){var n=t.ch;return null==n||n>e?Pe(t.line,e):0>n?Pe(t.line,0):t}function Ge(t,e){return e>=t.first&&t.first+t.size>e}function Qe(t,e,n,i){if(t.sel.shift||t.sel.extend){var r=t.sel.anchor;if(n){var o=qe(e,r);o!=qe(n,r)?(r=e,e=n):o!=qe(e,n)&&(e=n)}Xe(t,r,e,i)}else Xe(t,e,n||e,i);t.cm&&(t.cm.curOp.userSelChange=!0)}function Ke(t,e,n){var i={anchor:e,head:n};return zi(t,"beforeSelectionChange",t,i),t.cm&&zi(t.cm,"beforeSelectionChange",t.cm,i),i.anchor=Ue(t,i.anchor),i.head=Ue(t,i.head),i}function Xe(t,e,n,i,r){if(!r&&ji(t,"beforeSelectionChange")||t.cm&&ji(t.cm,"beforeSelectionChange")){var o=Ke(t,e,n);n=o.head,e=o.anchor}var s=t.sel;if(s.goalColumn=null,(r||!Re(e,s.anchor))&&(e=Ze(t,e,i,"push"!=r)),(r||!Re(n,s.head))&&(n=Ze(t,n,i,"push"!=r)),!Re(s.anchor,e)||!Re(s.head,n)){s.anchor=e,s.head=n;var a=qe(n,e);s.from=a?n:e,s.to=a?e:n,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),Ni(t,"cursorActivity",t)}}function Je(t){Xe(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function Ze(t,e,n,i){var r=!1,o=e,s=n||1;t.cantEdit=!1;t:for(;;){var a=ui(t,o.line);if(a.markedSpans)for(var l=0;a.markedSpans.length>l;++l){var u=a.markedSpans[l],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(i&&(zi(c,"beforeCursorEnter"),c.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!c.atomic)continue;var h=c.find()[0>s?"from":"to"];if(Re(h,o)&&(h.ch+=s,0>h.ch?h=h.line>t.first?Ue(t,Pe(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?Pe(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,Pe(t.first,0)):Ze(t,e,n,!0);r=!0,h=e,s=-s}o=h;continue t}}return o}}function tn(t){var e=en(t,t.doc.sel.head);if(t.state.focused){var n=t.display,i=nr(n.sizer),r=null,o=$(t.display);if(0>e.top+o+i.top?r=!0:e.bottom+o+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Tr){var s="none"==n.cursor.style.display;s&&(n.cursor.style.display="",n.cursor.style.left=e.left+"px",n.cursor.style.top=e.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),s&&(n.cursor.style.display="none")}}}function en(t,e,n){for(null==n&&(n=0);;){var i=!1,r=V(t,e),o=rn(t,r.left,r.top-n,r.left,r.bottom+n),s=t.doc.scrollTop,a=t.doc.scrollLeft;if(null!=o.scrollTop&&(ye(t,o.scrollTop),Math.abs(t.doc.scrollTop-s)>1&&(i=!0)),null!=o.scrollLeft&&(be(t,o.scrollLeft),Math.abs(t.doc.scrollLeft-a)>1&&(i=!0)),!i)return r}}function nn(t,e,n,i,r){var o=rn(t,e,n,i,r);null!=o.scrollTop&&ye(t,o.scrollTop),null!=o.scrollLeft&&be(t,o.scrollLeft)}function rn(t,e,n,i,r){var o=t.display,s=$(o);n+=s,r+=s,0>n&&(n=0);var a=o.scroller.clientHeight-uo,l=o.scroller.scrollTop,u={},c=t.doc.height+z(o),h=s+10>n,d=r+s>c-10;if(l>n)u.scrollTop=h?0:n;else if(r>l+a){var f=Math.min(n,(d?c:r)-a);f!=l&&(u.scrollTop=f)}var p=o.scroller.clientWidth-uo,g=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,i+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=m+10>e;return g+m>e||v?(v&&(e=0),u.scrollLeft=Math.max(0,e-10-m)):i>p+g-3&&(u.scrollLeft=i+10-p),u}function on(t,e,n){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==n?t.doc.scrollTop:n}}function sn(t,e,n){var i=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),r=t.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+e))}function an(t,e,n,i){var r=t.doc;if(n||(n="add"),"smart"==n)if(t.doc.mode.indent)var o=I(t,e);else n="prev";var s,a=t.options.tabSize,l=ui(r,e),u=Pi(l.text,null,a),c=l.text.match(/^\s*/)[0];if("smart"==n&&(s=t.doc.mode.indent(o,l.text.slice(c.length),l.text),s==co)){if(!i)return;n="prev"}"prev"==n?s=e>r.first?Pi(ui(r,e-1).text,null,a):0:"add"==n?s=u+t.options.indentUnit:"subtract"==n&&(s=u-t.options.indentUnit),s=Math.max(0,s);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)d+=a,h+="	";s>d&&(h+=Ri(s-d)),h!=c&&We(t.doc,h,Pe(e,0),Pe(e,c.length),"+input"),l.stateAfter=null}function ln(t,e,n){var i=e,r=e,o=t.doc;return"number"==typeof e?r=ui(o,Ye(o,e)):i=fi(e),null==i?null:n(r,i)?(re(t,i,i+1),r):null}function un(t,e,n,i,r){function o(){var e=a+n;return t.first>e||e>=t.first+t.size?c=!1:(a=e,u=ui(t,e))}function s(t){var e=(r?dr:fr)(u,l,n,!0);if(null==e){if(t||!o())return c=!1;l=r?(0>n?ur:lr)(u):0>n?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,u=ui(t,a),c=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var h=null,d="group"==i,f=!0;!(0>n)||s(!f);f=!1){var p=u.text.charAt(l)||"\n",g=Ki(p)?"w":d?/\s/.test(p)?null:"p":null;if(h&&h!=g){0>n&&(n=1,s());break}if(g&&(h=g),n>0&&!s(!f))break}var m=Ze(t,Pe(a,l),n,!0);return c||(m.hitSide=!0),m}function cn(t,e,n,i){var r,o=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+n*(a-(0>n?1.5:.5)*X(t.display))}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;;){var l=Q(t,s,r);if(!l.outside)break;if(0>n?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function hn(t,e){var n=e.ch,i=e.ch;if(t){e.after===!1||i==t.length?--n:++i;for(var r=t.charAt(n),o=Ki(r)?Ki:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Ki(t)};n>0&&o(t.charAt(n-1));)--n;for(;t.length>i&&o(t.charAt(i));)++i}return{from:Pe(e.line,n),to:Pe(e.line,i)}}function dn(t,e){Qe(t.doc,Pe(e,0),Ue(t.doc,Pe(e+1,0)))}function fn(e,n,i,r){t.defaults[e]=n,i&&(Yr[e]=r?function(t,e,n){n!=Vr&&i(t,e,n)}:i)}function pn(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function gn(t,e,n){return t.startState?t.startState(e,n):!0}function mn(t){return"string"==typeof t?Zr[t]:t}function vn(t,e,n){function i(e){e=mn(e);var r=e[t];if(r===!1)return"stop";if(null!=r&&n(r))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return i(o);for(var s=0,a=o.length;a>s;++s){var l=i(o[s]);if(l)return l}return!1}for(var r=0;e.length>r;++r){var o=i(e[r]);if(o)return o}}function yn(t){var e=Co[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function bn(t,e){if(xr&&34==t.keyCode&&t["char"])return!1;var n=Co[t.keyCode];return null==n||t.altGraphKey?!1:(t.altKey&&(n="Alt-"+n),($r?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),($r?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)}function wn(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function xn(t,e){this.lines=[],this.type=e,this.doc=t}function Cn(t,e,n,i,r){if(i&&i.shared)return kn(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return ee(t.cm,Cn)(t,e,n,i,r);var o=new xn(t,r);if("range"==r&&!qe(e,n))return o;i&&Vi(i,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=Ji("span",[o.replacedWith],"CodeMirror-widget")),o.collapsed&&(Hr=!0),o.addToHistory&&wi(t,{from:e,to:n,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},0/0);var s,a,l,u=e.line,c=0,h=t.cm;if(t.iter(u,n.line+1,function(i){h&&o.collapsed&&!h.options.lineWrapping&&zn(t,i)==h.display.maxLine&&(l=!0);var r={from:null,to:null,marker:o};c+=i.text.length,u==e.line&&(r.from=e.ch,c-=e.ch),u==n.line&&(r.to=n.ch,c-=i.text.length-n.ch),o.collapsed&&(u==n.line&&(a=Fn(i,n.ch)),u==e.line?s=Fn(i,e.ch):di(i,0)),Mn(i,r),++u}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Nn(t,e)&&di(e,0)}),o.clearOnEnter&&Ii(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Nr=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed){if(s!=a)throw Error("Inserting collapsed marker overlapping an existing one");o.size=c,o.atomic=!0}return h&&(l&&(h.curOp.updateMaxLine=!0),(o.className||o.startStyle||o.endStyle||o.collapsed)&&re(h,e.line,n.line+1),o.atomic&&Je(h)),o}function _n(t,e){this.markers=t,this.primary=e;for(var n=0,i=this;t.length>n;++n)t[n].parent=this,Ii(t[n],"clear",function(){i.clear()})}function kn(t,e,n,i,r){i=Vi(i),i.shared=!1;var o=[Cn(t,e,n,i,r)],s=o[0],a=i.replacedWith;return ai(t,function(t){a&&(i.replacedWith=a.cloneNode(!0)),o.push(Cn(t,Ue(t,e),Ue(t,n),i,r));for(var l=0;t.linked.length>l;++l)if(t.linked[l].isParent)return;s=qi(o)}),new _n(o,s)}function Sn(t,e){if(t)for(var n=0;t.length>n;++n){var i=t[n];if(i.marker==e)return i}}function Tn(t,e){for(var n,i=0;t.length>i;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Mn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Ln(t,e,n){if(t)for(var i,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);if(a||"bookmark"==s.type&&o.from==e&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push({from:o.from,to:l?null:o.to,marker:s})}}return i}function En(t,e,n){if(t)for(var i,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||"bookmark"==s.type&&o.from==e&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);(i||(i=[])).push({from:l?null:o.from-e,to:null==o.to?null:o.to-e,marker:s})}}return i}function On(t,e){var n=Ge(t,e.from.line)&&ui(t,e.from.line).markedSpans,i=Ge(t,e.to.line)&&ui(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=Re(e.from,e.to),a=Ln(n,r,s),l=En(i,o,s),u=1==e.text.length,c=qi(e.text).length+(u?r:0);if(a)for(var h=0;a.length>h;++h){var d=a[h];if(null==d.to){var f=Sn(l,d.marker);f?u&&(d.to=null==f.to?null:f.to+c):d.to=r}}if(l)for(var h=0;l.length>h;++h){var d=l[h];if(null!=d.to&&(d.to+=c),null==d.from){var f=Sn(a,d.marker);f||(d.from=c,u&&(a||(a=[])).push(d))}else d.from+=c,u&&(a||(a=[])).push(d)}var p=[a];if(!u){var g,m=e.text.length-2;if(m>0&&a)for(var h=0;a.length>h;++h)null==a[h].to&&(g||(g=[])).push({from:null,to:null,marker:a[h].marker});for(var h=0;m>h;++h)p.push(g);p.push(l)}return p}function An(t,e){var n=Ci(t,e),i=On(t,e);if(!n)return i;if(!i)return n;for(var r=0;n.length>r;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;s.length>a;++a){for(var l=s[a],u=0;o.length>u;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function Dn(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;t.markedSpans.length>e;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Yi(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;i.length>o;++o)for(var s=i[o],a=s.find(),l=0;r.length>l;++l){var u=r[l];if(!qe(u.to,a.from)&&!qe(a.to,u.from)){var c=[l,1];(qe(u.from,a.from)||!s.inclusiveLeft&&Re(u.from,a.from))&&c.push({from:u.from,to:a.from}),(qe(a.to,u.to)||!s.inclusiveRight&&Re(u.to,a.to))&&c.push({from:a.to,to:u.to}),r.splice.apply(r,c),l+=c.length-1}}return r}function Fn(t,e){var n,i=Hr&&t.markedSpans;if(i)for(var r,o=0;i.length>o;++o)r=i[o],r.marker.collapsed&&(null==r.from||e>r.from)&&(null==r.to||r.to>e)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function In(t){return Fn(t,-1)}function $n(t){return Fn(t,t.text.length+1)}function zn(t,e){for(var n;n=In(e);)e=ui(t,n.find().from.line);return e}function Nn(t,e){var n=Hr&&e.markedSpans;if(n)for(var i,r=0;n.length>r;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(0==i.from&&i.marker.inclusiveLeft&&Hn(t,e,i))return!0}}function Hn(t,e,n){if(null==n.to){var i=n.marker.find().to,r=ui(t,i.line);return Hn(t,r,Sn(r.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o,s=0;e.markedSpans.length>s;++s)if(o=e.markedSpans[s],o.marker.collapsed&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Hn(t,e,o))return!0}function jn(t){var e=t.markedSpans;if(e){for(var n=0;e.length>n;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Wn(t,e){if(e){for(var n=0;e.length>n;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Pn(t){return function(){var e=!this.cm.curOp;e&&Z(this.cm);try{var n=t.apply(this,arguments)}finally{e&&te(this.cm)}return n}}function Rn(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||tr(t.cm.display.measure,Ji("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function qn(t,e,n,i){var r=new to(t,n,i);return r.noHScroll&&(t.display.alignWidgets=!0),ln(t,e,function(e){if((e.widgets||(e.widgets=[])).push(r),r.line=e,!Nn(t.doc,e)||r.showIfHidden){var n=gi(t,e)<t.display.scroller.scrollTop;di(e,e.height+Rn(r)),n&&sn(t,0,r.height)}return!0}),r}function Bn(t,e,n){var i={text:t};return Wn(i,e),i.height=n?n(i):1,i}function Yn(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),jn(t),Wn(t,n);var r=i?i(t):1;r!=t.height&&di(t,r)}function Un(t){t.parent=null,jn(t)}function Vn(t,e,n,i,r){var o=n.flattenSpans;null==o&&(o=t.options.flattenSpans);var s,a="",l=null,u=new wn(e,t.options.tabSize);for(""==e&&n.blankLine&&n.blankLine(i);!u.eol();){u.pos>t.options.maxHighlightLength?(o=!1,u.pos=Math.min(e.length,u.start+5e4),s=null):s=n.token(u,i);var c=u.current();u.start=u.pos,o&&l==s?a+=c:(a&&r(a,l),a=c,l=s)}a&&r(a,l)}function Gn(t,e,n){var i=[t.state.modeGen];Vn(t,e.text,t.doc.mode,n,function(t,e){i.push(t,e)});for(var r=0;t.state.overlays.length>r;++r){var o=t.state.overlays[r],s=1;Vn(t,e.text,o.mode,!0,function(t,e){for(var n=s,r=t.length;r;){var a=i[s],l=a.length;r>=l?r-=l:(i.splice(s,1,a.slice(0,r),i[s+1],a.slice(r)),r=0),s+=2}if(e)if(o.opaque)i.splice(n,s-n,t,e),s=n+2;else for(;s>n;n+=2){var a=i[n+1];i[n+1]=a?a+" "+e:e}})}return i}function Qn(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Gn(t,e,e.stateAfter=I(t,fi(e)))),e.styles}function Kn(t,e,n){var i=t.doc.mode,r=new wn(e.text,t.options.tabSize);for(""==e.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=t.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}function Xn(t){return t?eo[t]||(eo[t]="cm-"+t.replace(/ +/g," cm-")):null}function Jn(t,e,n){for(var i,r,o,s=e,a=!0;i=In(s);)a=!1,s=ui(t.doc,i.find().from.line),r||(r=s);var l={pre:Ji("pre"),col:0,pos:0,display:!n,measure:null,addedOne:!1,cm:t};s.textClass&&(l.pre.className=s.textClass);do{l.measure=s==e&&n,l.pos=0,l.addToken=l.measure?ti:Zn,(gr||yr)&&t.getOption("lineWrapping")&&(l.addToken=ei(l.addToken)),n&&o&&s!=e&&!l.addedOne&&(n[0]=l.pre.appendChild(rr(t.display.measure)),l.addedOne=!0);var u=ii(s,l,Qn(t,s));o=s==r,u&&(s=ui(t.doc,u.to.line),a=!1)}while(u);n&&!l.addedOne&&(n[0]=l.pre.appendChild(a?Ji("span"," "):rr(t.display.measure))),l.pre.firstChild||Nn(t.doc,e)||l.pre.appendChild(document.createTextNode(" "));var c;if(n&&gr&&(c=mi(s))){var h=c.length-1;c[h].from==c[h].to&&--h;var d=c[h],f=c[h-1];if(d.from+1==d.to&&f&&d.level<f.level){var p=n[l.pos-1];p&&p.parentNode.insertBefore(p.measureRight=rr(t.display.measure),p.nextSibling)}}return zi(t,"renderLine",t,e,l.pre),l.pre}function Zn(t,e,n,i,r){if(e){if(no.test(e))for(var o=document.createDocumentFragment(),s=0;;){no.lastIndex=s;var a=no.exec(e),l=a?a.index-s:e.length-s;if(l&&(o.appendChild(document.createTextNode(e.slice(s,s+l))),t.col+=l),!a)break;if(s+=l+1,"	"==a[0]){var u=t.cm.options.tabSize,c=u-t.col%u;o.appendChild(Ji("span",Ri(c),"cm-tab")),t.col+=c}else{var h=Ji("span","•","cm-invalidchar");h.title="\\u"+a[0].charCodeAt(0).toString(16),o.appendChild(h),t.col+=1}}else{t.col+=e.length;var o=document.createTextNode(e)}if(n||i||r||t.measure){var d=n||"";return i&&(d+=i),r&&(d+=r),t.pre.appendChild(Ji("span",[o],d))}t.pre.appendChild(o)}}function ti(t,e,n,i,r){for(var o=t.cm.options.lineWrapping,s=0;e.length>s;++s){var a=e.charAt(s),l=0==s;a>=""&&"">a&&e.length-1>s?(a=e.slice(s,s+2),++s):s&&o&&mo.test(e.slice(s-1,s+1))&&t.pre.appendChild(Ji("wbr"));var u=t.measure[t.pos]=Zn(t,a,n,l&&i,s==e.length-1&&r);gr&&o&&" "==a&&s&&!/\s/.test(e.charAt(s-1))&&e.length-1>s&&!/\s/.test(e.charAt(s+1))&&(u.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.addedOne=!0)}function ei(t){function e(t){for(var e=" ",n=0;t.length-2>n;++n)e+=n%2?" ":" ";return e+=" "}return function(n,i,r,o,s){return t(n,i.replace(/ {3,}/,e),r,o,s)}}function ni(t,e,n){n&&(t.display||(n=n.cloneNode(!0)),t.pre.appendChild(n),t.measure&&e&&(t.measure[t.pos]=n,t.addedOne=!0)),t.pos+=e}function ii(t,e,n){var i=t.markedSpans;if(i)for(var r,o,s,a,l,u=t.text,c=u.length,h=0,d=1,f="",p=0;;){if(p==h){o=s=a="",l=null,p=1/0;for(var g=null,m=0;i.length>m;++m){var v=i[m],y=v.marker;h>=v.from&&(null==v.to||v.to>h)?(null!=v.to&&p>v.to&&(p=v.to,s=""),y.className&&(o+=" "+y.className),y.startStyle&&v.from==h&&(a+=" "+y.startStyle),y.endStyle&&v.to==p&&(s+=" "+y.endStyle),y.collapsed&&(!l||l.marker.width<y.width)&&(l=v)):v.from>h&&p>v.from&&(p=v.from),"bookmark"==y.type&&v.from==h&&y.replacedWith&&(g=y.replacedWith)}if(l&&(l.from||0)==h&&(ni(e,(null==l.to?c:l.to)-h,null!=l.from&&l.marker.replacedWith),null==l.to))return l.marker.find();g&&!l&&ni(e,0,g)}if(h>=c)break;for(var b=Math.min(c,p);;){if(f){var w=h+f.length;if(!l){var x=w>b?f.slice(0,b-h):f;e.addToken(e,x,r?r+o:o,a,h+x.length==p?s:"")}if(w>=b){f=f.slice(b-h),h=b;break}h=w,a=""}f=n[d++],r=Xn(n[d++])}}else for(var d=1;n.length>d;d+=2)e.addToken(e,n[d],Xn(n[d+1]))}function ri(t,e,n,i,r){function o(t){return n?n[t]:null}function s(t,n,i){Yn(t,n,i,r),Ni(t,"change",t,e)}var a=e.from,l=e.to,u=e.text,c=ui(t,a.line),h=ui(t,l.line),d=qi(u),f=o(u.length-1),p=l.line-a.line;if(0==a.ch&&0==l.ch&&""==d){for(var g=0,m=u.length-1,v=[];m>g;++g)v.push(Bn(u[g],o(g),r));s(h,h.text,f),p&&t.remove(a.line,p),v.length&&t.insert(a.line,v)}else if(c==h)if(1==u.length)s(c,c.text.slice(0,a.ch)+d+c.text.slice(l.ch),f);else{for(var v=[],g=1,m=u.length-1;m>g;++g)v.push(Bn(u[g],o(g),r));v.push(Bn(d+c.text.slice(l.ch),f,r)),s(c,c.text.slice(0,a.ch)+u[0],o(0)),t.insert(a.line+1,v)}else if(1==u.length)s(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,p);else{s(c,c.text.slice(0,a.ch)+u[0],o(0)),s(h,d+h.text.slice(l.ch),f);for(var g=1,m=u.length-1,v=[];m>g;++g)v.push(Bn(u[g],o(g),r));p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,v)}Ni(t,"change",t,e),Xe(t,i.anchor,i.head,null,!0)}function oi(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function si(t){this.children=t;for(var e=0,n=0,i=0,r=t.length;r>i;++i){var o=t[i];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}function ai(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;t.linked.length>s;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!n||l)&&(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function li(t,e){if(e.cm)throw Error("This document is already in use.");t.doc=e,e.cm=t,o(t),n(t),t.options.lineWrapping||h(t),t.options.mode=e.modeOption,re(t)}function ui(t,e){for(e-=t.first;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(r>e){t=i;break}e-=r}return t.lines[e]}function ci(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function hi(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function di(t,e){for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function fi(t){if(null==t.parent)return null;for(var e=t.parent,n=Yi(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function pi(t,e){var n=t.first;t:do{for(var i=0,r=t.children.length;r>i;++i){var o=t.children[i],s=o.height;if(s>e){t=o;continue t}e-=s,n+=o.chunkSize()}return n}while(!t.lines);for(var i=0,r=t.lines.length;r>i;++i){var a=t.lines[i],l=a.height;if(l>e)break;e-=l}return n+i}function gi(t,e){e=zn(t.doc,e);for(var n=0,i=e.parent,r=0;i.lines.length>r;++r){var o=i.lines[r];
if(o==e)break;n+=o.height}for(var s=i.parent;s;i=s,s=i.parent)for(var r=0;s.children.length>r;++r){var a=s.children[r];if(a==i)break;n+=a.height}return n}function mi(t){var e=t.order;return null==e&&(e=t.order=_o(t.text)),e}function vi(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function yi(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function bi(t,e){var n={from:e.from,to:Oe(e),text:ci(t,e.from,e.to)};return yi(t,n,e.from.line,e.to.line+1),ai(t,function(t){yi(t,n,e.from.line,e.to.line+1)},!0),n}function wi(t,e,n,i){var r=t.history;r.undone.length=0;var o=+new Date,s=qi(r.done);if(s&&(r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=qi(s.changes);Re(e.from,e.to)&&Re(e.from,a.to)?a.to=Oe(e):s.changes.push(bi(t,e)),s.anchorAfter=n.anchor,s.headAfter=n.head}else{for(s={changes:[bi(t,e)],anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(s);r.done.length>r.undoDepth;)r.done.shift();0>r.dirtyCounter?r.dirtyCounter=0/0:r.dirtyCounter++}r.lastTime=o,r.lastOp=i,r.lastOrigin=e.origin}function xi(t){if(!t)return null;for(var e,n=0;t.length>n;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ci(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];e.text.length>i;++i)r.push(xi(n[i]));return r}function _i(t,e){for(var n=0,i=[];t.length>n;++n){var r=t[n],o=r.changes,s=[];i.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;o.length>a;++a){var l,u=o[a];if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(l=c.match(/^spans_(\d+)$/))&&Yi(e,Number(l[1]))>-1&&(qi(s)[c]=u[c],delete u[c])}}return i}function ki(t,e,n,i){t.line>n?t.line+=i:t.line>e&&(t.line=e,t.ch=0)}function Si(t,e,n,i){for(var r=0;t.length>r;++r){for(var o=t[r],s=!0,a=0;o.changes.length>a;++a){var l=o.changes[a];if(o.copied||(l.from=Be(l.from),l.to=Be(l.to)),l.from.line>n)l.from.line+=i,l.to.line+=i;else if(l.to.line>=e){s=!1;break}}o.copied||(o.anchorBefore=Be(o.anchorBefore),o.headBefore=Be(o.headBefore),o.anchorAfter=Be(o.anchorAfter),o.readAfter=Be(o.headAfter),o.copied=!0),s?(ki(o.anchorBefore),ki(o.headBefore),ki(o.anchorAfter),ki(o.headAfter)):(t.splice(0,r+1),r=0)}}function Ti(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Si(t.done,n,i,r),Si(t.undone,n,i,r)}function Mi(){Ai(this)}function Li(t){return t.stop||(t.stop=Mi),t}function Ei(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Oi(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ai(t){Ei(t),Oi(t)}function Di(t){return t.target||t.srcElement}function Fi(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Er&&t.ctrlKey&&1==e&&(e=3),e}function Ii(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={}),r=i[e]||(i[e]=[]);r.push(n)}}function $i(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;i.length>r;++r)if(i[r]==n){i.splice(r,1);break}}}function zi(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;n.length>r;++r)n[r].apply(null,i)}function Ni(t,e){function n(t){return function(){t.apply(null,r)}}var i=t._handlers&&t._handlers[e];if(i){var r=Array.prototype.slice.call(arguments,2);ao||(++lo,ao=[],setTimeout(Hi,0));for(var o=0;i.length>o;++o)ao.push(n(i[o]))}}function Hi(){--lo;var t=ao;ao=null;for(var e=0;t.length>e;++e)t[e]()}function ji(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function Wi(){this.id=null}function Pi(t,e,n,i,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=i||0,s=r||0;e>o;++o)"	"==t.charAt(o)?s+=n-s%n:++s;return s}function Ri(t){for(;t>=ho.length;)ho.push(qi(ho)+" ");return ho[t]}function qi(t){return t[t.length-1]}function Bi(t){Mr?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function Yi(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}function Ui(t,e){function n(){}n.prototype=t;var i=new n;return e&&Vi(e,i),i}function Vi(t,e){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Gi(t){for(var e=[],n=0;t>n;++n)e.push(void 0);return e}function Qi(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function Ki(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||fo.test(t))}function Xi(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function Ji(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)er(r,e);else if(e)for(var o=0;e.length>o;++o)r.appendChild(e[o]);return r}function Zi(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function tr(t,e){return Zi(t).appendChild(e)}function er(t,e){vr?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function nr(t){return t.getBoundingClientRect()}function ir(t){if(null!=vo)return vo;var e=Ji("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return tr(t,e),e.offsetWidth&&(vo=e.offsetHeight-e.clientHeight),vo||0}function rr(t){if(null==yo){var e=Ji("span","​");tr(t,Ji("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(yo=1>=e.offsetWidth&&e.offsetHeight>2&&!mr)}return yo?Ji("span","​"):Ji("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function or(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=0;t.length>r;++r){var o=t[r];(n>o.from&&o.to>e||e==n&&o.to==e)&&i(Math.max(o.from,e),Math.min(o.to,n),1==o.level?"rtl":"ltr")}}function sr(t){return t.level%2?t.to:t.from}function ar(t){return t.level%2?t.from:t.to}function lr(t){var e=mi(t);return e?sr(e[0]):0}function ur(t){var e=mi(t);return e?ar(qi(e)):t.text.length}function cr(t,e){var n=ui(t.doc,e),i=zn(t.doc,n);i!=n&&(e=fi(i));var r=mi(i),o=r?r[0].level%2?ur(i):lr(i):0;return Pe(e,o)}function hr(t,e){for(var n,i;n=$n(i=ui(t.doc,e));)e=n.find().to.line;var r=mi(i),o=r?r[0].level%2?lr(i):ur(i):i.text.length;return Pe(e,o)}function dr(t,e,n,i){var r=mi(t);if(!r)return fr(t,e,n,i);for(var o=i?function(e,n){do e+=n;while(e>0&&po.test(t.text.charAt(e)));return e}:function(t,e){return t+e},s=r[0].level,a=0;r.length>a;++a){var l=r[a],u=l.level%2==s;if(e>l.from&&l.to>e||u&&(l.from==e||l.to==e))break}for(var c=o(e,l.level%2?-n:n);null!=c;)if(l.level%2==s){if(!(l.from>c||c>l.to))break;l=r[a+=n],c=l&&(n>0==l.level%2?o(l.to,-1):o(l.from,1))}else if(c==sr(l))l=r[--a],c=l&&ar(l);else{if(c!=ar(l))break;l=r[++a],c=l&&sr(l)}return 0>c||c>t.text.length?null:c}function fr(t,e,n,i){var r=e+n;if(i)for(;r>0&&po.test(t.text.charAt(r));)r+=n;return 0>r||r>t.text.length?null:r}var pr=/gecko\/\d/i.test(navigator.userAgent),gr=/MSIE \d/.test(navigator.userAgent),mr=gr&&(null==document.documentMode||8>document.documentMode),vr=gr&&(null==document.documentMode||9>document.documentMode),yr=/WebKit\//.test(navigator.userAgent),br=yr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),wr=/Chrome\//.test(navigator.userAgent),xr=/Opera\//.test(navigator.userAgent),Cr=/Apple Computer/.test(navigator.vendor),_r=/KHTML\//.test(navigator.userAgent),kr=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Sr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Tr=/PhantomJS/.test(navigator.userAgent),Mr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Lr=Mr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Er=Mr||/Mac/.test(navigator.platform),Or=/windows/i.test(navigator.platform),Ar=xr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ar&&(Ar=Number(Ar[1]));var Dr,Fr,Ir,$r=Er&&(br||xr&&(null==Ar||12.11>Ar)),zr=pr||gr&&!vr,Nr=!1,Hr=!1,jr=0,Wr=0,Pr=null;gr?Pr=-.53:pr?Pr=15:wr?Pr=-.7:Cr&&(Pr=-1/3);var Rr,qr,Br=null;t.Pos=Pe,t.prototype={focus:function(){window.focus(),ue(this),Me(this),se(this)},setOption:function(t,e){var n=this.options,i=n[t];(n[t]!=e||"mode"==t)&&(n[t]=e,Yr.hasOwnProperty(t)&&ee(this,Yr[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;e.length>n;++n)if(("string"==typeof t?e[n].name:e[n])==t)return e.splice(n,1),!0},addOverlay:ee(null,function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,re(this)}),removeOverlay:ee(null,function(t){for(var e=this.state.overlays,n=0;e.length>n;++n)if(e[n].modeSpec==t)return e.splice(n,1),this.state.modeGen++,re(this),void 0}),indentLine:ee(null,function(t,e,n){"string"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Ge(this.doc,t)&&an(this,t,e,n)}),indentSelection:ee(null,function(t){var e=this.doc.sel;if(Re(e.from,e.to))return an(this,e.from.line,t);for(var n=e.to.line-(e.to.ch?0:1),i=e.from.line;n>=i;++i)an(this,i,t)}),getTokenAt:function(t){var e=this.doc;t=Ue(e,t);for(var n=I(this,t.line),i=this.doc.mode,r=ui(e,t.line),o=new wn(r.text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var s=i.token(o,n)}return{start:o.start,end:o.pos,string:o.current(),className:s||null,type:s||null,state:n}},getStateAfter:function(t){var e=this.doc;return t=Ye(e,null==t?e.first+e.size-1:t),I(this,t+1)},cursorCoords:function(t,e){var n,i=this.doc.sel;return n=null==t?i.head:"object"==typeof t?Ue(this.doc,t):t?i.from:i.to,V(this,n,e||"page")},charCoords:function(t,e){return U(this,Ue(this.doc,t),e||"page")},coordsChar:function(t,e){return t=Y(this,t,e||"page"),Q(this,t.left,t.top)},defaultTextHeight:function(){return X(this.display)},defaultCharWidth:function(){return J(this.display)},setGutterMarker:ee(null,function(t,e,n){return ln(this,t,function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&Xi(i)&&(t.gutterMarkers=null),!0})}),clearGutter:ee(null,function(t){var e=this,n=e.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,re(e,i,i+1),Xi(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),addLineClass:ee(null,function(t,e,n){return ln(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(RegExp("\\b"+n+"\\b").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:ee(null,function(t,e,n){return ln(this,t,function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.replace(RegExp("^"+n+"\\b\\s*|\\s*\\b"+n+"\\b"),"");if(o==r)return!1;t[i]=o||null}return!0})}),addLineWidget:ee(null,function(t,e,n){return qn(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!Ge(this.doc,t))return null;var e=t;if(t=ui(this.doc,t),!t)return null}else{var e=fi(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=V(this,Ue(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:l>=t.bottom+e.offsetHeight&&(s=t.bottom),a+e.offsetWidth>u&&(a=u-e.offsetWidth)}e.style.top=s+$(o)+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&nn(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:ee(null,Se),execCommand:function(t){return Jr[t](this)},findPosH:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e);for(var o=0,s=Ue(this.doc,t);e>o&&(s=un(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:ee(null,function(t,e){var n,i=this.doc.sel;n=i.shift||i.extend||Re(i.from,i.to)?un(this.doc,i.head,t,e,this.options.rtlMoveVisually):0>t?i.from:i.to,Qe(this.doc,n,n,t)}),deleteH:ee(null,function(t,e){var n=this.doc.sel;Re(n.from,n.to)?We(this.doc,"",n.from,un(this.doc,n.head,t,e,!1),"+delete"):We(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,n,i){var r=1,o=i;0>e&&(r=-1,e=-e);for(var s=0,a=Ue(this.doc,t);e>s;++s){var l=V(this,a,"div");if(null==o?o=l.left:l.left=o,a=cn(this,l,r,n),a.hitSide)break}return a},moveV:ee(null,function(t,e){var n=this.doc.sel,i=V(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=cn(this,i,t,e);"page"==e&&sn(this,0,U(this,r,"div").top-i.top),Qe(this.doc,r,r,t),n.goalColumn=i.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:ee(null,function(t,e){on(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=uo;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ee(null,function(t,e){"number"==typeof t&&(t=Pe(t,0)),e||(e=0);var n=t;t&&null==t.line||(this.curOp.scrollToPos=t?Ue(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,n=V(this,this.curOp.scrollToPos));var i=rn(this,n.left,n.top-e,n.right,n.bottom+e);on(this,i.scrollLeft,i.scrollTop)}),setSize:function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(t+"")?t+"px":t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.refresh()},on:function(t,e){Ii(this,t,e)},off:function(t,e){$i(this,t,e)},operation:function(t){return ie(this,t)},refresh:ee(null,function(){q(this),on(this,this.doc.scrollLeft,this.doc.scrollTop),re(this)}),swapDoc:ee(null,function(t){var e=this.doc;return e.cm=null,li(this,t),q(this),le(this,!0),on(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Yr=t.optionHandlers={},Ur=t.defaults={},Vr=t.Init={toString:function(){return"CodeMirror.Init"}};fn("value","",function(t,e){t.setValue(e)},!0),fn("mode",null,function(t,e){t.doc.modeOption=e,n(t)},!0),fn("indentUnit",2,n,!0),fn("indentWithTabs",!1),fn("smartIndent",!0),fn("tabSize",4,function(t){n(t),q(t),re(t)},!0),fn("electricChars",!0),fn("rtlMoveVisually",!Or),fn("theme","default",function(t){a(t),l(t)},!0),fn("keyMap","default",s),fn("extraKeys",null),fn("onKeyEvent",null),fn("onDragEvent",null),fn("lineWrapping",!1,i,!0),fn("gutters",[],function(t){d(t.options),l(t)},!0),fn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?y(t.display)+"px":"0",t.refresh()},!0),fn("lineNumbers",!1,function(t){d(t.options),l(t)},!0),fn("firstLineNumber",1,l,!0),fn("lineNumberFormatter",function(t){return t},l,!0),fn("showCursorWhenSelecting",!1,M,!0),fn("readOnly",!1,function(t,e){"nocursor"==e?(Le(t),t.display.input.blur()):e||le(t,!0)}),fn("dragDrop",!0),fn("cursorBlinkRate",530),fn("cursorHeight",1),fn("workTime",100),fn("workDelay",100),fn("flattenSpans",!0),fn("pollInterval",100),fn("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),fn("historyEventDelay",500),fn("viewportMargin",10,function(t){t.refresh()},!0),fn("maxHighlightLength",1e4,function(t){n(t),t.refresh()},!0),fn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),fn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),fn("autofocus",null);var Gr=t.modes={},Qr=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;arguments.length>i;++i)n.dependencies.push(arguments[i])}Gr[e]=n},t.defineMIME=function(t,e){Qr[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Qr.hasOwnProperty(e))e=Qr[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){n=t.resolveMode(n);var i=Gr[n.name];if(!i)return t.getMode(e,"text/plain");var r=i(e,n);if(Kr.hasOwnProperty(n.name)){var o=Kr[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}return r.name=n.name,r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Kr=t.modeExtensions={};t.extendMode=function(t,e){var n=Kr.hasOwnProperty(t)?Kr[t]:Kr[t]={};Vi(e,n)},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){ro.prototype[t]=e},t.defineOption=fn;var Xr=[];t.defineInitHook=function(t){Xr.push(t)},t.copyState=pn,t.startState=gn,t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);e=n.state,t=n.mode}return n||{mode:t,state:e}};var Jr=t.commands={selectAll:function(t){t.setSelection(Pe(t.firstLine(),0),Pe(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!Re(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:Pe(e.line),"+delete"):t.replaceRange("",e,Pe(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Pe(e,0),Pe(e),"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Pe(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Pe(t.lastLine()))},goLineStart:function(t){t.extendSelection(cr(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),n=cr(t,e.line),i=t.getLineHandle(n.line),r=mi(i);if(r&&0!=r[0].level)t.extendSelection(n);else{var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&o>=e.ch&&e.ch;t.extendSelection(Pe(n.line,s?0:o))}},goLineEnd:function(t){t.extendSelection(hr(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","+input")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),Pe(e.line,e.ch-1),Pe(e.line,e.ch+1))},newlineAndIndent:function(t){ee(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},Zr=t.keyMap={};Zr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Zr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Zr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Zr["default"]=Er?Zr.macDefault:Zr.pcDefault,Zr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=vn,t.isModifierKey=yn,t.keyName=bn,t.fromTextArea=function(e,n){function i(){e.value=u.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var r=document.body;try{r=document.activeElement}catch(o){}n.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(Ii(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var s=e.form,a=s.submit;try{var l=s.submit=function(){i(),s.submit=a,s.submit(),s.submit=l}}catch(o){}}e.style.display="none";var u=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return u.save=i,u.getTextArea=function(){return e},u.toTextArea=function(){i(),e.parentNode.removeChild(u.getWrapperElement()),e.style.display="",e.form&&($i(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=a))},u},wn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Pi(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=wn,t.TextMarker=xn,xn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;e&&Z(t);for(var n=null,i=null,r=0;this.lines.length>r;++r){var o=this.lines[r],s=Sn(o.markedSpans,this);null!=s.to&&(i=fi(o)),o.markedSpans=Tn(o.markedSpans,s),null!=s.from?n=fi(o):this.collapsed&&!Nn(this.doc,o)&&t&&di(o,X(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var r=0;this.lines.length>r;++r){var a=zn(t.doc,this.lines[r]),l=c(t.doc,a);l>t.display.maxLineLength&&(t.display.maxLine=a,t.display.maxLineLength=l,t.display.maxLineChanged=!0)}null!=n&&t&&re(t,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Je(t)),e&&te(t),Ni(this,"clear")}},xn.prototype.find=function(){for(var t,e,n=0;this.lines.length>n;++n){var i=this.lines[n],r=Sn(i.markedSpans,this);if(null!=r.from||null!=r.to){var o=fi(i);null!=r.from&&(t=Pe(o,r.from)),null!=r.to&&(e=Pe(o,r.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},xn.prototype.getOptions=function(t){var e=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:t?e&&e.cloneNode(!0):e,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},xn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Yi(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},xn.prototype.detachLine=function(t){if(this.lines.splice(Yi(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=_n,_n.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;this.markers.length>t;++t)this.markers[t].clear();Ni(this,"clear")}},_n.prototype.find=function(){return this.primary.find()},_n.prototype.getOptions=function(t){var e=this.primary.getOptions(t);return e.shared=!0,e};var to=t.LineWidget=function(t,e,n){for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};to.prototype.clear=Pn(function(){var t=this.line.widgets,e=fi(this.line);if(null!=e&&t){for(var n=0;t.length>n;++n)t[n]==this&&t.splice(n--,1);t.length||(this.line.widgets=null),di(this.line,Math.max(0,this.line.height-Rn(this))),re(this.cm,e,e+1)}}),to.prototype.changed=Pn(function(){var t=this.height;this.height=null;var e=Rn(this)-t;if(e){di(this.line,this.line.height+e);var n=fi(this.line);re(this.cm,n,n+1)}});var eo={},no=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;oi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;i>n;++n){var r=this.lines[n];this.height-=r.height,Un(r),Ni(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,r=e.length;r>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},si.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;this.children.length>n;++n){var i=this.children[n],r=i.chunkSize();if(r>t){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(25>this.size-e){var a=[];this.collapse(a),this.children=[new oi(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>=t){if(o.insertInner(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),l=new oi(a);o.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new si(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=Yi(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new si(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0,r=this.children.length;r>i;++i){var o=this.children[i],s=o.chunkSize();if(s>t){var a=Math.min(e,s-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var io=0,ro=t.Doc=function(t,e,n){if(!(this instanceof ro))return new ro(t,e,n);null==n&&(n=0),si.call(this,[new oi([Bn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=vi(),this.frontier=n;var i=Pe(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++io,this.modeOption=e,"string"==typeof t&&(t=bo(t)),ri(this,{from:i,to:i,text:t},null,{head:i,anchor:i})};ro.prototype=Ui(si.prototype,{iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0,r=e.length;r>i;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=hi(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:function(t){var e=Pe(this.first,0),n=this.first+this.size-1;Ie(this,{from:e,to:Pe(n,ui(this,n).text.length),text:bo(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,n,i){e=Ue(this,e),n=n?Ue(this,n):e,We(this,t,e,n,i)},getRange:function(t,e,n){var i=ci(this,Ue(this,t),Ue(this,e));return n===!1?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){Ge(this,t)&&We(this,e,Pe(t,0),Ue(this,Pe(t)))},removeLine:function(t){t?We(this,"",Ue(this,Pe(t-1)),Ue(this,Pe(t))):We(this,"",Pe(0,0),Ue(this,Pe(1,0)))},getLineHandle:function(t){return Ge(this,t)?ui(this,t):void 0},getLineNumber:function(t){return fi(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Ue(this,t)},getCursor:function(t){var e,n=this.sel;return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||t===!1?n.to:n.from,Be(e)},somethingSelected:function(){return!Re(this.sel.head,this.sel.anchor)},setCursor:ne(function(t,e,n){var i=Ue(this,"number"==typeof t?Pe(t,e||0):t);n?Qe(this,i):Xe(this,i,i)}),setSelection:ne(function(t,e){Xe(this,Ue(this,t),Ue(this,e||t))}),extendSelection:ne(function(t,e){Qe(this,Ue(this,t),e&&Ue(this,e))}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,n){Ie(this,{from:this.sel.from,to:this.sel.to,text:bo(t),origin:n},e||"around")},undo:ne(function(){ze(this,"undo")}),redo:ne(function(){ze(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=vi()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null
},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:_i(this.history.done),undone:_i(this.history.undone)}},setHistory:function(t){var e=this.history=vi();e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,n){return Cn(this,Ue(this,t),Ue(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return t=Ue(this,t),Cn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=Ue(this,t);var e=[],n=ui(this,t.line).markedSpans;if(n)for(var i=0;n.length>i;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;n.length>i;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>t?(e=t,!0):(t-=r,++n,void 0)}),Ue(this,Pe(n,e))},indexFromPos:function(t){t=Ue(this,t);var e=t.ch;return t.line<this.first||0>t.ch?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new ro(hi(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&n>t.to&&(n=t.to);var i=new ro(hi(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],i},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;this.linked.length>n;++n){var i=this.linked[n];if(i.doc==e){this.linked.splice(n,1),e.unlinkDoc(this);break}}if(e.history==this.history){var r=[e.id];ai(e,function(t){r.push(t.id)},!0),e.history=vi(),e.history.done=_i(this.history.done,r),e.history.undone=_i(this.history.undone,r)}},iterLinkedDocs:function(t){ai(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ro.prototype.eachLine=ro.prototype.iter;var oo="iter insert remove copy getEditor".split(" ");for(var so in ro.prototype)ro.prototype.hasOwnProperty(so)&&0>Yi(oo,so)&&(t.prototype[so]=function(t){return function(){return t.apply(this.doc,arguments)}}(ro.prototype[so]));t.e_stop=Ai,t.e_preventDefault=Ei,t.e_stopPropagation=Oi;var ao,lo=0;t.on=Ii,t.off=$i,t.signal=zi;var uo=30,co=t.Pass={toString:function(){return"CodeMirror.Pass"}};Wi.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Pi;var ho=[""],fo=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,po=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;t.replaceGetRect=function(t){nr=t};var go=function(){if(vr)return!1;var t=Ji("div");return"draggable"in t||"dragDrop"in t}(),mo=/^$/;pr?mo=/$'/:Cr&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?mo=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:yr&&(mo=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var vo,yo,bo=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;i>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=bo;var wo=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},xo=function(){var t=Ji("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Co={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=Co,function(){for(var t=0;10>t;t++)Co[t+48]=t+"";for(var t=65;90>=t;t++)Co[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Co[t+111]=Co[t+63235]="F"+t}();var _o=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?n.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(e){if(!i.test(e))return!1;for(var n,u=e.length,c=[],h=0;u>h;++h)c.push(n=t(e.charCodeAt(h)));for(var h=0,d=l;u>h;++h){var n=c[h];"m"==n?c[h]=d:d=n}for(var h=0,f=l;u>h;++h){var n=c[h];"1"==n&&"r"==f?c[h]="n":o.test(n)&&(f=n,"r"==n&&(c[h]="R"))}for(var h=1,d=c[0];u-1>h;++h){var n=c[h];"+"==n&&"1"==d&&"1"==c[h+1]?c[h]="1":","!=n||d!=c[h+1]||"1"!=d&&"n"!=d||(c[h]=d),d=n}for(var h=0;u>h;++h){var n=c[h];if(","==n)c[h]="N";else if("%"==n){for(var p=h+1;u>p&&"%"==c[p];++p);for(var g=h&&"!"==c[h-1]||u-1>p&&"1"==c[p]?"1":"N",m=h;p>m;++m)c[m]=g;h=p-1}}for(var h=0,f=l;u>h;++h){var n=c[h];"L"==f&&"1"==n?c[h]="L":o.test(n)&&(f=n)}for(var h=0;u>h;++h)if(r.test(c[h])){for(var p=h+1;u>p&&r.test(c[p]);++p);for(var v="L"==(h?c[h-1]:l),y="L"==(u-1>p?c[p]:l),g=v||y?"L":"R",m=h;p>m;++m)c[m]=g;h=p-1}for(var b,w=[],h=0;u>h;)if(s.test(c[h])){var x=h;for(++h;u>h&&s.test(c[h]);++h);w.push({from:x,to:h,level:0})}else{var C=h,_=w.length;for(++h;u>h&&"L"!=c[h];++h);for(var m=C;h>m;)if(a.test(c[m])){m>C&&w.splice(_,0,{from:C,to:m,level:1});var k=m;for(++m;h>m&&a.test(c[m]);++m);w.splice(_,0,{from:k,to:m,level:2}),C=m}else++m;h>C&&w.splice(_,0,{from:C,to:h,level:1})}return 1==w[0].level&&(b=e.match(/^\s+/))&&(w[0].from=b[0].length,w.unshift({from:0,to:b[0].length,level:0})),1==qi(w).level&&(b=e.match(/\s+$/))&&(qi(w).to-=b[0].length,w.push({from:u-b[0].length,to:u,level:0})),w[0].level!=qi(w).level&&w.push({from:u,to:u,level:w[0].level}),w}}();return t.version="3.11 +",t}();(function(){"use strict";var t=/^(\s*)([*+-]|(\d+)\.)(\s*)/,e="*+-";s.commands.newlineAndIndentContinueMarkdownList=function(n){var i,r=n.getCursor(),o=n.getStateAfter(r.line).list;if(!o||!(i=n.getLine(r.line).match(t)))return n.execCommand("newlineAndIndent"),void 0;var s=i[1],a=i[4],l=e.indexOf(i[2])>=0?i[2]:parseInt(i[3],10)+1+".";n.replaceSelection("\n"+s+l+a,"end")}})(),s.defineMode("xml",function(t,e){function n(t,e){function n(n){return e.tokenize=n,n(t,e)}var r=t.next();if("<"==r){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?n(o("atom","]]>")):null:t.match("--")?n(o("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(s(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=o("meta","?>"),"meta";var a=t.eat("/");b="";for(var l;l=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)b+=l;return b?(w=a?"closeTag":"openTag",e.tokenize=i,"tag"):"error"}if("&"==r){var u;return u=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),u?"atom":"error"}return t.eatWhile(/[^&<]/),null}function i(t,e){var i=t.next();return">"==i||"/"==i&&t.eat(">")?(e.tokenize=n,w=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(w="equals",null):/[\'\"]/.test(i)?(e.tokenize=r(i),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function r(t){return function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=i;break}return"string"}}function o(t,e){return function(i,r){for(;!i.eol();){if(i.match(e)){r.tokenize=n;break}i.next()}return t}}function s(t){return function(e,i){for(var r;null!=(r=e.next());){if("<"==r)return i.tokenize=s(t+1),i.tokenize(e,i);if(">"==r){if(1==t){i.tokenize=n;break}return i.tokenize=s(t-1),i.tokenize(e,i)}}return"meta"}}function a(){for(var t=arguments.length-1;t>=0;t--)x.cc.push(arguments[t])}function l(){return a.apply(null,arguments),!0}function u(t,e){var n=T.doNotIndent.hasOwnProperty(t)||x.context&&x.context.noIndent;x.context={prev:x.context,tagName:t,indent:x.indented,startOfLine:e,noIndent:n}}function c(){x.context&&(x.context=x.context.prev)}function h(t){if("openTag"==t)return x.tagName=b,x.tagStart=C.column(),l(g,d(x.startOfLine));if("closeTag"==t){var e=!1;return x.context?x.context.tagName!=b&&(T.implicitlyClosed.hasOwnProperty(x.context.tagName.toLowerCase())&&c(),e=!x.context||x.context.tagName!=b):e=!0,e&&(_="error"),l(f(e))}return l()}function d(t){return function(e){var n=x.tagName;return x.tagName=x.tagStart=null,"selfcloseTag"==e||"endTag"==e&&T.autoSelfClosers.hasOwnProperty(n.toLowerCase())?(p(n.toLowerCase()),l()):"endTag"==e?(p(n.toLowerCase()),u(n,t),l()):l()}}function f(t){return function(e){return t&&(_="error"),"endTag"==e?(c(),l()):(_="error",l(arguments.callee))}}function p(t){for(var e;;){if(!x.context)return;if(e=x.context.tagName.toLowerCase(),!T.contextGrabbers.hasOwnProperty(e)||!T.contextGrabbers[e].hasOwnProperty(t))return;c()}}function g(t){return"word"==t?(_="attribute",l(m,g)):"endTag"==t||"selfcloseTag"==t?a():(_="error",l(g))}function m(t){return"equals"==t?l(v,g):(T.allowMissing?"word"==t&&(_="attribute"):_="error","endTag"==t||"selfcloseTag"==t?a():l())}function v(t){return"string"==t?l(y):"word"==t&&T.allowUnquoted?(_="string",l()):(_="error","endTag"==t||"selfCloseTag"==t?a():l())}function y(t){return"string"==t?l(y):a()}var b,w,x,C,_,k=t.indentUnit,S=e.multilineTagIndentFactor||1,T=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},M=e.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;_=w=b=null;var n=e.tokenize(t,e);if(e.type=w,(n||w)&&"comment"!=n)for(x=e,C=t;;){var i=e.cc.pop()||h;if(i(w||n))break}return e.startOfLine=!1,_||n},indent:function(t,e,r){var o=t.context;if(t.tokenize!=i&&t.tokenize!=n||o&&o.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return t.tagStart+k*S;if(M&&/<!\[CDATA\[/.test(e))return 0;for(o&&/^<\//.test(e)&&(o=o.prev);o&&!o.startOfLine;)o=o.prev;return o?o.indent+k:0},electricChars:"/",configuration:e.htmlMode?"html":"xml"}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0}),s.defineMode("markdown",function(t,e){function n(t,e,n){return e.f=e.inline=n,n(t,e)}function i(t,e,n){return e.f=e.block=n,n(t,e)}function r(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.quote=0,v||t.f!=a||(t.f=h,t.block=o),t.thisLineHasContent=!1,null}function o(t,r){var o=r.list!==!1;if(r.list!==!1&&r.indentationDiff>=0?(4>r.indentationDiff&&(r.indentation-=r.indentationDiff),r.list=null):r.list!==!1&&r.indentation>0?(r.list=null,r.listDepth=Math.floor(r.indentation/4)):r.list!==!1&&(r.list=!1,r.listDepth=0),r.indentationDiff>=4)return r.indentation-=4,t.skipToEnd(),_;if(t.eatSpace())return null;if("#"===t.peek()||r.prevLineHasContent&&t.match(P))r.header=!0;else if(t.eat(">"))for(r.indentation++,r.quote=1,t.eatSpace();t.eat(">");)t.eatSpace(),r.quote++;else{if("["===t.peek())return n(t,r,f);if(t.match(N,!0))return E;if(r.prevLineHasContent&&!o||!t.match(H,!0)&&!t.match(j,!0)){if(e.fencedCodeBlocks&&t.match(/^```([\w+#]*)/,!0))return r.localMode=w(RegExp.$1),r.localMode&&(r.localState=r.localMode.startState()),i(t,r,l),_}else r.indentation+=4,r.list=!0,r.listDepth++,e.taskLists&&t.match(W,!1)&&(r.taskList=!0)}return n(t,r,r.inline)}function a(t,e){var n=y.token(t,e.htmlState);return v&&"tag"===n&&"openTag"!==e.htmlState.type&&!e.htmlState.context&&(e.f=h,e.block=o),e.md_inside&&-1!=t.current().indexOf(">")&&(e.f=h,e.block=o,e.htmlState.context=void 0),n}function l(t,e){return t.sol()&&t.match(/^```/,!0)?(e.localMode=e.localState=null,e.f=h,e.block=o,_):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),_)}function u(t){var e=[];if(t.taskOpen)return"meta";if(t.taskClosed)return"property";if(t.strong&&e.push(z),t.em&&e.push($),t.linkText&&e.push(F),t.code&&e.push(_),t.header&&e.push(C),t.quote&&e.push(t.quote%2?k:S),t.list!==!1){var n=(t.listDepth-1)%3;n?1===n?e.push(M):e.push(L):e.push(T)}return e.length?e.join(" "):null}function c(t,e){return t.match(R,!0)?u(e):void 0}function h(t,r){var o=r.text(t,r);if(o!==void 0)return o;if(r.list)return r.list=null,u(r);if(r.taskList){var s="x"!==t.match(W,!0)[1];return s?r.taskOpen=!0:r.taskClosed=!0,r.taskList=!1,u(r)}r.taskOpen=!1,r.taskClosed=!1;var l=t.next();if("\\"===l)return t.next(),u(r);if(r.linkTitle){r.linkTitle=!1;var c=l;"("===l&&(c=")"),c=(c+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+c+"\\\\]+|\\\\\\\\|\\\\.)"+c;if(t.match(RegExp(h),!0))return I}if("`"===l){var f=u(r),p=t.pos;t.eatWhile("`");var g=1+t.pos-p;return r.code?g===x?(r.code=!1,f):u(r):(x=g,r.code=!0,u(r))}if(r.code)return u(r);if("!"===l&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=d,O;if("["===l&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,u(r);if("]"===l&&r.linkText){var v=u(r);return r.linkText=!1,r.inline=r.f=d,v}if("<"===l&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return n(t,r,m(A,">"));if("<"===l&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return n(t,r,m(D,">"));if("<"===l&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var y=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(r.md_inside=!0)}return t.backUp(1),i(t,r,a)}if("<"===l&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var b=!1;if(!e.underscoresBreakWords&&"_"===l&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var w=t.pos-2;if(w>=0){var C=t.string.charAt(w);"_"!==C&&C.match(/(\w)/,!1)&&(b=!0)}}var f=u(r);if("*"===l||"_"===l&&!b){if(r.strong===l&&t.eat(l))return r.strong=!1,f;if(!r.strong&&t.eat(l))return r.strong=l,u(r);if(r.em===l)return r.em=!1,f;if(!r.em)return r.em=l,u(r)}else if(" "===l&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return u(r);t.backUp(1)}return u(r)}function d(t,e){if(t.eatSpace())return null;var i=t.next();return"("===i||"["===i?n(t,e,m(I,"("===i?")":"]")):"error"}function f(t,e){return t.match(/^[^\]]*\]:/,!0)?(e.f=p,F):n(t,e,h)}function p(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=h,I)}function g(t){return q[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),q[t]=RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),q[t]}function m(t,e,n){return n=n||h,function(i,r){return i.match(g(e)),r.inline=r.f=n,t}}var v=s.mimeModes.hasOwnProperty("text/html"),y=s.getMode(t,v?"text/html":"text/plain"),b={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},w=function(){var e,n,i={},r={},o=[];for(var a in s.modes)s.modes.propertyIsEnumerable(a)&&o.push(a);for(e=0;o.length>e;e++)i[o[e]]=o[e];var l=[];for(var a in s.mimeModes)s.mimeModes.propertyIsEnumerable(a)&&l.push({mime:a,mode:s.mimeModes[a]});for(e=0;l.length>e;e++)n=l[e].mime,r[n]=l[e].mime;for(var u in b)(b[u]in i||b[u]in r)&&(i[u]=b[u]);return function(e){return i[e]?s.getMode(t,i[e]):null}}();void 0===e.underscoresBreakWords&&(e.underscoresBreakWords=!0),void 0===e.fencedCodeBlocks&&(e.fencedCodeBlocks=!1),void 0===e.taskLists&&(e.taskLists=!1);var x=0,C="header",_="comment",k="atom",S="number",T="variable-2",M="variable-3",L="keyword",E="hr",O="tag",A="link",D="link",F="link",I="string",$="em",z="strong",N=/^([*\-=_])(?:\s*\1){2,}\s*$/,H=/^[*\-+]\s+/,j=/^[0-9]+\.\s+/,W=/^\[(x| )\](?=\s)/,P=/^(?:\={1,}|-{1,})$/,R=/^[^!\[\]*_\\<>` "'(]+/,q=[];return{startState:function(){return{f:o,prevLineHasContent:!1,thisLineHasContent:!1,block:o,htmlState:s.startState(y),indentation:0,inline:h,text:c,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:s.copyState(y,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?s.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,md_inside:t.md_inside}},token:function(t,e){if(t.sol()){if(t.match(/^\s*$/,!0))return e.prevLineHasContent=!1,r(e);e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.header=!1,e.taskList=!1,e.code=!1,e.f=e.block;var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((n-e.indentation)/4);i>4&&(i=4);var o=e.indentation+i;if(e.indentationDiff=o-e.indentation,e.indentation=o,n>0)return null}return e.f(t,e)},blankLine:r,getType:u}},"xml"),s.defineMIME("text/x-markdown","markdown");var a={bold:"Cmd-B",italic:"Cmd-I",link:"Cmd-K",image:"Cmd-Alt-I",quote:"Cmd-'","ordered-list":"Cmd-Alt-L","unordered-list":"Cmd-L",undo:"Cmd-Z",redo:"Cmd-Y"},l=["bold","italic","|","quote","unordered-list","ordered-list","|","link","image","|","undo","redo","|",{name:"info",action:"http://lab.lepture.com/editor/markdown"},"preview","fullscreen"],u=/Mac/.test(navigator.platform);e.prototype.init=function(t){t=t||{},t.element&&(this.element=t.element),t.toolbar=t.toolbar||l,t.hasOwnProperty("status")||(t.status=["lines","words","cursor"]),this.options=t,this.element&&this.render(this.element)},e.prototype.render=function(t){t||(t=this.element||document.getElementsByTagName("textarea")[0]),this.element=t;var e=this.options,n=this,r={};for(var o in a)(function(t){r[i(a[t])]=function(e){n.action(t,e)}})(o);r.Enter="newlineAndIndentContinueMarkdownList",this.codemirror=s.fromTextArea(t,{mode:"markdown",theme:"paper",indentWithTabs:!0,lineNumbers:!1,lineWrapping:!0,extraKeys:r}),e.toolbar!==!1&&this.createToolbar(),e.status!==!1&&this.createStatusbar(),this.codemirror.refresh()},e.prototype.createToolbar=function(t){if(t=t||this.options.toolbar,t&&0!==t.length){var e=document.createElement("div");e.className="editor-toolbar";var i,r=this;r.toolbar={};for(var o=0;t.length>o;o++)(function(t){var n,o,s,a;t.name?(n=t.name,o=t.shortcut,s=t.action,a=t.className):n=t,i=c(n,{className:a,shortcut:o}),s?"function"==typeof s?i.onclick=s:"string"==typeof s&&(i.href=s,i.target="_blank"):i.onclick=function(){return r.action(n)},r.toolbar[n]=i,e.appendChild(i)})(t[o]);var s=this.codemirror;s.on("cursorActivity",function(){var t=n(s);for(var e in r.toolbar)(function(e){var n=r.toolbar[e];t[e]?n.classList.add("active"):n.classList.remove("active")})(e)});var a=s.getWrapperElement();return a.parentNode.insertBefore(e,a),e}},e.prototype.createStatusbar=function(t){if(t=t||this.options.status,t&&0!==t.length){var e=document.createElement("div");e.className="editor-statusbar";for(var n,i=this.codemirror,r=0;t.length>r;r++)(function(t){var r=document.createElement("span");r.className=t,"words"===t?(r.innerHTML="0",i.on("update",function(){r.innerHTML=i.getValue().length})):"lines"===t?(r.innerHTML="0",i.on("update",function(){r.innerHTML=i.lineCount()})):"cursor"===t&&(r.innerHTML="1:1",i.on("cursorActivity",function(){n=i.getCursor(),r.innerHTML=n.line+1+":"+(n.ch+1)})),e.appendChild(r)})(t[r]);var o=this.codemirror.getWrapperElement();return o.parentNode.insertBefore(e,o.nextSibling),e}},e.prototype.action=function(t,e){if(e=e||this.codemirror){var i=n(e),r=function(n,r){var o,s=e.getCursor("start"),a=e.getCursor("end");return i[t]?(o=e.getLine(s.line),n=o.slice(0,s.ch),r=o.slice(s.ch),"bold"===t?(n=n.replace(/^(.*)?(\*|\_){2}(\S+.*)?$/,"$1$3"),r=r.replace(/^(.*\S+)?(\*|\_){2}(\s+.*)?$/,"$1$3"),s.ch-=2,a.ch-=2):"italic"===t&&(n=n.replace(/^(.*)?(\*|\_)(\S+.*)?$/,"$1$3"),r=r.replace(/^(.*\S+)?(\*|\_)(\s+.*)?$/,"$1$3"),s.ch-=1,a.ch-=1),e.setLine(s.line,n+r),e.setSelection(s,a),e.focus(),void 0):(r=null===r?"":r||n,o=e.getSelection(),e.replaceSelection(n+o+r),s.ch+=n.length,a.ch+=n.length,e.setSelection(s,a),e.focus(),void 0)},s=function(){for(var n=e.getCursor("start"),r=e.getCursor("end"),o={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},s={quote:"> ","unordered-list":"* ","ordered-list":"1. "},a=n.line;r.line>=a;a++)(function(n){var r=e.getLine(n);r=i[t]?r.replace(o[t],"$1"):s[t]+r,e.setLine(n,r)})(a);e.focus()};switch(t){case"bold":r("**");break;case"italic":r("*");break;case"code":r("    ");break;case"link":r("[","](http://)");break;case"image":r("![","](http://)");break;case"quote":case"unordered-list":case"ordered-list":s();break;case"undo":e.undo(),e.focus();break;case"redo":e.redo(),e.focus();break;case"fullscreen":o(e.getWrapperElement())}}};var c=function(t,e){e=e||{};var n;if("|"===t)return n=document.createElement("i"),n.className="separator",n.innerHTML="|",n;n=document.createElement("a"),n.className=e.className||"icon-"+t,n.title=e.title||r(t);var o=e.shortcut||a[t];return o&&(o=i(o),n.title+=" ● "+o,u&&(n.title=n.title.replace("Cmd","⌘").replace("Shift","⇧").replace("Alt","⌥"))),n};t.Editor=e}(this),function(t,e){"use strict";function n(){for(var t={},e=arguments.length-1;e>=0;e--){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}e.inlineAttach=function(t,i){function r(t,e){return(t+"\n\n[[D]]"+e).replace(/(\n{2,})\[\[D\]\]/,"\n\n").replace(/^(\n*)/,"")}var o,s=n(t,inlineAttach.defaults),a=i,l="{filename}",u=this;this.uploadFile=function(t){var e=new FormData,n=new XMLHttpRequest;e.append(s.uploadFieldName,t,"image-"+Date.now()+".png"),n.open("POST",s.uploadUrl),n.onload=function(){if(200===n.status||201===n.status){var t=JSON.parse(n.responseText);u.onUploadedFile(t)}else u.onErrorUploading()},n.send(e)},this.isAllowedFile=function(t){return s.allowedTypes.indexOf(t.type)>=0},this.onUploadedFile=function(t){var e=s.onUploadedFile(t),n=t[s.downloadFieldName];if(e!==!1&&n){var i=a.getValue().replace(o,s.urlText.replace(l,n));a.setValue(i)}},this.customUploadHandler=function(t){return s.customUploadHandler(t)},this.onErrorUploading=function(){var t=a.getValue().replace(o,"");a.setValue(t),s.customErrorHandler()&&e.alert(s.errorText)},this.onReceivedFile=function(t){var e=s.onReceivedFile(t);e!==!1&&(o=s.progressText,a.setValue(r(a.getValue(),o)))},this.onPaste=function(t){var e=!1,n=t.clipboardData;if("object"==typeof n&&null!==n.items)for(var i=0;n.items.length>i;i++){var r=n.items[i];u.isAllowedFile(r)&&(e=!0,this.onReceivedFile(r.getAsFile()),this.customUploadHandler(r.getAsFile())&&this.uploadFile(r.getAsFile()))}return e},this.onDrop=function(t){for(var e=!1,n=0;t.dataTransfer.files.length>n;n++){var i=t.dataTransfer.files[n];u.isAllowedFile(i)&&(e=!0,this.onReceivedFile(i),this.customUploadHandler(i)&&this.uploadFile(i))}return e}},e.inlineAttach.Editor=function(t){var e=t;return{getValue:function(){return e.value},setValue:function(t){e.value=t}}},e.inlineAttach.defaults={uploadUrl:"upload_attachment.php",uploadFieldName:"file",downloadFieldName:"filename",allowedTypes:["image/jpeg","image/png","image/jpg","image/gif"],progressText:"![Uploading file...]()",urlText:"![file]({filename})",onReceivedFile:function(){},customUploadHandler:function(){return!0},customErrorHandler:function(){return!0},errorText:"Error uploading file",onUploadedFile:function(){}},e.inlineAttach.attachToInput=function(t,e){e=e||{};var n=new inlineAttach.Editor(t),i=new inlineAttach(e,n);t.addEventListener("paste",function(t){i.onPaste(t)},!1),t.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),i.onDrop(t)},!1),t.addEventListener("dragenter",function(t){t.stopPropagation(),t.preventDefault()},!1),t.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault()},!1)}}(document,window),function(t,e){"use strict";function n(t){if(!t.getWrapperElement)throw"Invalid CodeMirror object given";var e=t;return{getValue:function(){return e.getValue()},setValue:function(t){var n=e.getCursor();e.setValue(t),e.setCursor(n)}}}n.prototype=new inlineAttach.Editor,e.inlineAttach.attachToCodeMirror=function(t,e){e=e||{};var i=new n(t),r=new inlineAttach(e,i),o=t.getWrapperElement();o.addEventListener("paste",function(t){r.onPaste(t)},!1),t.setOption("onDragEvent",function(t,e){return"drop"===e.type?(e.stopPropagation(),e.preventDefault(),r.onDrop(e)):void 0})}}(document,window),function(t){"use strict";function e(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function n(t,e){return t<<e|t>>>32-e}function i(t,i,r,o,s,a){return e(n(e(e(i,t),e(o,a)),s),r)}function r(t,e,n,r,o,s,a){return i(e&n|~e&r,t,e,o,s,a)}function o(t,e,n,r,o,s,a){return i(e&r|n&~r,t,e,o,s,a)}function s(t,e,n,r,o,s,a){return i(e^n^r,t,e,o,s,a)}function a(t,e,n,r,o,s,a){return i(n^(e|~r),t,e,o,s,a)}function l(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var i,l,u,c,h,d=1732584193,f=-271733879,p=-1732584194,g=271733878;for(i=0;t.length>i;i+=16)l=d,u=f,c=p,h=g,d=r(d,f,p,g,t[i],7,-680876936),g=r(g,d,f,p,t[i+1],12,-389564586),p=r(p,g,d,f,t[i+2],17,606105819),f=r(f,p,g,d,t[i+3],22,-1044525330),d=r(d,f,p,g,t[i+4],7,-176418897),g=r(g,d,f,p,t[i+5],12,1200080426),p=r(p,g,d,f,t[i+6],17,-1473231341),f=r(f,p,g,d,t[i+7],22,-45705983),d=r(d,f,p,g,t[i+8],7,1770035416),g=r(g,d,f,p,t[i+9],12,-1958414417),p=r(p,g,d,f,t[i+10],17,-42063),f=r(f,p,g,d,t[i+11],22,-1990404162),d=r(d,f,p,g,t[i+12],7,1804603682),g=r(g,d,f,p,t[i+13],12,-40341101),p=r(p,g,d,f,t[i+14],17,-1502002290),f=r(f,p,g,d,t[i+15],22,1236535329),d=o(d,f,p,g,t[i+1],5,-165796510),g=o(g,d,f,p,t[i+6],9,-1069501632),p=o(p,g,d,f,t[i+11],14,643717713),f=o(f,p,g,d,t[i],20,-373897302),d=o(d,f,p,g,t[i+5],5,-701558691),g=o(g,d,f,p,t[i+10],9,38016083),p=o(p,g,d,f,t[i+15],14,-660478335),f=o(f,p,g,d,t[i+4],20,-405537848),d=o(d,f,p,g,t[i+9],5,568446438),g=o(g,d,f,p,t[i+14],9,-1019803690),p=o(p,g,d,f,t[i+3],14,-187363961),f=o(f,p,g,d,t[i+8],20,1163531501),d=o(d,f,p,g,t[i+13],5,-1444681467),g=o(g,d,f,p,t[i+2],9,-51403784),p=o(p,g,d,f,t[i+7],14,1735328473),f=o(f,p,g,d,t[i+12],20,-1926607734),d=s(d,f,p,g,t[i+5],4,-378558),g=s(g,d,f,p,t[i+8],11,-2022574463),p=s(p,g,d,f,t[i+11],16,1839030562),f=s(f,p,g,d,t[i+14],23,-35309556),d=s(d,f,p,g,t[i+1],4,-1530992060),g=s(g,d,f,p,t[i+4],11,1272893353),p=s(p,g,d,f,t[i+7],16,-155497632),f=s(f,p,g,d,t[i+10],23,-1094730640),d=s(d,f,p,g,t[i+13],4,681279174),g=s(g,d,f,p,t[i],11,-358537222),p=s(p,g,d,f,t[i+3],16,-722521979),f=s(f,p,g,d,t[i+6],23,76029189),d=s(d,f,p,g,t[i+9],4,-640364487),g=s(g,d,f,p,t[i+12],11,-421815835),p=s(p,g,d,f,t[i+15],16,530742520),f=s(f,p,g,d,t[i+2],23,-995338651),d=a(d,f,p,g,t[i],6,-198630844),g=a(g,d,f,p,t[i+7],10,1126891415),p=a(p,g,d,f,t[i+14],15,-1416354905),f=a(f,p,g,d,t[i+5],21,-57434055),d=a(d,f,p,g,t[i+12],6,1700485571),g=a(g,d,f,p,t[i+3],10,-1894986606),p=a(p,g,d,f,t[i+10],15,-1051523),f=a(f,p,g,d,t[i+1],21,-2054922799),d=a(d,f,p,g,t[i+8],6,1873313359),g=a(g,d,f,p,t[i+15],10,-30611744),p=a(p,g,d,f,t[i+6],15,-1560198380),f=a(f,p,g,d,t[i+13],21,1309151649),d=a(d,f,p,g,t[i+4],6,-145523070),g=a(g,d,f,p,t[i+11],10,-1120210379),p=a(p,g,d,f,t[i+2],15,718787259),f=a(f,p,g,d,t[i+9],21,-343485551),d=e(d,l),f=e(f,u),p=e(p,c),g=e(g,h);return[d,f,p,g]}function u(t){var e,n="";for(e=0;32*t.length>e;e+=8)n+=String.fromCharCode(255&t[e>>5]>>>e%32);return n}function c(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;n.length>e;e+=1)n[e]=0;for(e=0;8*t.length>e;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function h(t){return u(l(c(t),8*t.length))}function d(t,e){var n,i,r=c(t),o=[],s=[];for(o[15]=s[15]=void 0,r.length>16&&(r=l(r,8*t.length)),n=0;16>n;n+=1)o[n]=909522486^r[n],s[n]=1549556828^r[n];return i=l(o.concat(c(e)),512+8*e.length),u(l(s.concat(i),640))}function f(t){var e,n,i="0123456789abcdef",r="";for(n=0;t.length>n;n+=1)e=t.charCodeAt(n),r+=i.charAt(15&e>>>4)+i.charAt(15&e);return r}function p(t){return unescape(encodeURIComponent(t))}function g(t){return h(p(t))}function m(t){return f(g(t))}function v(t,e){return d(p(t),p(e))}function y(t,e){return f(v(t,e))}function b(t,e,n){return e?n?v(e,t):y(e,t):n?g(t):m(t)}"function"==typeof define&&define.amd?define(function(){return b}):t.md5=b}(this),function(){function t(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(t)try{window.localStorage&&(x=window.localStorage,k="localStorage",M=x.jStorage_update)}catch(r){}else if("globalStorage"in window)try{window.globalStorage&&(x="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],k="globalStorage",M=x.jStorage_update)}catch(o){}else{if(C=document.createElement("link"),!C.addBehavior)return C=null,void 0;C.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(C);try{C.load("jStorage")}catch(s){C.setAttribute("jStorage","{}"),C.save("jStorage"),C.load("jStorage")}var l="{}";try{l=C.getAttribute("jStorage")}catch(u){}try{M=C.getAttribute("jStorage_update")}catch(d){}x.jStorage=l,k="userDataBehavior"}a(),c(),n(),h(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&i()},!1)}function e(){var t="{}";if("userDataBehavior"==k){C.load("jStorage");try{t=C.getAttribute("jStorage")}catch(e){}try{M=C.getAttribute("jStorage_update")}catch(n){}x.jStorage=t}a(),c(),h()}function n(){"localStorage"==k||"globalStorage"==k?"addEventListener"in window?window.addEventListener("storage",i,!1):document.attachEvent("onstorage",i):"userDataBehavior"==k&&setInterval(i,1e3)}function i(){var t;clearTimeout(T),T=setTimeout(function(){if("localStorage"==k||"globalStorage"==k)t=x.jStorage_update;else if("userDataBehavior"==k){C.load("jStorage");try{t=C.getAttribute("jStorage_update")}catch(e){}}t&&t!=M&&(M=t,r())},25)}function r(){var t,n=y.parse(y.stringify(w.__jstorage_meta.CRC32));e(),t=y.parse(y.stringify(w.__jstorage_meta.CRC32));var i,r=[],s=[];for(i in n)if(n.hasOwnProperty(i)){if(!t[i]){s.push(i);
continue}n[i]!=t[i]&&"2."==(n[i]+"").substr(0,2)&&r.push(i)}for(i in t)t.hasOwnProperty(i)&&(n[i]||r.push(i));o(r,"updated"),o(s,"deleted")}function o(t,e){if(t=[].concat(t||[]),"flushed"==e){t=[];for(var n in S)S.hasOwnProperty(n)&&t.push(n);e="deleted"}for(var i=0,r=t.length;r>i;i++){if(S[t[i]])for(var o=0,s=S[t[i]].length;s>o;o++)S[t[i]][o](t[i],e);if(S["*"])for(var o=0,s=S["*"].length;s>o;o++)S["*"][o](t[i],e)}}function s(){var t=""+ +new Date;if("localStorage"==k||"globalStorage"==k)try{x.jStorage_update=t}catch(e){k=!1}else"userDataBehavior"==k&&(C.setAttribute("jStorage_update",t),C.save("jStorage"));i()}function a(){if(x.jStorage)try{w=y.parse(x.jStorage+"")}catch(t){x.jStorage="{}"}else x.jStorage="{}";_=x.jStorage?(x.jStorage+"").length:0,w.__jstorage_meta||(w.__jstorage_meta={}),w.__jstorage_meta.CRC32||(w.__jstorage_meta.CRC32={})}function l(){f();try{x.jStorage=y.stringify(w),C&&(C.setAttribute("jStorage",x.jStorage),C.save("jStorage")),_=x.jStorage?(x.jStorage+"").length:0}catch(t){}}function u(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function c(){var t,e,n,i,r=1/0,a=!1,u=[];if(clearTimeout(b),w.__jstorage_meta&&"object"==typeof w.__jstorage_meta.TTL){t=+new Date,n=w.__jstorage_meta.TTL,i=w.__jstorage_meta.CRC32;for(e in n)n.hasOwnProperty(e)&&(t>=n[e]?(delete n[e],delete i[e],delete w[e],a=!0,u.push(e)):r>n[e]&&(r=n[e]));1/0!=r&&(b=setTimeout(c,r-t)),a&&(l(),s(),o(u,"deleted"))}}function h(){var t,e;if(w.__jstorage_meta.PubSub){var n,i=E;for(t=e=w.__jstorage_meta.PubSub.length-1;t>=0;t--)n=w.__jstorage_meta.PubSub[t],n[0]>E&&(i=n[0],d(n[1],n[2]));E=i}}function d(t,e){if(L[t])for(var n=0,i=L[t].length;i>n;n++)try{L[t][n](t,y.parse(y.stringify(e)))}catch(r){}}function f(){if(w.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,n=w.__jstorage_meta.PubSub.length;n>e;e++)if(t>=w.__jstorage_meta.PubSub[e][0]){w.__jstorage_meta.PubSub.splice(e,w.__jstorage_meta.PubSub.length-e);break}w.__jstorage_meta.PubSub.length||delete w.__jstorage_meta.PubSub}}function p(t,e){w.__jstorage_meta||(w.__jstorage_meta={}),w.__jstorage_meta.PubSub||(w.__jstorage_meta.PubSub=[]),w.__jstorage_meta.PubSub.unshift([+new Date,t,e]),l(),s()}function g(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24,n=1540483477*(65535&n)+((65535&1540483477*(n>>>16))<<16),n^=n>>>24,n=1540483477*(65535&n)+((65535&1540483477*(n>>>16))<<16),r=1540483477*(65535&r)+((65535&1540483477*(r>>>16))<<16)^n,i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r^=255&t.charCodeAt(o),r=1540483477*(65535&r)+((65535&1540483477*(r>>>16))<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((65535&1540483477*(r>>>16))<<16),r^=r>>>15,r>>>0}var m="0.4.8",v=window.jQuery||window.$||(window.$={}),y={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return(t+"").evalJSON()}||v.parseJSON||v.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||v.toJSON};if(!("parse"in y&&"stringify"in y))throw Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var b,w={__jstorage_meta:{CRC32:{}}},x={jStorage:"{}"},C=null,_=0,k=!1,S={},T=!1,M=0,L={},E=+new Date,O={isXML:function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(n){}}return!1},decode:function(t){var e,n="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return n?(e=n.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),this.isXML(e)?e:!1):!1}};v.jStorage={version:m,set:function(t,e,n){if(u(t),n=n||{},e===void 0)return this.deleteKey(t),e;if(O.isXML(e))e={_is_xml:!0,xml:O.encode(e)};else{if("function"==typeof e)return void 0;e&&"object"==typeof e&&(e=y.parse(y.stringify(e)))}return w[t]=e,w.__jstorage_meta.CRC32[t]="2."+g(y.stringify(e),2538058380),this.setTTL(t,n.TTL||0),o(t,"updated"),e},get:function(t,e){return u(t),t in w?w[t]&&"object"==typeof w[t]&&w[t]._is_xml?O.decode(w[t].xml):w[t]:e===void 0?null:e},deleteKey:function(t){return u(t),t in w?(delete w[t],"object"==typeof w.__jstorage_meta.TTL&&t in w.__jstorage_meta.TTL&&delete w.__jstorage_meta.TTL[t],delete w.__jstorage_meta.CRC32[t],l(),s(),o(t,"deleted"),!0):!1},setTTL:function(t,e){var n=+new Date;return u(t),e=Number(e)||0,t in w?(w.__jstorage_meta.TTL||(w.__jstorage_meta.TTL={}),e>0?w.__jstorage_meta.TTL[t]=n+e:delete w.__jstorage_meta.TTL[t],l(),c(),s(),!0):!1},getTTL:function(t){var e,n=+new Date;return u(t),t in w&&w.__jstorage_meta.TTL&&w.__jstorage_meta.TTL[t]?(e=w.__jstorage_meta.TTL[t]-n,e||0):0},flush:function(){return w={__jstorage_meta:{CRC32:{}}},l(),s(),o(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=w,new t},index:function(){var t,e=[];for(t in w)w.hasOwnProperty(t)&&"__jstorage_meta"!=t&&e.push(t);return e},storageSize:function(){return _},currentBackend:function(){return k},storageAvailable:function(){return!!k},listenKeyChange:function(t,e){u(t),S[t]||(S[t]=[]),S[t].push(e)},stopListening:function(t,e){if(u(t),S[t]){if(!e)return delete S[t],void 0;for(var n=S[t].length-1;n>=0;n--)S[t][n]==e&&S[t].splice(n,1)}},subscribe:function(t,e){if(t=""+(t||""),!t)throw new TypeError("Channel not defined");L[t]||(L[t]=[]),L[t].push(e)},publish:function(t,e){if(t=""+(t||""),!t)throw new TypeError("Channel not defined");p(t,e)},reInit:function(){e()},noConflict:function(t){return delete window.$.jStorage,t&&(window.jStorage=this),this}},t()}(),!jQuery)throw Error("Bootstrap requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(window.jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){o.trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i)};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",r=n.data();t+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var e=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===e.prop("type")&&t.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new e(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(window.jQuery),+function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,i=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),r=n||i[e](),o=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}this.sliding=!0,o&&this.pause();var u=t.Event("slide.bs.carousel",{relatedTarget:r[0],direction:s});if(!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(u),u.isDefaultPrevented())return;r.addClass(e),r[0].offsetWidth,i.addClass(s),r.addClass(s),i.one(t.support.transition.end,function(){r.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(u),u.isDefaultPrevented())return;i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new e(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},r.data(),i.data()),s=i.attr("data-slide-to");s&&(o.interval=!1),r.carousel(o),(s=i.attr("data-slide-to"))&&r.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var s=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?(this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350),void 0):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);r||i.data("bs.collapse",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(r),s=o.data("bs.collapse"),a=s?"toggle":i.data(),l=i.attr("data-parent"),u=l&&t(l);s&&s.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(a)})}(window.jQuery),+function(t){"use strict";function e(){t(i).remove(),t(r).each(function(e){var i=n(t(this));i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown")),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=n(r),s=o.hasClass("open");if(e(),!s){if("ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e),o.trigger(i=t.Event("show.bs.dropdown")),i.isDefaultPrevented())return;o.toggleClass("open").trigger("shown.bs.dropdown"),r.focus()}return!1}},o.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),s=o.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&o.find(r).focus(),i.click();var a=t("[role=menu] li:not(.divider):visible a",o);if(a.length){var l=a.index(a.filter(":focus"));38==e.keyCode&&l>0&&l--,40==e.keyCode&&a.length-1>l&&l++,~l||(l=0),a.eq(l).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu]",o.prototype.keydown)}(window.jQuery),+function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new e(this,s)),"string"==typeof n?o[n](i):s.show&&o.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(o,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focus",l="hover"==s?"mouseleave":"blur";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,r=/\s?auto?\s?/i,o=r.test(i);o&&(i=i.replace(r,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition(),a=n[0].offsetWidth,l=n[0].offsetHeight;if(o){var u=this.$element.parent(),c=i,h=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:u.outerWidth(),f="body"==this.options.container?window.innerHeight:u.outerHeight(),p="body"==this.options.container?0:u.offset().left;i="bottom"==i&&s.top+s.height+l-h>f?"top":"top"==i&&0>s.top-h-l?"bottom":"right"==i&&s.right+a>d?"left":"left"==i&&p>s.left-a?"right":i,n.removeClass(c).addClass(i)}var g=this.getCalculatedOffset(i,s,a,l);this.applyPlacement(g,i),this.$element.trigger("shown.bs."+this.type)}},e.prototype.applyPlacement=function(t,e){var n,i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top=t.top+s,t.left=t.left+a,i.offset(t).addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;if("top"==e&&u!=o&&(n=!0,t.top=t.top+o-u),/bottom|top/.test(e)){var c=0;0>t.left&&(c=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,u=i[0].offsetHeight),this.replaceArrow(c-r+l,l,"left")}else this.replaceArrow(u-o,u,"top");n&&i.offset(t)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof n&&n;r||i.data("bs.tooltip",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof n&&n;r||i.data("bs.popover",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),+function(t){"use strict";function e(n,i){var r,o=t.proxy(this.process,this);this.$element=t(n).is("body")?t(window):t(n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",o),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||(r=t(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var n=this;this.$body.find(this.selector).map(function(){var i=t(this),r=i.data("target")||i.attr("href"),o=/^#\w/.test(r)&&t(r);return o&&o.length&&[[o[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=o.last()[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||r[t+1]>=e)&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parents(".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.attr("data-target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var s=t(i);this.activate(e.parent("li"),n),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),+function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=null,this.checkPosition()
};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top()),"function"==typeof a&&(a=o.bottom());var l=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;this.affixed!==l&&(this.unpin&&this.$element.css("top",""),this.affixed=l,this.unpin="bottom"==l?r.top-i:null,this.$element.removeClass(e.RESET).addClass("affix"+(l?"-"+l:"")),"bottom"==l&&this.$element.offset({top:document.body.offsetHeight-a-this.$element.height()}))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),function(t,e,n){(function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.qtip&&t(jQuery)})(function(r){function o(t,e,n,i){this.id=n,this.target=t,this.tooltip=A,this.elements=elements={target:t},this._id=B+"-"+n,this.timers={img:{}},this.options=e,this.plugins={},this.cache=cache={event:{},target:r(),disabled:O,attr:i,onTooltip:O,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=O}function s(t){return t===A||"object"!==r.type(t)}function a(t){return!(r.isFunction(t)||t&&t.attr||t.length||"object"===r.type(t)&&(t.jquery||t.then))}function l(t){var e,n,i,o;return s(t)?O:(s(t.metadata)&&(t.metadata={type:t.metadata}),"content"in t&&(e=t.content,s(e)||e.jquery||e.done?e=t.content={text:n=a(e)?O:e}:n=e.text,"ajax"in e&&(i=e.ajax,o=i&&i.once!==O,delete e.ajax,e.text=function(t,e){var s=n||r(this).attr(e.options.content.attr)||"Loading...",a=r.ajax(r.extend({},i,{context:e})).then(i.success,A,i.error).then(function(t){return t&&o&&e.set("content.text",t),t},function(t,n,i){e.destroyed||0===t.status||e.set("content.text",n+": "+i)});return o?s:(e.set("content.text",s),a)}),"title"in e&&(s(e.title)||(e.button=e.title.button,e.title=e.title.text),a(e.title||O)&&(e.title=O))),"position"in t&&s(t.position)&&(t.position={my:t.position,at:t.position}),"show"in t&&s(t.show)&&(t.show=t.show.jquery?{target:t.show}:t.show===E?{ready:E}:{event:t.show}),"hide"in t&&s(t.hide)&&(t.hide=t.hide.jquery?{target:t.hide}:{event:t.hide}),"style"in t&&s(t.style)&&(t.style={classes:t.style}),r.each(q,function(){this.sanitize&&this.sanitize(t)}),t)}function u(t,e){for(var n,i=0,r=t,o=e.split(".");r=r[o[i++]];)o.length>i&&(n=r);return[n||t,o.pop()]}function c(t,e){var n,i,r;for(n in this.checks)for(i in this.checks[n])(r=RegExp(i,"i").exec(t))&&(e.push(r),("builtin"===n||this.plugins[n])&&this.checks[n][i].apply(this.plugins[n]||this,e))}function h(t){return V.concat("").join(t?"-"+t+" ":" ")}function d(t){if(this.tooltip.hasClass(te))return O;clearTimeout(this.timers.show),clearTimeout(this.timers.hide);var e=r.proxy(function(){this.toggle(E,t)},this);this.options.show.delay>0?this.timers.show=setTimeout(e,this.options.show.delay):e()}function f(t){if(this.tooltip.hasClass(te))return O;var e=r(t.relatedTarget),n=e.closest(G)[0]===this.tooltip[0],i=e[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==e[0]&&"mouse"===this.options.position.target&&n||this.options.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(n||i))try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}else{var s=r.proxy(function(){this.toggle(O,t)},this);this.options.hide.delay>0?this.timers.hide=setTimeout(s,this.options.hide.delay):s()}}function p(t){return this.tooltip.hasClass(te)||!this.options.hide.inactive?O:(clearTimeout(this.timers.inactive),this.timers.inactive=setTimeout(r.proxy(function(){this.hide(t)},this),this.options.hide.inactive),n)}function g(t){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(t)}function m(t,n,i){r(e.body).delegate(t,(n.split?n:n.join(se+" "))+se,function(){var t=k.api[r.attr(this,U)];t&&!t.disabled&&i.apply(t,arguments)})}function v(t,n,i){var s,a,u,c,h,d=r(e.body),f=t[0]===e?d:t,p=t.metadata?t.metadata(i.metadata):A,g="html5"===i.metadata.type&&p?p[i.metadata.name]:A,m=t.data(i.metadata.name||"qtipopts");try{m="string"==typeof m?r.parseJSON(m):m}catch(v){}if(c=r.extend(E,{},k.defaults,i,"object"==typeof m?l(m):A,l(g||p)),a=c.position,c.id=n,"boolean"==typeof c.content.text){if(u=t.attr(c.content.attr),c.content.attr===O||!u)return O;c.content.text=u}if(a.container.length||(a.container=d),a.target===O&&(a.target=f),c.show.target===O&&(c.show.target=f),c.show.solo===E&&(c.show.solo=a.container.closest("body")),c.hide.target===O&&(c.hide.target=f),c.position.viewport===E&&(c.position.viewport=a.container),a.container=a.container.eq(0),a.at=new T(a.at,E),a.my=new T(a.my),t.data(B))if(c.overwrite)t.qtip("destroy");else if(c.overwrite===O)return O;return t.attr(Y,n),c.suppress&&(h=t.attr("title"))&&t.removeAttr("title").attr(ne,h).attr("title",""),s=new o(t,c,n,!!u),t.data(B,s),t.one("remove.qtip-"+n+" removeqtip.qtip-"+n,function(){var t;(t=r(this).data(B))&&t.destroy()}),s}function y(t){return t.charAt(0).toUpperCase()+t.slice(1)}function b(t,e){var i,r,o=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+ve.join(o+" ")+o).split(" "),a=0;if(me[e])return t.css(me[e]);for(;i=s[a++];)if((r=t.css(i))!==n)return me[e]=i,r}function w(t,e){return parseInt(b(t,e),10)}function x(t,e){this._ns="tip",this.options=e,this.offset=e.offset,this.size=[e.width,e.height],this.init(this.qtip=t)}function C(t,e){this.options=e,this._ns="-modal",this.init(this.qtip=t)}function _(t){this._ns="ie6",this.init(this.qtip=t)}var k,S,T,M,L,E=!0,O=!1,A=null,D="x",F="y",I="width",$="height",z="top",N="left",H="bottom",j="right",W="center",P="flipinvert",R="shift",q={},B="qtip",Y="data-hasqtip",U="data-qtip-id",V=["ui-widget","ui-tooltip"],G="."+B,Q="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),K=B+"-fixed",X=B+"-default",J=B+"-focus",Z=B+"-hover",te=B+"-disabled",ee="_replacedByqTip",ne="oldtitle";BROWSER={ie:function(){for(var t=3,n=e.createElement("div");(n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n.getElementsByTagName("i")[0];);return t>4?t:0/0}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||O},S=o.prototype,S.render=function(t){if(this.rendered||this.destroyed)return this;var e=this,n=this.options,i=this.cache,o=this.elements,s=n.content.text,a=n.content.title,l=n.content.button,u=n.position,c="."+this._id+" ",h=[];return r.attr(this.target[0],"aria-describedby",this._id),this.tooltip=o.tooltip=tooltip=r("<div/>",{id:this._id,"class":[B,X,n.style.classes,B+"-pos-"+n.position.my.abbrev()].join(" "),width:n.style.width||"",height:n.style.height||"",tracking:"mouse"===u.target&&u.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":O,"aria-describedby":this._id+"-content","aria-hidden":E}).toggleClass(te,this.disabled).attr(U,this.id).data(B,this).appendTo(u.container).append(o.content=r("<div />",{"class":B+"-content",id:this._id+"-content","aria-atomic":E})),this.rendered=-1,this.positioning=E,a&&(this._createTitle(),r.isFunction(a)||h.push(this._updateTitle(a,O))),l&&this._createButton(),r.isFunction(s)||h.push(this._updateContent(s,O)),this.rendered=E,this._setWidget(),r.each(n.events,function(t,e){r.isFunction(e)&&tooltip.bind(("toggle"===t?["tooltipshow","tooltiphide"]:["tooltip"+t]).join(c)+c,e)}),r.each(q,function(t){var n;"render"===this.initialize&&(n=this(e))&&(e.plugins[t]=n)}),this._assignEvents(),r.when.apply(r,h).then(function(){e._trigger("render"),e.positioning=O,e.hiddenDuringWait||!n.show.ready&&!t||e.toggle(E,i.event,O),e.hiddenDuringWait=O}),k.api[this.id]=this,this},S.destroy=function(t){function e(){if(!this.destroyed){this.destroyed=E;var t=this.target,e=t.attr(ne);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),r.each(this.plugins,function(){this.destroy&&this.destroy()}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),t.removeData(B).removeAttr(U).removeAttr("aria-describedby"),this.options.suppress&&e&&t.attr("title",e).removeAttr(ne),this._unbind(t),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=A,delete k.api[this.id]}}return this.destroyed?this.target:(t!==E&&this.rendered?(tooltip.one("tooltiphidden",r.proxy(e,this)),!this.triggering&&this.hide()):e.call(this),this.target)},M=S.checks={builtin:{"^id$":function(t,e,n,i){var o=n===E?k.nextid:n,s=B+"-"+o;o!==O&&o.length>0&&!r("#"+s).length?(this._id=s,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):t[e]=i},"^prerender":function(t,e,n){n&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(t,e,n){this._updateContent(n)},"^content.attr$":function(t,e,n,i){this.options.content.text===this.target.attr(i)&&this._updateContent(this.target.attr(n))},"^content.title$":function(t,e,i){return i?(i&&!this.elements.title&&this._createTitle(),this._updateTitle(i),n):this._removeTitle()},"^content.button$":function(t,e,n){this._updateButton(n)},"^content.title.(text|button)$":function(t,e,n){this.set("content."+e,n)},"^position.(my|at)$":function(t,e,n){"string"==typeof n&&(t[e]=new T(n,"at"===e))},"^position.container$":function(t,e,n){this.tooltip.appendTo(n)},"^show.ready$":function(t,e,n){n&&(!this.rendered&&this.render(E)||this.toggle(E))},"^style.classes$":function(t,e,n,i){this.tooltip.removeClass(i).addClass(n)},"^style.width|height":function(t,e,n){this.tooltip.css(e,n)},"^style.widget|content.title":function(){this._setWidget()},"^style.def":function(t,e,n){this.tooltip.toggleClass(X,!!n)},"^events.(render|show|move|hide|focus|blur)$":function(t,e,n){tooltip[(r.isFunction(n)?"":"un")+"bind"]("tooltip"+e,n)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var t=this.options.position;tooltip.attr("tracking","mouse"===t.target&&t.adjust.mouse),this._unassignEvents(),this._assignEvents()}}},S.get=function(t){if(this.destroyed)return this;var e=u(this.options,t.toLowerCase()),n=e[0][e[1]];return n.precedance?n.string():n};var ie=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,re=/^prerender|show\.ready/i;S.set=function(t,e){if(this.destroyed)return this;var i,o=this.rendered,s=O,a=this.options;return this.checks,"string"==typeof t?(i=t,t={},t[i]=e):t=r.extend({},t),r.each(t,function(e,i){if(!o&&!re.test(e))return delete t[e],n;var l,c=u(a,e.toLowerCase());l=c[0][c[1]],c[0][c[1]]=i&&i.nodeType?r(i):i,s=ie.test(e)||s,t[e]=[c[0],c[1],i,l]}),l(a),this.positioning=E,r.each(t,r.proxy(c,this)),this.positioning=O,this.rendered&&this.tooltip[0].offsetWidth>0&&s&&this.reposition("mouse"===a.position.target?A:this.cache.event),this},S._update=function(t,e,n){var i=this,o=this.cache;return this.rendered&&t?(r.isFunction(t)&&(t=t.call(this.elements.target,o.event,this)||""),r.isFunction(t.then)?(o.waiting=E,t.then(function(t){return o.waiting=O,i._update(t,e,n)},A,function(t){return i._update(t,e,n)})):t===O||!t&&""!==t?O:(t.jquery&&t.length>0?e.empty().append(t.css({display:"block"})):e.html(t),o.waiting=E,e.imagesLoaded().done(function(t){o.waiting=O,n!==O&&i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(o.event,!t.length)}).promise())):O},S._updateContent=function(t,e){this._update(t,this.elements.content,e)},S._updateTitle=function(t,e){this._update(t,this.elements.title,e)===O&&this._removeTitle(O)},S._createTitle=function(){var t=this.elements,e=this._id+"-title";t.titlebar&&this._removeTitle(),t.titlebar=r("<div />",{"class":B+"-titlebar "+(this.options.style.widget?h("header"):"")}).append(t.title=r("<div />",{id:e,"class":B+"-title","aria-atomic":E})).insertBefore(t.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(t){r(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(t){r(this).toggleClass("ui-state-hover","mouseover"===t.type)}),this.options.content.button&&this._createButton()},S._removeTitle=function(t){var e=this.elements;e.title&&(e.titlebar.remove(),e.titlebar=e.title=e.button=A,t!==O&&this.reposition())},S.reposition=function(n,i){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=E;var o,s,a=this.cache,l=this.tooltip,u=this.options.position,c=u.target,h=u.my,d=u.at,f=u.viewport,p=u.container,g=u.adjust,m=g.method.split(" "),v=l.outerWidth(O),y=l.outerHeight(O),b=0,w=0,x=l.css("position"),C={left:0,top:0},_=l[0].offsetWidth>0,k=n&&"scroll"===n.type,S=r(t),T=p[0].ownerDocument,M=this.mouse;if(r.isArray(c)&&2===c.length)d={x:N,y:z},C={left:c[0],top:c[1]};else if("mouse"===c&&(n&&n.pageX||a.event.pageX))d={x:N,y:z},n=!M||!M.pageX||!g.mouse&&n&&n.pageX?(!n||"resize"!==n.type&&"scroll"!==n.type?n&&n.pageX&&"mousemove"===n.type?n:(!g.mouse||this.options.show.distance)&&a.origin&&a.origin.pageX?a.origin:n:a.event)||n||a.event||M||{}:M,"static"!==x&&(C=p.offset()),T.body.offsetWidth!==(t.innerWidth||T.documentElement.clientWidth)&&(s=r(T.body).offset()),C={left:n.pageX-C.left+(s&&s.left||0),top:n.pageY-C.top+(s&&s.top||0)},g.mouse&&k&&(C.left-=M.scrollX-S.scrollLeft(),C.top-=M.scrollY-S.scrollTop());else{if("event"===c&&n&&n.target&&"scroll"!==n.type&&"resize"!==n.type?a.target=r(n.target):"event"!==c&&(a.target=r(c.jquery?c:elements.target)),c=a.target,c=r(c).eq(0),0===c.length)return this;c[0]===e||c[0]===t?(b=BROWSER.iOS?t.innerWidth:c.width(),w=BROWSER.iOS?t.innerHeight:c.height(),c[0]===t&&(C={top:(f||c).scrollTop(),left:(f||c).scrollLeft()})):q.imagemap&&c.is("area")?o=q.imagemap(this,c,d,q.viewport?m:O):q.svg&&c[0].ownerSVGElement?o=q.svg(this,c,d,q.viewport?m:O):(b=c.outerWidth(O),w=c.outerHeight(O),C=c.offset()),o&&(b=o.width,w=o.height,s=o.offset,C=o.position),C=this.reposition.offset(c,C,p),(BROWSER.iOS>3.1&&4.1>BROWSER.iOS||BROWSER.iOS>=4.3&&4.33>BROWSER.iOS||!BROWSER.iOS&&"fixed"===x)&&(C.left-=S.scrollLeft(),C.top-=S.scrollTop()),(!o||o&&o.adjustable!==O)&&(C.left+=d.x===j?b:d.x===W?b/2:0,C.top+=d.y===H?w:d.y===W?w/2:0)}return C.left+=g.x+(h.x===j?-v:h.x===W?-v/2:0),C.top+=g.y+(h.y===H?-y:h.y===W?-y/2:0),q.viewport?(C.adjusted=q.viewport(this,C,u,b,w,v,y),s&&C.adjusted.left&&(C.left+=s.left),s&&C.adjusted.top&&(C.top+=s.top)):C.adjusted={left:0,top:0},this._trigger("move",[C,f.elem||f],n)?(delete C.adjusted,i===O||!_||isNaN(C.left)||isNaN(C.top)||"mouse"===c||!r.isFunction(u.effect)?l.css(C):r.isFunction(u.effect)&&(u.effect.call(l,this,r.extend({},C)),l.queue(function(t){r(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),t()})),this.positioning=O,this):this},S.reposition.offset=function(t,n,i){function o(t,e){n.left+=e*t.scrollLeft(),n.top+=e*t.scrollTop()}if(!i[0])return n;var s,a,l,u,c=r(t[0].ownerDocument),h=!!BROWSER.ie&&"CSS1Compat"!==e.compatMode,d=i[0];do"static"!==(a=r.css(d,"position"))&&("fixed"===a?(l=d.getBoundingClientRect(),o(c,-1)):(l=r(d).position(),l.left+=parseFloat(r.css(d,"borderLeftWidth"))||0,l.top+=parseFloat(r.css(d,"borderTopWidth"))||0),n.left-=l.left+(parseFloat(r.css(d,"marginLeft"))||0),n.top-=l.top+(parseFloat(r.css(d,"marginTop"))||0),s||"hidden"===(u=r.css(d,"overflow"))||"visible"===u||(s=r(d)));while(d=d.offsetParent);return s&&(s[0]!==c[0]||h)&&o(s,1),n};var oe=(T=S.reposition.Corner=function(t,e){t=(""+t).replace(/([A-Z])/," $1").replace(/middle/gi,W).toLowerCase(),this.x=(t.match(/left|right/i)||t.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(t.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!e;var n=t.charAt(0);this.precedance="t"===n||"b"===n?F:D}).prototype;oe.invert=function(t,e){this[t]=this[t]===N?j:this[t]===j?N:e||this[t]},oe.string=function(){var t=this.x,e=this.y;return t===e?t:this.precedance===F||this.forceY&&"center"!==e?e+" "+t:t+" "+e},oe.abbrev=function(){var t=this.string().split(" ");return t[0].charAt(0)+(t[1]&&t[1].charAt(0)||"")},oe.clone=function(){return new T(this.string(),this.forceY)},S.toggle=function(t,n){var i=this.cache,o=this.options,s=this.tooltip;if(n){if(/over|enter/.test(n.type)&&/out|leave/.test(i.event.type)&&o.show.target.add(n.target).length===o.show.target.length&&s.has(n.relatedTarget).length)return this;i.event=r.extend({},n)}if(this.waiting&&!t&&(this.hiddenDuringWait=E),!this.rendered)return t?this.render(1):this;if(this.destroyed||this.disabled)return this;var a,l,u=t?"show":"hide",c=this.options[u],h=(this.options[t?"hide":"show"],this.options.position),d=this.options.content,f=this.tooltip.css("width"),p=this.tooltip[0].offsetWidth>0,g=t||1===c.target.length,m=!n||2>c.target.length||i.target[0]===n.target;return(typeof t).search("boolean|number")&&(t=!p),a=!s.is(":animated")&&p===t&&m,l=a?A:!!this._trigger(u,[90]),l!==O&&t&&this.focus(n),!l||a?this:(r.attr(s[0],"aria-hidden",!t),t?(i.origin=r.extend({},this.mouse),r.isFunction(d.text)&&this._updateContent(d.text,O),r.isFunction(d.title)&&this._updateTitle(d.title,O),!L&&"mouse"===h.target&&h.adjust.mouse&&(r(e).bind("mousemove."+B,this._storeMouse),L=E),f||s.css("width",s.outerWidth(O)),this.reposition(n,arguments[2]),f||s.css("width",""),c.solo&&("string"==typeof c.solo?r(c.solo):r(G,c.solo)).not(s).not(c.target).qtip("hide",r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete i.origin,L&&!r(G+'[tracking="true"]:visible',c.solo).not(s).length&&(r(e).unbind("mousemove."+B),L=O),this.blur(n)),after=r.proxy(function(){t?(BROWSER.ie&&s[0].style.removeAttribute("filter"),s.css("overflow",""),"string"==typeof c.autofocus&&r(this.options.show.autofocus,s).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):s.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(t?"visible":"hidden")},this),c.effect===O||g===O?(s[u](),after()):r.isFunction(c.effect)?(s.stop(1,1),c.effect.call(s,this),s.queue("fx",function(t){after(),t()})):s.fadeTo(90,t?1:0,after),t&&c.target.trigger("qtip-"+this.id+"-inactive"),this)},S.show=function(t){return this.toggle(E,t)},S.hide=function(t){return this.toggle(O,t)},S.focus=function(t){if(!this.rendered||this.destroyed)return this;var e=r(G),n=this.tooltip,i=parseInt(n[0].style.zIndex,10),o=k.zindex+e.length;return n.hasClass(J)||this._trigger("focus",[o],t)&&(i!==o&&(e.each(function(){this.style.zIndex>i&&(this.style.zIndex=this.style.zIndex-1)}),e.filter("."+J).qtip("blur",t)),n.addClass(J)[0].style.zIndex=o),this},S.blur=function(t){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],t),this)},S.disable=function(t){return this.destroyed?this:("boolean"!=typeof t&&(t=!(this.tooltip.hasClass(te)||this.disabled)),this.rendered&&this.tooltip.toggleClass(te,t).attr("aria-disabled",t),this.disabled=!!t,this)},S.enable=function(){return this.disable(O)},S._createButton=function(){var t=this,e=this.elements,n=e.tooltip,i=this.options.content.button,o="string"==typeof i,s=o?i:"Close tooltip";e.button&&e.button.remove(),e.button=i.jquery?i:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":B+"-icon"),title:s,"aria-label":s}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),e.button.appendTo(e.titlebar||n).attr("role","button").click(function(e){return n.hasClass(te)||t.hide(e),O})},S._updateButton=function(t){if(!this.rendered)return O;var e=this.elements.button;t?this._createButton():e.remove()},S._setWidget=function(){var t=this.options.style.widget,e=this.elements,n=e.tooltip,i=n.hasClass(te);n.removeClass(te),te=t?"ui-state-disabled":"qtip-disabled",n.toggleClass(te,i),n.toggleClass("ui-helper-reset "+h(),t).toggleClass(X,this.options.style.def&&!t),e.content&&e.content.toggleClass(h("content"),t),e.titlebar&&e.titlebar.toggleClass(h("header"),t),e.button&&e.button.toggleClass(B+"-icon",!t)},S._storeMouse=function(n){this.mouse={pageX:n.pageX,pageY:n.pageY,type:"mousemove",scrollX:t.pageXOffset||e.body.scrollLeft||e.documentElement.scrollLeft,scrollY:t.pageYOffset||e.body.scrollTop||e.documentElement.scrollTop}},S._bind=function(t,e,n,i,o){var s="."+this._id+(i?"-"+i:"");e.length&&r(t).bind((e.split?e:e.join(s+" "))+s,r.proxy(n,o||this))},S._unbind=function(t,e){r(t).unbind("."+this._id+(e?"-"+e:""))};var se="."+B;r(function(){m(G,["mouseenter","mouseleave"],function(t){var e="mouseenter"===t.type,n=r(t.currentTarget),i=r(t.relatedTarget||t.target),o=this.options;e?(this.focus(t),n.hasClass(K)&&!n.hasClass(te)&&clearTimeout(this.timers.hide)):"mouse"===o.position.target&&o.hide.event&&o.show.target&&!i.closest(o.show.target[0]).length&&this.hide(t),n.toggleClass(Z,e)}),m("["+U+"]",Q,p)}),S._trigger=function(t,e,n){var i=r.Event("tooltip"+t);return i.originalEvent=n&&r.extend({},n)||this.cache.event||A,this.triggering=E,this.tooltip.trigger(i,[this].concat(e||[])),this.triggering=O,!i.isDefaultPrevented()},S._assignEvents=function(){var i=this.options,o=i.position,s=this.tooltip,a=i.show.target,l=i.hide.target,u=o.container,c=o.viewport,h=r(e),m=(r(e.body),r(t)),v=i.show.event?r.trim(""+i.show.event).split(" "):[],y=i.hide.event?r.trim(""+i.hide.event).split(" "):[],b=[];/mouse(out|leave)/i.test(i.hide.event)&&"window"===i.hide.leave&&this._bind(h,["mouseout","blur"],function(t){/select|option/.test(t.target.nodeName)||t.relatedTarget||this.hide(t)}),i.hide.fixed?l=l.add(s.addClass(K)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(u.closest("html"),["mousedown","touchstart"],function(t){var e=r(t.target),n=this.rendered&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0,i=e.parents(G).filter(this.tooltip[0]).length>0;e[0]===this.target[0]||e[0]===this.tooltip[0]||i||this.target.has(e[0]).length||!n||this.hide(t)}),"number"==typeof i.hide.inactive&&(this._bind(a,"qtip-"+this.id+"-inactive",p),this._bind(l.add(s),k.inactiveEvents,p,"-inactive")),y=r.map(y,function(t){var e=r.inArray(t,v);return e>-1&&l.add(a).length===l.length?(b.push(v.splice(e,1)[0]),n):t}),this._bind(a,v,d),this._bind(l,y,f),this._bind(a,b,function(t){(this.tooltip[0].offsetWidth>0?f:d).call(this,t)}),this._bind(a.add(s),"mousemove",function(t){if("number"==typeof i.hide.distance){var e=this.cache.origin||{},n=this.options.hide.distance,r=Math.abs;(r(t.pageX-e.pageX)>=n||r(t.pageY-e.pageY)>=n)&&this.hide(t)}this._storeMouse(t)}),"mouse"===o.target&&o.adjust.mouse&&(i.hide.event&&this._bind(a,["mouseenter","mouseleave"],function(t){this.cache.onTarget="mouseenter"===t.type}),this._bind(h,"mousemove",function(t){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(te)&&this.tooltip[0].offsetWidth>0&&this.reposition(t)})),(o.adjust.resize||c.length)&&this._bind(r.event.special.resize?c:m,"resize",g),o.adjust.scroll&&this._bind(m.add(o.container),"scroll",g)},S._unassignEvents=function(){var n=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],t,e];this.rendered?this._unbind(r([]).pushStack(r.grep(n,function(t){return"object"==typeof t}))):r(n[0]).unbind("."+this._id+"-create")},k=r.fn.qtip=function(t,e,i){var o=(""+t).toLowerCase(),s=A,a=r.makeArray(arguments).slice(1),u=a[a.length-1],c=this[0]?r.data(this[0],B):A;return!arguments.length&&c||"api"===o?c:"string"==typeof t?(this.each(function(){var t=r.data(this,B);if(!t)return E;if(u&&u.timeStamp&&(t.cache.event=u),!e||"option"!==o&&"options"!==o)t[o]&&t[o].apply(t,a);else{if(i===n&&!r.isPlainObject(e))return s=t.get(e),O;t.set(e,i)}}),s!==A?s:this):"object"!=typeof t&&arguments.length?n:(c=l(r.extend(E,{},t)),k.bind.call(this,c,u))},k.bind=function(t,e){return this.each(function(i){function o(t){function e(){c.render("object"==typeof t||s.show.ready),a.show.add(a.hide).unbind(u)}return c.disabled?O:(c.cache.event=r.extend({},t),c.cache.target=t?r(t.target):[n],s.show.delay>0?(clearTimeout(c.timers.show),c.timers.show=setTimeout(e,s.show.delay),l.show!==l.hide&&a.hide.bind(l.hide,function(){clearTimeout(c.timers.show)})):e(),n)}var s,a,l,u,c,h;return h=r.isArray(t.id)?t.id[i]:t.id,h=!h||h===O||1>h.length||k.api[h]?k.nextid++:h,u=".qtip-"+h+"-create",c=v(r(this),h,t),c===O?E:(k.api[h]=c,s=c.options,r.each(q,function(){"initialize"===this.initialize&&this(c)}),a={show:s.show.target,hide:s.hide.target},l={show:r.trim(""+s.show.event).replace(/ /g,u+" ")+u,hide:r.trim(""+s.hide.event).replace(/ /g,u+" ")+u},/mouse(over|enter)/i.test(l.show)&&!/mouse(out|leave)/i.test(l.hide)&&(l.hide+=" mouseleave"+u),a.show.bind("mousemove"+u,function(t){c._storeMouse(t),c.cache.onTarget=E}),a.show.bind(l.show,o),(s.show.ready||s.prerender)&&o(e),n)})},k.api={},r.each({attr:function(t,e){if(this.length){var n=this[0],i="title",o=r.data(n,"qtip");if(t===i&&o&&"object"==typeof o&&o.options.suppress)return 2>arguments.length?r.attr(n,ne):(o&&o.options.content.attr===i&&o.cache.attr&&o.set("content.text",e),this.attr(ne,e))}return r.fn["attr"+ee].apply(this,arguments)},clone:function(t){var e=(r([]),r.fn["clone"+ee].apply(this,arguments));return t||e.filter("["+ne+"]").attr("title",function(){return r.attr(this,ne)}).removeAttr(ne),e}},function(t,e){if(!e||r.fn[t+ee])return E;var n=r.fn[t+ee]=r.fn[t];r.fn[t]=function(){return e.apply(this,arguments)||n.apply(this,arguments)}}),r.ui||(r["cleanData"+ee]=r.cleanData,r.cleanData=function(t){for(var e,n=0;(e=r(t[n])).length&&e.attr(U);n++)try{e.triggerHandler("removeqtip")}catch(i){}r["cleanData"+ee](t)}),k.version="2.0.1-105",k.nextid=0,k.inactiveEvents=Q,k.zindex=15e3,k.defaults={prerender:O,id:O,overwrite:E,suppress:E,content:{text:E,attr:"title",title:O,button:O},position:{my:"top left",at:"bottom right",target:O,container:O,viewport:O,adjust:{x:0,y:0,mouse:E,scroll:E,resize:E,method:"flipinvert flipinvert"},effect:function(t,e){r(this).animate(e,{duration:200,queue:O})}},show:{target:O,event:"mouseenter",effect:E,delay:90,solo:O,ready:O,autofocus:O},hide:{target:O,event:"mouseleave",effect:E,delay:0,fixed:O,inactive:O,leave:"window",distance:O},style:{classes:"",widget:O,width:O,height:O,def:E},events:{render:A,move:A,show:A,hide:A,toggle:A,visible:A,hidden:A,focus:A,blur:A}};var ae,le="margin",ue="border",ce="color",he="background-color",de="transparent",fe=" !important",pe=!!e.createElement("canvas").getContext,ge=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,me={},ve=["Webkit","O","Moz","ms"];pe||(createVML=function(t,e,n){return"<qtipvml:"+t+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(e||"")+' style="behavior: url(#default#VML); '+(n||"")+'" />'}),r.extend(x.prototype,{init:function(t){var e,n;n=this.element=t.elements.tip=r("<div />",{"class":B+"-tip"}).prependTo(t.tooltip),pe?(e=r("<canvas />").appendTo(this.element)[0].getContext("2d"),e.lineJoin="miter",e.miterLimit=100,e.save()):(e=createVML("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(e+e),t._bind(r("*",n).add(n),["click","mousedown"],function(t){t.stopPropagation()},this._ns)),t._bind(t.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(t){var e=this.qtip.elements.titlebar;return e&&(t.y===z||t.y===W&&this.element.position().top+size[1]/2+options.offset<e.outerHeight(E))},_parseCorner:function(t){var e=this.qtip.options.position.my;return t===O||e===O?t=O:t===E?t=new T(e.string()):t.string||(t=new T(t),t.fixed=E),t},_parseWidth:function(t,e,n){var i=this.qtip.elements,r=ue+y(e)+"Width";return(n?w(n,r):w(i.content,r)||w(this._useTitle(t)&&i.titlebar||i.content,r)||w(tooltip,r))||0},_parseRadius:function(t){var e=this.qtip.elements,n=ue+y(t.y)+y(t.x)+"Radius";return 9>BROWSER.ie?0:w(this._useTitle(t)&&e.titlebar||e.content,n)||w(e.tooltip,n)||0},_invalidColour:function(t,e,n){var i=t.css(e);return!i||n&&i===t.css(n)||ge.test(i)?O:i},_parseColours:function(t){var e=this.qtip.elements,n=this.element.css("cssText",""),i=ue+y(t[t.precedance])+y(ce),o=this._useTitle(t)&&e.titlebar||e.content,s=this._invalidColour,a=[];return a[0]=s(n,he)||s(o,he)||s(e.content,he)||s(tooltip,he)||n.css(he),a[1]=s(n,i,ce)||s(o,i,ce)||s(e.content,i,ce)||s(tooltip,i,ce)||tooltip.css(i),r("*",n).add(n).css("cssText",he+":"+de+fe+";"+ue+":0"+fe+";"),a},_calculateSize:function(t){var e,n,i,r=t.precedance===F,o=this.options[r?"height":"width"],s=this.options[r?"width":"height"],a="c"===t.abbrev(),l=o*(a?.5:1),u=Math.pow,c=Math.round,h=Math.sqrt(u(l,2)+u(s,2)),d=[this.border/l*h,this.border/s*h];return d[2]=Math.sqrt(u(d[0],2)-u(this.border,2)),d[3]=Math.sqrt(u(d[1],2)-u(this.border,2)),e=h+d[2]+d[3]+(a?0:d[0]),n=e/h,i=[c(n*o),c(n*s)],r?i:i.reverse()},_calculateTip:function(t){var e=this.size[0],n=this.size[1],i=Math.ceil(e/2),r=Math.ceil(n/2),o={br:[0,0,e,n,e,0],bl:[0,0,e,0,0,n],tr:[0,n,e,0,e,n],tl:[0,0,0,n,e,n],tc:[0,n,i,0,e,n],bc:[0,0,e,0,i,n],rc:[0,0,e,r,0,n],lc:[e,0,e,n,0,r]};return o.lt=o.br,o.rt=o.bl,o.lb=o.tr,o.rb=o.tl,o[t.abbrev()]},create:function(){var t=this.corner=(pe||BROWSER.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=t.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,e){if(!this.enabled)return this;var n,i,o,s,a,l,u,c=(this.qtip.elements,this.element),h=c.children(),d=this.options,f=this.size,p=d.mimic,g=Math.round;t||(t=this.qtip.cache.corner||this.corner),p===O?p=t:(p=new T(p),p.precedance=t.precedance,"inherit"===p.x?p.x=t.x:"inherit"===p.y?p.y=t.y:p.x===p.y&&(p[t.precedance]=t[t.precedance])),i=p.precedance,t.precedance===D?this._swapDimensions():this._resetDimensions(),n=this.color=this._parseColours(t),n[1]!==de?(u=this.border=this._parseWidth(t,t[t.precedance]),d.border&&1>u&&(n[0]=n[1]),this.border=u=d.border!==E?d.border:u):this.border=u=0,s=this._calculateTip(p),l=this.size=this._calculateSize(t),c.css({width:l[0],height:l[1],lineHeight:l[1]+"px"}),a=t.precedance===F?[g(p.x===N?u:p.x===j?l[0]-f[0]-u:(l[0]-f[0])/2),g(p.y===z?l[1]-f[1]:0)]:[g(p.x===N?l[0]-f[0]:0),g(p.y===z?u:p.y===H?l[1]-f[1]-u:(l[1]-f[1])/2)],pe?(h.attr(I,l[0]).attr($,l[1]),o=h[0].getContext("2d"),o.restore(),o.save(),o.clearRect(0,0,3e3,3e3),o.fillStyle=n[0],o.strokeStyle=n[1],o.lineWidth=2*u,o.translate(a[0],a[1]),o.beginPath(),o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]),o.lineTo(s[4],s[5]),o.closePath(),u&&("border-box"===tooltip.css("background-clip")&&(o.strokeStyle=n[0],o.stroke()),o.strokeStyle=n[1],o.stroke()),o.fill()):(s="m"+s[0]+","+s[1]+" l"+s[2]+","+s[3]+" "+s[4]+","+s[5]+" xe",a[2]=u&&/^(r|b)/i.test(t.string())?8===BROWSER.ie?2:1:0,h.css({coordsize:f[0]+u+" "+(f[1]+u),antialias:""+(p.string().indexOf(W)>-1),left:a[0],top:a[1],width:f[0]+u,height:f[1]+u}).each(function(t){var e=r(this);e[e.prop?"prop":"attr"]({coordsize:f[0]+u+" "+(f[1]+u),path:s,fillcolor:n[0],filled:!!t,stroked:!t}).toggle(!(!u&&!t)),!t&&e.html(createVML("stroke",'weight="'+2*u+'px" color="'+n[1]+'" miterlimit="1000" joinstyle="miter"'))})),e!==O&&this.calculate(t)
},calculate:function(t){if(!this.enabled)return O;var e,n,i,o=this,s=this.qtip.elements,a=this.element,l=Math.max(0,this.options.offset),u=(this.qtip.tooltip.hasClass("ui-widget"),{});return t=t||this.corner,e=t.precedance,n=this._calculateSize(t),i=[t.x,t.y],e===D&&i.reverse(),r.each(i,function(i,r){var a,c,h;r===W?(a=e===F?N:z,u[a]="50%",u[le+"-"+a]=-Math.round(n[e===F?0:1]/2)+l):(a=o._parseWidth(t,r,s.tooltip),c=o._parseWidth(t,r,s.content),h=o._parseRadius(t),u[r]=Math.max(-o.border,i?c:l+(h>a?h:-a)))}),u[t[e]]-=n[e===D?0:1],a.css({margin:"",top:"",bottom:"",left:"",right:""}).css(u),u},reposition:function(t,e,i){if(this.enabled){var r,o,s=e.cache,a=this.corner.clone(),l=i.adjusted,u=e.options.position.adjust.method.split(" "),c=u[0],h=u[1]||u[0],d={left:O,top:O,x:0,y:0},f={};this.corner.fixed!==E&&(c===R&&a.precedance===D&&l.left&&a.y!==W?a.precedance=a.precedance===D?F:D:c!==R&&l.left&&(a.x=a.x===W?l.left>0?N:j:a.x===N?j:N),h===R&&a.precedance===F&&l.top&&a.x!==W?a.precedance=a.precedance===F?D:F:h!==R&&l.top&&(a.y=a.y===W?l.top>0?z:H:a.y===z?H:z),a.string()===s.corner.string()||s.cornerTop===l.top&&s.cornerLeft===l.left||this.update(a,O)),r=this.calculate(a,l),r.right!==n&&(r.left=-r.right),r.bottom!==n&&(r.top=-r.bottom),r.user=Math.max(0,this.offset),(d.left=c===R&&!!l.left)&&(a.x===W?f[le+"-left"]=d.x=r[le+"-left"]-l.left:(o=r.right!==n?[l.left,-r.left]:[-l.left,r.left],(d.x=Math.max(o[0],o[1]))>o[0]&&(i.left-=l.left,d.left=O),f[r.right!==n?j:N]=d.x)),(d.top=h===R&&!!l.top)&&(a.y===W?f[le+"-top"]=d.y=r[le+"-top"]-l.top:(o=r.bottom!==n?[l.top,-r.top]:[-l.top,r.top],(d.y=Math.max(o[0],o[1]))>o[0]&&(i.top-=l.top,d.top=O),f[r.bottom!==n?H:z]=d.y)),this.element.css(f).toggle(!(d.x&&d.y||a.x===W&&d.y||a.y===W&&d.x)),i.left-=r.left.charAt?r.user:c!==R||d.top||!d.left&&!d.top?r.left:0,i.top-=r.top.charAt?r.user:h!==R||d.left||!d.left&&!d.top?r.top:0,s.cornerLeft=l.left,s.cornerTop=l.top,s.corner=a.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),ae=q.tip=function(t){return new x(t,t.options.style.tip)},ae.initialize="render",ae.sanitize=function(t){t.style&&"tip"in t.style&&(opts=t.style.tip,"object"!=typeof opts&&(opts=t.style.tip={corner:opts}),/string|boolean/i.test(typeof opts.corner)||(opts.corner=E))},M.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(t){this.size=size=[t.width,t.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},r.extend(E,k.defaults,{style:{tip:{corner:E,mimic:O,width:6,height:6,border:E,offset:0}}});var ye,be,we="qtip-modal",xe="."+we;be=function(){function n(t){if(r.expr[":"].focusable)return r.expr[":"].focusable;var e,n,i,o=!isNaN(r.attr(t,"tabindex")),s=t.nodeName&&t.nodeName.toLowerCase();return"area"===s?(e=t.parentNode,n=e.name,t.href&&n&&"map"===e.nodeName.toLowerCase()?(i=r("img[usemap=#"+n+"]")[0],!!i&&i.is(":visible")):!1):/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||o:o}function i(t){1>h.length&&t.length?t.not("body").blur():h.first().focus()}function o(t){if(u.is(":visible")){var e,n=r(t.target),o=s.tooltip,l=n.closest(G);e=1>l.length?O:parseInt(l[0].style.zIndex,10)>parseInt(o[0].style.zIndex,10),e||n.closest(G)[0]===o[0]||i(n),a=t.target===h[h.length-1]}}var s,a,l,u,c=this,h={};r.extend(c,{init:function(){function n(){var t=r(this);u.css({height:t.height(),width:t.width()})}return u=c.elem=r("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return O}}).hide(),r(t).bind("resize"+xe,n),n(),r(e.body).bind("focusin"+xe,o),r(e).bind("keydown"+xe,function(t){s&&s.options.show.modal.escape&&27===t.keyCode&&s.hide(t)}),u.bind("click"+xe,function(t){s&&s.options.show.modal.blur&&s.hide(t)}),c},update:function(t){s=t,h=t.options.show.modal.stealfocus!==O?t.tooltip.find("*").filter(function(){return n(this)}):[]},toggle:function(t,n,o){var a=(r(e.body),t.tooltip),h=t.options.show.modal,d=h.effect,f=n?"show":"hide",p=u.is(":visible"),g=r(xe).filter(":visible:not(:animated)").not(a);return c.update(t),n&&h.stealfocus!==O&&i(r(":focus")),u.toggleClass("blurs",h.blur),n&&u.css({left:0,top:0}).appendTo(e.body),u.is(":animated")&&p===n&&l!==O||!n&&g.length?c:(u.stop(E,O),r.isFunction(d)?d.call(u,n):d===O?u[f]():u.fadeTo(parseInt(o,10)||90,n?1:0,function(){n||u.hide()}),n||u.queue(function(t){u.css({left:"",top:""}),r(xe).length||u.detach(),t()}),l=n,s.destroyed&&(s=A),c)}}),c.init()},be=new be,r.extend(C.prototype,{init:function(t){var e=t.tooltip;return this.options.on?(t.elements.overlay=be.elem,e.addClass(we).css("z-index",q.modal.zindex+r(xe).length),t._bind(e,["tooltipshow","tooltiphide"],function(t,n,i){var o=t.originalEvent;if(t.target===e[0])if(o&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(o.type)&&r(o.relatedTarget).closest(overlay[0]).length)try{t.preventDefault()}catch(s){}else(!o||o&&!o.solo)&&this.toggle(t,"tooltipshow"===t.type,i)},this._ns,this),t._bind(e,"tooltipfocus",function(t,n){if(!t.isDefaultPrevented()&&t.target===e[0]){var i=r(xe),o=q.modal.zindex+i.length,s=parseInt(e[0].style.zIndex,10);be.elem[0].style.zIndex=o-1,i.each(function(){this.style.zIndex>s&&(this.style.zIndex-=1)}),i.filter("."+J).qtip("blur",t.originalEvent),e.addClass(J)[0].style.zIndex=o,be.update(n);try{t.preventDefault()}catch(a){}}},this._ns,this),t._bind(e,"tooltiphide",function(t){t.target===e[0]&&r(xe).filter(":visible").not(e).last().qtip("focus",t)},this._ns,this),n):this},toggle:function(t,e,i){return t&&t.isDefaultPrevented()?this:(be.toggle(this.qtip,!!e,i),n)},destroy:function(){this.qtip.tooltip.removeClass(we),this.qtip._unbind(this.qtip.tooltip,this._ns),be.toggle(this.qtip,O),delete this.qtip.elements.overlay}}),ye=q.modal=function(t){return new C(t,t.options.show.modal)},ye.sanitize=function(t){t.show&&("object"!=typeof t.show.modal?t.show.modal={on:!!t.show.modal}:t.show.modal.on===n&&(t.show.modal.on=E))},ye.zindex=k.zindex-200,ye.initialize="render",M.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},r.extend(E,k.defaults,{show:{modal:{on:O,effect:E,blur:E,stealfocus:E,escape:E}}}),q.viewport=function(n,i,r,o,s,a,l){function u(t,e,n,r,o,s,a,l,u){var c=i[o],d=g[t],f=m[t],p=n===R,v=-C.offset[o]+x.offset[o]+x["scroll"+o],y=d===o?u:d===s?-u:-u/2,b=f===o?l:f===s?-l:-l/2,w=k&&k.size?k.size[a]||0:0,_=k&&k.corner&&k.corner.precedance===t&&!p?w:0,S=v-c+_,T=c+u-x[a]-v+_,M=y-(g.precedance===t||d===g[e]?b:0)-(f===W?l/2:0);return p?(_=k&&k.corner&&k.corner.precedance===e?w:0,M=(d===o?1:-1)*y-_,i[o]+=S>0?S:T>0?-T:0,i[o]=Math.max(-C.offset[o]+x.offset[o]+(_&&k.corner[t]===W?k.offset:0),c-M,Math.min(Math.max(-C.offset[o]+x.offset[o]+x[a],c+M),i[o]))):(r*=n===P?2:0,S>0&&(d!==o||T>0)?(i[o]-=M+r,h.invert(t,o)):T>0&&(d!==s||S>0)&&(i[o]-=(d===W?-M:M)+r,h.invert(t,s)),v>i[o]&&-i[o]>T&&(i[o]=c,h=g.clone())),i[o]-c}var c,h,d,f=r.target,p=n.elements.tooltip,g=r.my,m=r.at,v=r.adjust,y=v.method.split(" "),b=y[0],w=y[1]||y[0],x=r.viewport,C=r.container,_=n.cache,k=n.plugins.tip,S={left:0,top:0};return x.jquery&&f[0]!==t&&f[0]!==e.body&&"none"!==v.method?(c="fixed"===p.css("position"),x={elem:x,width:x[0]===t?x.width():x.outerWidth(O),height:x[0]===t?x.height():x.outerHeight(O),scrollleft:c?0:x.scrollLeft(),scrolltop:c?0:x.scrollTop(),offset:x.offset()||{left:0,top:0}},C={elem:C,scrollLeft:C.scrollLeft(),scrollTop:C.scrollTop(),offset:C.offset()||{left:0,top:0}},("shift"!==b||"shift"!==w)&&(h=g.clone()),S={left:"none"!==b?u(D,F,b,v.x,N,j,I,o,a):0,top:"none"!==w?u(F,D,w,v.y,z,H,$,s,l):0},h&&_.lastClass!==(d=B+"-pos-"+h.abbrev())&&p.removeClass(n.cache.lastClass).addClass(n.cache.lastClass=d),S):S},q.polys={polygon:function(t,e){var n,i,r,o={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:O},s=0,a=[],l=1,u=1,c=0,h=0;for(s=t.length;s--;)n=[parseInt(t[--s],10),parseInt(t[s+1],10)],n[0]>o.position.right&&(o.position.right=n[0]),n[0]<o.position.left&&(o.position.left=n[0]),n[1]>o.position.bottom&&(o.position.bottom=n[1]),n[1]<o.position.top&&(o.position.top=n[1]),a.push(n);if(i=o.width=Math.abs(o.position.right-o.position.left),r=o.height=Math.abs(o.position.bottom-o.position.top),"c"===e.abbrev())o.position={left:o.position.left+o.width/2,top:o.position.top+o.height/2};else{for(;i>0&&r>0&&l>0&&u>0;)for(i=Math.floor(i/2),r=Math.floor(r/2),e.x===N?l=i:e.x===j?l=o.width-i:l+=Math.floor(i/2),e.y===z?u=r:e.y===H?u=o.height-r:u+=Math.floor(r/2),s=a.length;s--&&!(2>a.length);)c=a[s][0]-o.position.left,h=a[s][1]-o.position.top,(e.x===N&&c>=l||e.x===j&&l>=c||e.x===W&&(l>c||c>o.width-l)||e.y===z&&h>=u||e.y===H&&u>=h||e.y===W&&(u>h||h>o.height-u))&&a.splice(s,1);o.position={left:a[0][0],top:a[0][1]}}return o},rect:function(t,e,n,i){return{width:Math.abs(n-t),height:Math.abs(i-e),position:{left:Math.min(t,n),top:Math.min(e,i)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(t,e,n,i,r){var o=q.polys._angles[r.abbrev()],s=n*Math.cos(o*Math.PI),a=i*Math.sin(o*Math.PI);return{width:2*n-Math.abs(s),height:2*i-Math.abs(a),position:{left:t+s,top:e+a},adjustable:O}},circle:function(t,e,n,i){return q.polys.ellipse(t,e,n,n,i)}},q.svg=function(t,n,o){for(var s,a,l=r(e),u=n[0],c=O;!u.getBBox;)u=u.parentNode;if(!u.getBBox||!u.parentNode)return O;switch(u.nodeName){case"rect":s=q.svg.toPixel(u,u.x.baseVal.value,u.y.baseVal.value),a=q.svg.toPixel(u,u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value),c=q.polys.rect(s[0],s[1],a[0],a[1],o);break;case"ellipse":case"circle":s=q.svg.toPixel(u,u.cx.baseVal.value,u.cy.baseVal.value),c=q.polys.ellipse(s[0],s[1],(u.rx||u.r).baseVal.value,(u.ry||u.r).baseVal.value,o);break;case"line":case"polygon":case"polyline":for(points=u.points||[{x:u.x1.baseVal.value,y:u.y1.baseVal.value},{x:u.x2.baseVal.value,y:u.y2.baseVal.value}],c=[],i=-1,len=points.numberOfItems||points.length;len>++i;)next=points.getItem?points.getItem(i):points[i],c.push.apply(c,q.svg.toPixel(u,next.x,next.y));c=q.polys.polygon(c,o);break;default:return O}return c.position.left+=l.scrollLeft(),c.position.top+=l.scrollTop(),c},q.svg.toPixel=function(t,e,n){var i,r,o=t.getScreenCTM(),s=t.farthestViewportElement||t;return s.createSVGPoint?(r=s.createSVGPoint(),r.x=e,r.y=n,i=r.matrixTransform(o),[i.x,i.y]):O},q.imagemap=function(t,e,n){e.jquery||(e=r(e));var i,o,s,a=e.attr("shape").toLowerCase().replace("poly","polygon"),l=r('img[usemap="#'+e.parent("map").attr("name")+'"]'),u=e.attr("coords"),c=u.split(",");if(!l.length)return O;if("polygon"===a)result=q.polys.polygon(c,n);else{if(!q.polys[a])return O;for(s=-1,len=c.length,o=[];len>++s;)o.push(parseInt(c[s],10));result=q.polys[a].apply(this,o.concat(n))}return i=l.offset(),i.left+=Math.ceil((l.outerWidth(O)-l.width())/2),i.top+=Math.ceil((l.outerHeight(O)-l.height())/2),result.position.left+=i.left,result.position.top+=i.top,result};var Ce,_e='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';r.extend(_.prototype,{_scroll:function(){var e=this.qtip.elements.overlay;e&&(e[0].style.top=r(t).scrollTop()+"px")},init:function(n){var i=n.tooltip;1>r("select, object").length&&(this.bgiframe=n.elements.bgiframe=r(_e).appendTo(i),n._bind(i,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=r("<div/>",{id:B+"-rcontainer"}).appendTo(e.body),n.elements.overlay&&n.elements.overlay.addClass("qtipmodal-ie6fix")&&(n._bind(t,["scroll","resize"],this._scroll,this._ns,this),n._bind(i,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t,e,n=this.qtip.tooltip,i={height:n.outerHeight(O),width:n.outerWidth(O)},r=this.qtip.plugins.tip,o=this.qtip.elements.tip;e=parseInt(n.css("borderLeftWidth"),10)||0,e={left:-e,top:-e},r&&o&&(t="x"===r.corner.precedance?[I,N]:[$,z],e[t[1]]-=o[t[0]]()),this.bgiframe.css(e).css(i)},redraw:function(){if(1>this.qtip.rendered||this.drawing)return self;var t,e,n,i,r=this.qtip.tooltip,o=this.qtip.options.style,s=this.qtip.options.position.container;return this.qtip.drawing=1,o.height&&r.css($,o.height),o.width?r.css(I,o.width):(r.css(I,"").appendTo(this.redrawContainer),e=r.width(),1>e%2&&(e+=1),n=r.css("maxWidth")||"",i=r.css("minWidth")||"",t=(n+i).indexOf("%")>-1?s.width()/100:0,n=(n.indexOf("%")>-1?t:1)*parseInt(n,10)||e,i=(i.indexOf("%")>-1?t:1)*parseInt(i,10)||0,e=n+i?Math.min(Math.max(e,i),n):e,r.css(I,Math.round(e)).appendTo(s)),this.drawing=0,self},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([t,this.qtip.tooltip],this._ns)}}),Ce=q.ie6=function(t){return 6===BROWSER.ie?new _(t):O},Ce.initialize="render",M.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(t,e){"use strict";var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(i){function r(){var e=t(d),n=t(f);l&&(f.length?l.reject(c,e,n):l.resolve(c)),t.isFunction(i)&&i.call(a,c,e,n)}function o(t){s(t.target,"error"===t.type)}function s(e,i){e.src!==n&&-1===t.inArray(e,h)&&(h.push(e),i?f.push(e):d.push(e),t.data(e,"imagesLoaded",{isBroken:i,src:e.src}),u&&l.notifyWith(t(e),[i,c,t(d),t(f)]),c.length===h.length&&(setTimeout(r),c.unbind(".imagesLoaded",o)))}var a=this,l=t.isFunction(t.Deferred)?t.Deferred():0,u=t.isFunction(l.notify),c=a.find("img").add(a.filter("img")),h=[],d=[],f=[];return t.isPlainObject(i)&&t.each(i,function(t,e){"callback"===t?i=e:l&&l[t](e)}),c.length?c.bind("load.imagesLoaded error.imagesLoaded",o).each(function(i,r){var o=r.src,a=t.data(r,"imagesLoaded");return a&&a.src===o?(s(r,a.isBroken),e):r.complete&&r.naturalWidth!==e?(s(r,0===r.naturalWidth||0===r.naturalHeight),e):((r.readyState||r.complete)&&(r.src=n,r.src=o),e)}):r(),l?l.promise(a):a}}(jQuery),jQuery.fn.slugIt=function(t){function e(){return{"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y"}}function n(){return{"α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y"}}function i(){return{"ş":"s","Ş":"S","ı":"i","İ":"I","ç":"c","Ç":"C","ü":"u","Ü":"U","ö":"o","Ö":"O","ğ":"g","Ğ":"G"}}function r(){return{"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya"}}function o(){return{"Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g"}}function s(){return{"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"}}function a(){return{"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"o","Ś":"S","Ź":"Z","Ż":"Z"}}function l(){return{"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z"}}function u(){return{"€":"euro","₢":"cruzeiro","₣":"french franc","£":"pound","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","¢":"cent","¥":"yen","元":"yuan","円":"yen","﷼":"rial","₠":"ecu","¤":"currency","฿":"baht"}}function c(){return{"©":"(c)","œ":"oe","Œ":"OE","∑":"sum","®":"(r)","†":"+","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"tm","℠":"sm","…":"...","˚":"o","º":"o","ª":"a","•":"*","∆":"delta","∞":"infinity","♥":"love","&":"and"}}var h={events:"keypress keyup",output:"#slug",map:!1,before:!1,after:!1},d=jQuery.extend(h,t),f=e();return f=jQuery.extend(f,n()),f=jQuery.extend(f,i()),f=jQuery.extend(f,r()),f=jQuery.extend(f,o()),f=jQuery.extend(f,s()),f=jQuery.extend(f,l()),f=jQuery.extend(f,a()),f=jQuery.extend(f,c()),f=jQuery.extend(f,u()),d.map&&(f=jQuery.extend(f,d.map)),jQuery(this).bind(h.events,function(){var t=jQuery(this).val();d.before&&(t=d.before(t)),t=jQuery.trim(""+t);for(var e=new String,n=0;t.length>n;n++)e+=f[t.charAt(n)]?f[t.charAt(n)]:t.charAt(n);return e=e.replace(/[^-\w\s$\*\(\)\'\!\_]/g,"-"),e=e.replace(/^\s+|\s+$/g,""),e=e.replace(/[-\s]+/g,"-"),e=e.replace(/-$/,""),e=e.toLowerCase(),d.after&&(e=d.after(e)),"function"==typeof d.output?d.output(e):(jQuery(d.output).val(e),jQuery(d.output).html(e)),this}),this},function(){function t(e){var n=t.modules[e];if(!n)throw Error('failed to require "'+e+'"');return"exports"in n||"function"!=typeof n.definition||(n.client=n.component=!0,n.definition.call(this,n.exports={},n),delete n.definition),n.exports}t.modules={},t.register=function(e,n){t.modules[e]={definition:n}},t.define=function(e,n){t.modules[e]={exports:n}},t.register("component~emitter@1.1.2",function(t,e){function n(t){return t?i(t):void 0}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var i,r=0;n.length>r;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("dropzone",function(e,n){n.exports=t("dropzone/lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(e,n){(function(){var e,i,r,o,s,a,l,u,c={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d=[].slice;i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:t("component~emitter@1.1.2"),l=function(){},e=function(t){function e(t,i){var r,o,s;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw Error("Invalid dropzone element.");if(this.element.dropzone)throw Error("Dropzone already attached.");if(e.instances.push(this),this.element.dropzone=this,r=null!=(s=e.optionsForElement(this.element))?s:{},this.options=n({},this.defaultOptions,r,null!=i?i:{}),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.previewsContainer=this.options.previewsContainer?e.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:e.getElements(this.options.clickable,"clickable")),this.init()}var n;return h(e,t),e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return l},forceFallback:!1,fallback:function(){var t,n,i,r,o,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),r=0,o=s.length;o>r;r++)t=s[r],/(^| )dz-message($| )/.test(t.className)&&(n=t,t.className="dz-message");return n||(n=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,t.height<this.options.thumbnailHeight||t.width<this.options.thumbnailWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var n,i,r,o,s,a,l,u,c,h,d,f,p;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),t.previewElement=e.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),h=t.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=h.length;l>o;o++)n=h[o],n.textContent=t.name;for(d=t.previewElement.querySelectorAll("[data-dz-size]"),s=0,u=d.length;u>s;s++)n=d[s],n.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),i=function(n){return function(i){return i.preventDefault(),i.stopPropagation(),t.status===e.UPLOADING?e.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(t)}):n.options.dictRemoveFileConfirmation?e.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(t)}):n.removeFile(t)}}(this),f=t.previewElement.querySelectorAll("[data-dz-remove]"),p=[],a=0,c=f.length;c>a;a++)r=f[a],p.push(r.addEventListener("click",i));return p},removedfile:function(t){var e;return null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,r,o,s;for(t.previewElement.classList.remove("dz-file-preview"),t.previewElement.classList.add("dz-image-preview"),o=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),s=[],i=0,r=o.length;r>i;i++)n=o[i],n.alt=t.name,s.push(n.src=e);return s},error:function(t,e){var n,i,r,o,s;for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),o=t.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.textContent=e);return s},errormultiple:l,processing:function(t){return t.previewElement.classList.add("dz-processing"),t._removeLink?t._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:l,uploadprogress:function(t,e){var n,i,r,o,s;for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.style.width=""+e+"%");return s},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(t){return t.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:l,complete:function(t){return t._removeLink?t._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},n=function(){var t,e,n,i,r,o,s;for(i=arguments[0],n=arguments.length>=2?d.call(arguments,1):[],o=0,s=n.length;s>o;o++){e=n[o];for(t in e)r=e[t],i[t]=r}return i},e.prototype.getAcceptedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted&&r.push(t);return r},e.prototype.getRejectedFiles=function(){var t,e,n,i,r;for(i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.accepted||r.push(t);return r},e.prototype.getQueuedFiles=function(){var t,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)t=r[n],t.status===e.QUEUED&&o.push(t);return o},e.prototype.getUploadingFiles=function(){var t,n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)t=r[n],t.status===e.UPLOADING&&o.push(t);return o},e.prototype.init=function(){var t,n,i,r,o,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(t){return function(){return t.hiddenFileInput&&document.body.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.body.appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,n,r,o;if(n=t.hiddenFileInput.files,n.length)for(r=0,o=n.length;o>r;r++)e=n[r],t.addFile(e);return i()})}}(this),i()),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,r=0,o=a.length;o>r;r++)t=a[r],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(){return 0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length?setTimeout(function(){return t.emit("queuecomplete")},0):void 0}}(this)),n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(e){return n(e),t.emit("dragenter",e)}}(this),dragover:function(t){return function(e){var i;try{i=e.dataTransfer.effectAllowed}catch(r){}return e.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",n(e),t.emit("dragover",e)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(e){return n(e),t.drop(e)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(n){return t.listeners.push({element:n,events:{click:function(i){return n!==t.element||i.target===t.element||e.elementInside(i.target,t.element.querySelector(".dz-message"))?t.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},e.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,e.instances.splice(e.instances.indexOf(this),1)},e.prototype.updateTotalUploadProgress=function(){var t,e,n,i,r,o,s,a;if(i=0,n=0,t=this.getAcceptedFiles(),t.length){for(a=this.getAcceptedFiles(),o=0,s=a.length;s>o;o++)e=a[o],i+=e.upload.bytesSent,n+=e.upload.total;r=100*i/n}else r=100;return this.emit("totaluploadprogress",r,n,i)},e.prototype.getFallbackForm=function(){var t,n,i,r;
return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=e.createElement(i),"FORM"!==this.element.tagName?(r=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:n)},e.prototype.getExistingFallback=function(){var t,e,n,i,r,o;for(e=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},o=["div","form"],i=0,r=o.length;r>i;i++)if(n=o[i],t=e(this.element.getElementsByTagName(n)))return t},e.prototype.setupEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.addEventListener(e,n,!1));return r}());return s},e.prototype.removeEventListeners=function(){var t,e,n,i,r,o,s;for(o=this.listeners,s=[],i=0,r=o.length;r>i;i++)t=o[i],s.push(function(){var i,r;i=t.events,r=[];for(e in i)n=i[e],r.push(t.element.removeEventListener(e,n,!1));return r}());return s},e.prototype.disable=function(){var t,e,n,i,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(this.cancelUpload(t));return r},e.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},e.prototype.filesize=function(t){var e;return t>=109951162777.6?(t/=109951162777.6,e="TiB"):t>=107374182.4?(t/=107374182.4,e="GiB"):t>=104857.6?(t/=104857.6,e="MiB"):t>=102.4?(t/=102.4,e="KiB"):(t=10*t,e="b"),"<strong>"+Math.round(t)/10+"</strong> "+e},e.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},e.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,e.length&&(n=t.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},e.prototype.paste=function(t){var e,n;if(null!=(null!=t?null!=(n=t.clipboardData)?n.items:void 0:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},e.prototype.handleFiles=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.addFile(e));return r},e.prototype._addFilesFromItems=function(t){var e,n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],null!=n.webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?o.push(this.addFile(n.getAsFile())):e.isDirectory?o.push(this._addFilesFromDirectory(e,e.name)):o.push(void 0):null!=n.getAsFile?null==n.kind||"file"===n.kind?o.push(this.addFile(n.getAsFile())):o.push(void 0):o.push(void 0);return o},e.prototype._addFilesFromDirectory=function(t,e){var n,i;return n=t.createReader(),i=function(t){return function(n){var i,r,o;for(r=0,o=n.length;o>r;r++)i=n[r],i.isFile?i.file(function(n){return t.options.ignoreHiddenFiles&&"."===n.name.substring(0,1)?void 0:(n.fullPath=""+e+"/"+n.name,t.addFile(n))}):i.isDirectory&&t._addFilesFromDirectory(i,""+e+"/"+i.name)}}(this),n.readEntries(i,function(t){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log(t):void 0:void 0})},e.prototype.accept=function(t,n){return t.size>1024*1024*this.options.maxFilesize?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,n):n(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=e.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(n){return n?(t.accepted=!1,e._errorProcessing([t],n)):e.enqueueFile(t),e._updateMaxFilesReachedClass()}}(this))},e.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;i>n;n++)e=t[n],this.enqueueFile(e);return null},e.prototype.enqueueFile=function(t){if(t.accepted=!0,t.status!==e.ADDED)throw Error("This file can't be queued because it has already been processed or was rejected.");return t.status=e.QUEUED,this.options.autoProcessQueue?setTimeout(function(t){return function(){return t.processQueue()}}(this),0):void 0},e.prototype._thumbnailQueue=[],e.prototype._processingThumbnail=!1,e.prototype._enqueueThumbnail=function(t){return this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*1024*this.options.maxThumbnailFilesize?(this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)):void 0},e.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this)))},e.prototype.removeFile=function(t){return t.status===e.UPLOADING&&this.cancelUpload(t),this.files=u(this.files,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},e.prototype.removeAllFiles=function(t){var n,i,r,o;for(null==t&&(t=!1),o=this.files.slice(),i=0,r=o.length;r>i;i++)n=o[i],(n.status!==e.UPLOADING||t)&&this.removeFile(n);return null},e.prototype.createThumbnail=function(t,e){var n;return n=new FileReader,n.onload=function(i){return function(){var r;return r=document.createElement("img"),r.onload=function(){var n,o,s,l,u,c,h,d;return t.width=r.width,t.height=r.height,s=i.options.resize.call(i,t),null==s.trgWidth&&(s.trgWidth=i.options.thumbnailWidth),null==s.trgHeight&&(s.trgHeight=i.options.thumbnailHeight),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=s.trgWidth,n.height=s.trgHeight,a(o,r,null!=(u=s.srcX)?u:0,null!=(c=s.srcY)?c:0,s.srcWidth,s.srcHeight,null!=(h=s.trgX)?h:0,null!=(d=s.trgY)?d:0,s.trgWidth,s.trgHeight),l=n.toDataURL("image/png"),i.emit("thumbnail",t,l),null!=e?e():void 0},r.src=n.result}}(this),n.readAsDataURL(t)},e.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,n=this.getUploadingFiles().length,t=n,!(n>=e)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;e>t;){if(!i.length)return;this.processFile(i.shift()),t++}}},e.prototype.processFile=function(t){return this.processFiles([t])},e.prototype.processFiles=function(t){var n,i,r;for(i=0,r=t.length;r>i;i++)n=t[i],n.processing=!0,n.status=e.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},e.prototype._getFilesWithXhr=function(t){var e,n;return n=function(){var n,i,r,o;for(r=this.files,o=[],n=0,i=r.length;i>n;n++)e=r[n],e.xhr===t&&o.push(e);return o}.call(this)},e.prototype.cancelUpload=function(t){var n,i,r,o,s,a,l;if(t.status===e.UPLOADING){for(i=this._getFilesWithXhr(t.xhr),r=0,s=i.length;s>r;r++)n=i[r],n.status=e.CANCELED;for(t.xhr.abort(),o=0,a=i.length;a>o;o++)n=i[o],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=t.status)===e.ADDED||l===e.QUEUED)&&(t.status=e.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));return this.options.autoProcessQueue?this.processQueue():void 0},e.prototype.uploadFile=function(t){return this.uploadFiles([t])},e.prototype.uploadFiles=function(t){var i,r,o,s,a,l,u,c,h,d,f,p,g,m,v,y,b,w,x,C,_,k,S,T,M,L,E,O,A,D,F;for(y=new XMLHttpRequest,b=0,_=t.length;_>b;b++)i=t[b],i.xhr=y;y.open(this.options.method,this.options.url,!0),y.withCredentials=!!this.options.withCredentials,g=null,o=function(e){return function(){var n,r,o;for(o=[],n=0,r=t.length;r>n;n++)i=t[n],o.push(e._errorProcessing(t,g||e.options.dictResponseError.replace("{{statusCode}}",y.status),y));return o}}(this),m=function(e){return function(n){var r,o,s,a,l,u,c,h,d;if(null!=n)for(o=100*n.loaded/n.total,s=0,u=t.length;u>s;s++)i=t[s],i.upload={progress:o,total:n.total,bytesSent:n.loaded};else{for(r=!0,o=100,a=0,c=t.length;c>a;a++)i=t[a],(100!==i.upload.progress||i.upload.bytesSent!==i.upload.total)&&(r=!1),i.upload.progress=o,i.upload.bytesSent=i.upload.total;if(r)return}for(d=[],l=0,h=t.length;h>l;l++)i=t[l],d.push(e.emit("uploadprogress",i,o,i.upload.bytesSent));return d}}(this),y.onload=function(n){return function(i){var r;if(t[0].status!==e.CANCELED&&4===y.readyState){if(g=y.responseText,y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{g=JSON.parse(g)}catch(s){i=s,g="Invalid JSON response from server."}return m(),(r=y.status)>=200&&300>r?n._finished(t,g,i):o()}}}(this),y.onerror=function(){return function(){return t[0].status!==e.CANCELED?o():void 0}}(this),p=null!=(E=y.upload)?E:y,p.onprogress=m,l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(l,this.options.headers);for(s in l)a=l[s],y.setRequestHeader(s,a);if(r=new FormData,this.options.params){O=this.options.params;for(d in O)v=O[d],r.append(d,v)}for(w=0,k=t.length;k>w;w++)i=t[w],this.emit("sending",i,y,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,y,r),"FORM"===this.element.tagName)for(A=this.element.querySelectorAll("input, textarea, select, button"),x=0,S=A.length;S>x;x++)if(u=A[x],c=u.getAttribute("name"),h=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(D=u.options,C=0,T=D.length;T>C;C++)f=D[C],f.selected&&r.append(c,f.value);else(!h||"checkbox"!==(F=h.toLowerCase())&&"radio"!==F||u.checked)&&r.append(c,u.value);for(L=0,M=t.length;M>L;L++)i=t[L],r.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name);return y.send(r)},e.prototype._finished=function(t,n,i){var r,o,s;for(o=0,s=t.length;s>o;o++)r=t[o],r.status=e.SUCCESS,this.emit("success",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},e.prototype._errorProcessing=function(t,n,i){var r,o,s;for(o=0,s=t.length;s>o;o++)r=t[o],r.status=e.ERROR,this.emit("error",r,n,i),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},e}(i),e.version="3.8.5",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[r(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},e.autoDiscover=!0,e.discover=function(){var t,n,i,r,o,s;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],t=function(t){var e,n,r,o;for(o=[],n=0,r=t.length;r>n;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?o.push(i.push(e)):o.push(void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],r=0,o=i.length;o>r;r++)n=i[r],e.optionsForElement(n)!==!1?s.push(new e(n)):s.push(void 0);return s},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,n,i,r,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,i=0,r=o.length;r>i;i++)n=o[i],n.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},u=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],n!==e&&o.push(n);return o},r=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},e.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},e.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},e.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},e.getElements=function(t,e){var n,i,r,o,s,a,l,u;if(t instanceof Array){r=[];try{for(o=0,a=t.length;a>o;o++)i=t[o],r.push(this.getElement(i,e))}catch(c){n=c,r=null}}else if("string"==typeof t)for(r=[],u=document.querySelectorAll(t),s=0,l=u.length;l>s;s++)i=u[s],r.push(i);else null!=t.nodeType&&(r=[t]);if(null==r||!r.length)throw Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},e.isValidFile=function(t,e){var n,i,r,o,s;if(!e)return!0;for(e=e.split(","),i=t.type,n=i.replace(/\/.*$/,""),o=0,s=e.length;s>o;o++)if(r=e[o],r=r.trim(),"."===r.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),n!==void 0&&null!==n?n.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",s=function(t){var e,n,i,r,o,s,a,l,u,c;for(a=t.naturalWidth,s=t.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=s,i=n.getContext("2d"),i.drawImage(t,0,0),r=i.getImageData(0,0,1,s).data,c=0,o=s,l=s;l>c;)e=r[4*(l-1)+3],0===e?o=l:c=l,l=o+c>>1;return u=l/s,0===u?1:u},a=function(t,e,n,i,r,o,a,l,u,c){var h;return h=s(e),t.drawImage(e,n,i,r,o,a,l,u,c/h)},o=function(t,e){var n,i,r,o,s,a,l,u,c;if(r=!1,c=!0,i=t.document,u=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){return"readystatechange"!==n.type||"complete"===i.readyState?(("load"===n.type?t:i)[l](a+n.type,o,!1),!r&&(r=!0)?e.call(t,n.type||n):void 0):void 0},s=function(){var t;try{u.doScroll("left")}catch(e){return t=e,setTimeout(s,50),void 0}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{c=!t.frameElement}catch(h){}c&&s()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),t[n](a+"load",o,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},o(window,e._autoDiscoverFunction)}).call(this)}),"object"==typeof exports?module.exports=t("dropzone"):"function"==typeof define&&define.amd?define([],function(){return t("dropzone")}):this.Dropzone=t("dropzone")}();